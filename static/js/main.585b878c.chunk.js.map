{"version":3,"sources":["Components/App/context.js","Components/App/callAPI.js","Components/Signup/useValidateInput.js","Components/SignIn/SignIn.jsx","Components/Main/EntryComponent/board-image.png","Components/Main/EntryComponent/EntryComponent.jsx","Components/Main/NavBar/Invites/renderInvites.js","Components/Main/NavBar/Invites/Invites.jsx","Components/Main/NavBar/NavBar.jsx","Components/App/useFetchData.js","Components/Main/Game/GameController/PlayButton/PlayButton.jsx","Components/Main/Game/GameController/PlayWithFriend/renderPlayersList.js","Components/Main/Game/GameController/PlayWithFriend/renderPendingPlayers.js","Components/Main/Game/GameController/PlayWithFriend/PlayWithFriend.jsx","Components/Main/Game/GameController/GameController.jsx","Components/Main/Game/Timer/Timer.jsx","Components/Main/Game/Board/Piece/Piece.jsx","Components/Main/Game/Board/getSVGLocation.js","pieces/piece.js","Components/Main/Game/Board/MoveHint/MoveHint.jsx","Components/Main/Game/Board/Board.jsx","Components/Main/Game/GamePlayArea/GameResult/GameResult.jsx","Components/Main/Game/GamePlayArea/Pause/Pause.jsx","Components/Main/Game/GamePlayArea/GamePlayArea.jsx","Components/Main/Game/GameBar/ChatSection/renderMessages.js","Components/Main/Game/GameBar/ChatSection/DrawOffer/DrawOffer.jsx","Components/Main/Game/GameBar/ChatSection/ChatSection.jsx","Components/Main/Game/GameBar/GameBar.jsx","Components/Main/Game/Game.jsx","Components/Main/Warning/Warning.jsx","Components/Main/VerifyEmailNote/VerifyEmailNote.jsx","Components/Main/Main.jsx","Components/Signup/Signup.jsx","Components/VerifyEmail/VerifyEmail.jsx","Components/Home/FindMembers/renderMembersList.js","Components/Home/FindMembers/FindMembers.jsx","Components/Home/ProfileHeader/ProfileHeader.jsx","Components/Home/ProfileInfo/ProfileInfo.jsx","Components/Home/MatchHistory/renderMatchHistory.js","Components/Home/MatchHistory/MatchHistory.jsx","Components/Home/Home.jsx","Components/Settings/Settings.jsx","Components/App/useHandleRoutingWhilePlaying.js","Components/App/App.jsx","pieces/move_rules/advisorRules.js","pieces/advisor.js","pieces/move_rules/generalRules.js","pieces/general.js","pieces/move_rules/cannonRules.js","pieces/cannon.js","pieces/move_rules/elephantRules.js","pieces/elephant.js","pieces/move_rules/chariotRules.js","pieces/chariot.js","pieces/move_rules/horseRules.js","pieces/horse.js","pieces/move_rules/soldierRules.js","pieces/soldier.js","pieces/instantiatePiece.js","Components/Main/Game/Board/initializeBoard.js","reducer/boardReducer.js","reducer/appReducer.js","reducer/gameReducer.js","reducer/rootReducer.js","index.jsx"],"names":["socket","io","process","autoConnect","withCredentials","transports","rememberUpgrade","SocketContext","React","createContext","SetMoveTimerContext","AuthenticateUserContext","authenticateUser","dispatch","user","opponentID","guest","disconnect","type","value","lang","auth","player","playername","username","photo","connect","setMoveTimer","playerTurn","gameFinish","resume","removeAllListeners","emit","on","callAPI","method","endPoint","data","isFile","a","init","credentials","headers","body","JSON","stringify","fetch","response","json","responseData","ok","Error","message","useValidateInput","isSignIn","settings","useState","invalidUsernameMess","setInvalidUsernameMess","invalidEmailMess","setInvalidEmailMess","invalidPasswordMess","setInvalidPasswordMess","error","setError","setUsername","password","setPassword","email","setEmail","firstname","setFirstname","lastname","setLastname","confirmPassword","setConfirmPassword","confirmPasswordMess","setConfirmPasswordMess","showPassword","setShowPassword","currentPassword","setCurrentPassword","invalidCurrentPassword","setInvalidCurrentPassword","handleEmailChange","event","target","test","handleError","invalidMess","handleFirstnameChange","handleLastnameChange","handleMissingField","dontHaveEmail","count","handleUsernameChange","length","handlePasswordChange","handleConfirmPasswordChange","currentTarget","handleCurrentPasswordChange","Login","useDispatch","useContext","successfullyLogin","setSuccessfullyLogin","waitForResponse","setWaitForResponse","waitForServer","setWaitForServer","loginError","useSelector","state","appState","isAuthenticated","handleLogin","preventDefault","toString","handleLoginAsGuest","to","Container","fluid","Row","className","Col","md","span","sm","xs","Form","onSubmit","Group","controlId","InputGroup","hasValidation","Control","isInvalid","placeholder","onChange","disabled","Feedback","Button","Spinner","animation","variant","onClick","href","EntryComponent","cols","order","src","board_image","alt","renderInvites","invites","handleAccept","handleDecline","map","index","time","cancelInvite","OverlayTrigger","placement","overlay","Tooltip","id","Invites","setInvites","useEffect","sender","senderSocketID","prevState","socketID","push","senderInfo","findIndex","setTimeout","splice","getAttribute","NavBar","props","playerInfo","handleSetLang","selectedLang","text","choosenLang","document","querySelector","innerText","handleLogout","setRedirect","Navbar","expand","Brand","Toggle","aria-controls","Collapse","Nav","style","display","NavDropdown","title","Item","useFetchData","PlayButton","findingMatch","handlePlay","renderPlayersList","players","handleSelectPlayer","name","backgroundColor","renderPendingPlayers","pendingPlayers","declineInvite","PlayWithFriend","goBack","input","setInput","playersList","setPlayersList","setPendingPlayers","show","setShow","useRef","copyButton","inviteLink","setInviteLink","invitedPlayer","setInvitedPlayer","gameState","side","boardState","showText","setShowText","replaceSpecialCharacters","str","replace","handleOnChange","reCheck","handleCanotSendInvite","reason","handleSendInvite","exact","receiverInfo","messageInVi","onInput","ref","width","height","Overlay","current","readOnly","navigator","clipboard","writeText","then","arrowProps","popper","GameController","playWithFriendText","setPlayWithFriendText","playWithFriend","setPlayWithFriend","handlePlayWithFriend","connected","handleSelectTime","selectedTime","handleToggle","handleSwitchSide","opponent","firstMove","timeSelectorDisplay","handleCenterBoard","centerBoard","Timer","store","useStore","minute","Math","floor","timeLeftToMove","second","turnToMove","getState","opponentInfo","winner","appendPiece","pieces","choosenSide","board","handleMouseDown","i","j","position","row","col","opacity","canBeCaptured","transform","translate","onMouseDown","Piece","getSVGLocation","clientX","clientY","svg","point","createSVGPoint","x","y","location","matrixTransform","getScreenCTM","inverse","this","split","minCol","maxCol","minRow","maxRow","newRow","newCol","curRow","curCol","moveRow","moveCol","valid","existMove","moves","some","move","moveHint","generalTranslate","putGeneralInDanger","capture","translateX","translateY","isValid","checkValidMove","countPiecesBetween","mode","moveResult","canMoveToNewPosition","tmpBoard","reduce","acc","updateTmpBoard","isGeneralInDanger","setPosition","DOMNode","moveVertical","moveDiagonal","finished","xB","yB","setAttribute","modifyBoard","start","yA","xA","step","window","requestAnimationFrame","animate","timestamp","undefined","abs","setTransform","canCapture","canCaptureGeneral","tmp","MoveHint","boardWidth","moveHints","canCaptureHints","radius","cx","cy","r","Board","targetDisplay","boardSize","currentPiece","getClicked","draggable","warningDisplay","setWarningDisplay","warningTranslate","setWarningTranslate","svgRef","targetTranslate","movePiece","stopPropagation","canMove","updateBoard","showMoveHints","updateCurrentPiece","handleMouseUp","gameResult","handleMouseMove","constructNewPiecesWidth","piece","handleResize","offsetWidth","ondragstart","onmousemove","onmouseup","onresize","animateMove","handleOpponentMove","lostReason","PieceClass","isLost","backgroundImage","elementId","memo","GameResult","boardHeight","gameResultDisplay","side1","charAt","toUpperCase","slice","side0","displayGameResult","left","pause","pauseTime","Pause","pauseAnnounce","handleOpponentPauseOrResumeGame","action","actionInVi","from","isResume","GamePlayArea","opponentTimeLeftToMove","playerTimeLeftToMove","foundMatch","capturedPieces","element","renderMessages","messages","DrawOffer","receiveDrawOffer","handleDrawResult","mess","ChatSection","messagesContainerRef","hideChat","setHideChat","displayMessages","list","lastListItem","scrollTop","offsetTop","GameBar","handleResign","Game","setTimeSelectorDisplay","setCenterBoard","handleGameOver","result","handleVisibilityChange","visibilityState","addEventListener","onfocus","Warning","setDisplay","connectionError","VerifyEmailNote","hideNote","setHideNote","Main","setConnectionError","err","errMess","close","verified","Signup","handleSignUp","missingField","Label","VerifyEmail","setVerified","resend","setResend","verificationCode","setVerficationCode","invalidCodeMess","setInvalidCodeMess","waitForSendingCode","setWaitForSendingCode","codeRef","handleSubmit","correct","sendVerificationCode","code","lg","float","textAlign","marginTop","renderMemberLists","members","option","year","month","day","member","fullname","joinDate","Date","join","toLocaleDateString","FindPlayer","setValue","setMembers","errorMess","setErrorMess","renderMembersList","ProfileHeader","viewOthersProfile","setting","playerFullName","upload","formData","FormData","file","files","append","_id","click","accept","ProfileInfo","totalGames","totalMatches","won","draw","lost","lastOnlineDate","lastOnline","marginLeft","renderMatchHistory","matches","resultInVi","reasonInVi","date","color","MatchHistory","Table","borderless","responsive","Home","useParams","redirect","Boolean","Settings","buttonText","setButtonText","uploadErr","setUploadErr","validateInput","getChanges","changes","handleSaveChange","as","column","useHandleRoutingWhilePlaying","useLocation","pathname","App","Provider","path","advisorRules","Advisor","generalRules","General","cannonRules","Cannon","elephantRules","Elephant","chariotRules","Chariot","horseRules","Horse","isBlocked","soliderRules","Soldier","crossRiver","instantiatePiece","Solider","initializeBoard","initialBoard","initialPosition","getInitialPosition","pieceName","defaultState","boardReducer","newState","Object","assign","newCapturedPieces","gameReducer","newMessages","rootReducer","combineReducers","appReducer","debounceNotify","debounce","notify","createStore","batchedSubscribe","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.585b878c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst socket = io(`${process.env.REACT_APP_BASE_URL}/play`, {\r\n  autoConnect: false,\r\n  withCredentials: true,\r\n  transports: ['websocket', 'polling'],\r\n  rememberUpgrade: true,\r\n});\r\nconst SocketContext = React.createContext();\r\nconst SetMoveTimerContext = React.createContext();\r\nconst AuthenticateUserContext = React.createContext();\r\n\r\nconst authenticateUser = (dispatch, user, opponentID) => {\r\n  if (socket.guest) socket.disconnect();\r\n  socket.guest = user.guest;\r\n\r\n  dispatch({ type: 'resetBoardState', value: 520 });\r\n  dispatch({ type: 'resetGameState' });\r\n  dispatch({ type: 'setIsAuthenticated', value: !user.guest ? true : 'guest' });\r\n  dispatch({ type: 'setPlayerInfo', value: user });\r\n\r\n  if (user.lang) dispatch({ type: 'setLang', value: user.lang });\r\n  socket.auth = {\r\n    player: {\r\n      playername: user.username,\r\n      guest: user.guest,\r\n      photo: user.photo,\r\n    },\r\n    opponentID: opponentID,\r\n  };\r\n  socket.connect();\r\n};\r\n\r\nconst setMoveTimer = (playerTurn, gameFinish, dispatch, resume) => {\r\n  socket.removeAllListeners('oneSecondPass');\r\n  if (gameFinish) {\r\n    dispatch({ type: 'setPause', value: null });\r\n    dispatch({ type: 'setPauseTime', value: 'restart' });\r\n    dispatch({ type: 'setOpponentTimeLeftToMove', value: 'restart' });\r\n    dispatch({ type: 'setPlayerTimeLeftToMove', value: 'restart' });\r\n    dispatch({ type: 'setTurnToMove', value: false });\r\n  } else {\r\n    if (!resume) {\r\n      dispatch({ type: 'setOpponentTimeLeftToMove', value: 'restart' });\r\n      dispatch({ type: 'setPlayerTimeLeftToMove', value: 'restart' });\r\n    }\r\n    socket.emit('startTimer', true);\r\n    socket.on('oneSecondPass', () => {\r\n      if (playerTurn) dispatch({ type: 'setPlayerTimeLeftToMove', value: null });\r\n      else dispatch({ type: 'setOpponentTimeLeftToMove', value: null });\r\n    });\r\n  }\r\n};\r\n\r\nexport {\r\n  SocketContext,\r\n  SetMoveTimerContext,\r\n  setMoveTimer,\r\n  socket,\r\n  AuthenticateUserContext,\r\n  authenticateUser,\r\n};\r\n","const callAPI = async (method, endPoint, data, isFile) => {\r\n  try {\r\n    let response;\r\n    if (method === 'POST') {\r\n      const init = {\r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: isFile\r\n          ? {}\r\n          : {\r\n              'Content-Type': 'application/json',\r\n            },\r\n        body: isFile ? data : JSON.stringify(data),\r\n      };\r\n      response = await fetch(`${process.env.REACT_APP_BASE_URL}/${endPoint}`, init);\r\n    } else\r\n      response = await fetch(`${process.env.REACT_APP_BASE_URL}/${endPoint}`, {\r\n        credentials: 'include',\r\n      });\r\n    const responseData = await response.json();\r\n    responseData.ok = response.ok;\r\n    return responseData;\r\n  } catch (err) {\r\n    throw new Error(err.message);\r\n  }\r\n};\r\n\r\nexport default callAPI;\r\n","import { useState } from \"react\";\r\n\r\nconst useValidateInput = (isSignIn, settings, lang) => {\r\n  const [invalidUsernameMess, setInvalidUsernameMess] = useState(\"\");\r\n  const [invalidEmailMess, setInvalidEmailMess] = useState(\"\");\r\n  const [invalidPasswordMess, setInvalidPasswordMess] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [firstname, setFirstname] = useState(\"\");\r\n  const [lastname, setLastname] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [confirmPasswordMess, setConfirmPasswordMess] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [currentPassword, setCurrentPassword] = useState(\"\");\r\n  const [invalidCurrentPassword, setInvalidCurrentPassword] = useState(\"\");\r\n\r\n  const handleCurrentPasswordChange = (event) => {\r\n    const value = event.currentTarget.value;\r\n    setInvalidCurrentPassword(\"\");\r\n    setCurrentPassword(value);\r\n  };\r\n\r\n  const handleConfirmPasswordChange = (event) => {\r\n    const value = event.currentTarget.value;\r\n    if (value !== password) {\r\n      setConfirmPasswordMess(\r\n        lang === \"English\" ? \"Password doesn't match\" : \"Mật khẩu không khớp\"\r\n      );\r\n    } else setConfirmPasswordMess(\"\");\r\n    setConfirmPassword(value);\r\n  };\r\n\r\n  const handleUsernameChange = (event) => {\r\n    const value = event.target.value;\r\n    if (\r\n      !isSignIn &&\r\n      value &&\r\n      (/[^_a-z0-9-]/i.test(value) || value.length < 3 || value.length > 20)\r\n    ) {\r\n      setInvalidUsernameMess(\r\n        lang === \"English\"\r\n          ? \"Username must be between 3-20 characters long and use only Latin letters and numbers\"\r\n          : \"Tên tài khoản phải đó độ dài từ 3-20 và chỉ chứa chữ Latin và số.\"\r\n      );\r\n    } else setInvalidUsernameMess(\"\");\r\n    setUsername(value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    const value = event.target.value;\r\n    if (!isSignIn && value && value.length < 6) {\r\n      setInvalidPasswordMess(\r\n        lang === \"English\"\r\n          ? \"Password must be atlest 6 characters\"\r\n          : \"Mật khẩu phải có ít nhật 6 ký tự\"\r\n      );\r\n    } else setInvalidPasswordMess(\"\");\r\n    setInvalidCurrentPassword(\"\");\r\n    setConfirmPasswordMess(\"\");\r\n    setPassword(value);\r\n  };\r\n\r\n  const handleEmailChange = (event) => {\r\n    const value = event.target.value;\r\n    if (!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9_.\\-]+$/.test(value) || /\\.\\./.test(value))\r\n      setInvalidEmailMess(\r\n        lang === \"English\"\r\n          ? \"Invalid email address\"\r\n          : \"Địa chỉ email không hợp lệ\"\r\n      );\r\n    else setInvalidEmailMess(\"\");\r\n    setEmail(value);\r\n  };\r\n\r\n  const handleFirstnameChange = (event) => {\r\n    const value = event.target.value;\r\n    setFirstname(value);\r\n  };\r\n  const handleLastnameChange = (event) => {\r\n    const value = event.target.value;\r\n    setLastname(value);\r\n  };\r\n\r\n  const handleMissingField = (dontHaveEmail) => {\r\n    let count = 0;\r\n    const message =\r\n      lang === \"English\"\r\n        ? \"Please fill out this field\"\r\n        : \"Xin hãy điền thông tin này\";\r\n    if (!username) {\r\n      count += 1;\r\n      setInvalidUsernameMess(message);\r\n    }\r\n    if (!password && !settings) {\r\n      count += 1;\r\n      setInvalidPasswordMess(message);\r\n    }\r\n    if (!currentPassword && settings && password) {\r\n      count += 1;\r\n      setInvalidCurrentPassword(message);\r\n    }\r\n\r\n    if (!email && !isSignIn && !dontHaveEmail) {\r\n      count += 1;\r\n      setInvalidEmailMess(message);\r\n    }\r\n    return count !== 0;\r\n  };\r\n\r\n  const handleError = (ok, message) => {\r\n    if (!ok) {\r\n      setError(message);\r\n    } else if (/Email/.test(message) && !isSignIn) {\r\n      setInvalidEmailMess(\r\n        lang === \"English\" ? message : \"Email đã được sử dụng\"\r\n      );\r\n    } else if (/User/.test(message)) {\r\n      setInvalidUsernameMess(\r\n        lang === \"English\" ? message : \"Tên tài khoản đã được sử dụng\"\r\n      );\r\n    } else if (/Password/.test(message)) {\r\n      const invalidMess =\r\n        lang === \"English\" ? message : \"Mật khảu không chính xác\";\r\n      if (settings) setInvalidCurrentPassword(invalidMess);\r\n      else setInvalidPasswordMess(invalidMess);\r\n    } else setError(message);\r\n  };\r\n\r\n  return {\r\n    handleEmailChange,\r\n    handleError,\r\n    setError,\r\n    handleFirstnameChange,\r\n    handleLastnameChange,\r\n    handleMissingField,\r\n    handleUsernameChange,\r\n    handlePasswordChange,\r\n    confirmPassword,\r\n    setConfirmPassword,\r\n    handleConfirmPasswordChange,\r\n    confirmPasswordMess,\r\n    setConfirmPasswordMess,\r\n    showPassword,\r\n    setShowPassword,\r\n    username,\r\n    setUsername,\r\n    setEmail,\r\n    setLastname,\r\n    setFirstname,\r\n    email,\r\n    password,\r\n    lastname,\r\n    firstname,\r\n    invalidEmailMess,\r\n    invalidPasswordMess,\r\n    invalidUsernameMess,\r\n    error,\r\n    handleCurrentPasswordChange,\r\n    currentPassword,\r\n    invalidCurrentPassword,\r\n  };\r\n};\r\n\r\nexport default useValidateInput;\r\n","import React, { useState, useContext } from 'react';\r\nimport { AuthenticateUserContext } from '../App/context.js';\r\nimport callAPI from '../App/callAPI.js';\r\nimport useValidateInput from '../Signup/useValidateInput.js';\r\nimport { Container, Form, InputGroup, Button, Spinner, Row, Col } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport './SignIn.scss';\r\n\r\nconst Login = () => {\r\n  const dispatch = useDispatch();\r\n  const authenticateUser = useContext(AuthenticateUserContext);\r\n  const [successfullyLogin, setSuccessfullyLogin] = useState(false);\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n  const [waitForServer, setWaitForServer] = useState(false);\r\n  const loginError = useSelector((state) => state.appState.loginError);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const isAuthenticated = useSelector((state) => state.appState.isAuthenticated);\r\n\r\n  const {\r\n    setError,\r\n    error,\r\n    username,\r\n    password,\r\n    handleError,\r\n    handleUsernameChange,\r\n    handlePasswordChange,\r\n    invalidPasswordMess,\r\n    invalidUsernameMess,\r\n    handleMissingField,\r\n  } = useValidateInput(true, false, lang);\r\n\r\n  const handleLogin = async (event) => {\r\n    try {\r\n      event.preventDefault();\r\n      if (waitForResponse || waitForServer) return;\r\n      setError('');\r\n      const missingField = handleMissingField();\r\n      if (!missingField && !invalidPasswordMess && !invalidUsernameMess) {\r\n        setError(null);\r\n        setWaitForResponse(true);\r\n        const { message, user, ok, opponentID } = await callAPI('POST', 'api/login', {\r\n          username: username,\r\n          password: password,\r\n        });\r\n        setWaitForResponse(false);\r\n        if (user) {\r\n          authenticateUser(dispatch, user, opponentID);\r\n        } else handleError(ok, message);\r\n      }\r\n    } catch (err) {\r\n      setWaitForResponse(false);\r\n      handleError(false, err.toString());\r\n    }\r\n  };\r\n\r\n  const handleLoginAsGuest = async () => {\r\n    try {\r\n      if (waitForResponse || waitForServer) return;\r\n      setError('');\r\n      if (isAuthenticated === 'guest') setSuccessfullyLogin(true);\r\n      else {\r\n        setWaitForServer(true);\r\n        const { user, opponentID } = await callAPI('GET', 'api/login-as-guest', null);\r\n        setWaitForServer(false);\r\n        setSuccessfullyLogin(true);\r\n        authenticateUser(dispatch, user, opponentID);\r\n      }\r\n    } catch (err) {\r\n      setWaitForServer(false);\r\n      handleError(false, err.toString());\r\n    }\r\n  };\r\n\r\n  if (loginError) handleError(false, loginError);\r\n  else if (isAuthenticated) {\r\n    if (isAuthenticated !== 'guest') {\r\n      return <Redirect to='/' />;\r\n    } else if (successfullyLogin) return <Redirect to='/' />;\r\n  }\r\n\r\n  return (\r\n    <Container fluid>\r\n      <h1>{lang === 'English' ? 'Xiangqi' : 'Cờ Tướng'}</h1>\r\n      <Row className='justify-content-center'>\r\n        <Col\r\n          md={{ span: 7 }}\r\n          sm={{ span: 7 }}\r\n          xs={{ span: 10 }}\r\n          className='login-component d-flex flex-column  align-items-center'\r\n        >\r\n          {error ? <p className='error-message'>{error}</p> : null}\r\n          <Form onSubmit={handleLogin} method='POST'>\r\n            <Form.Group controlId='username-or-email'>\r\n              <InputGroup hasValidation>\r\n                <Form.Control\r\n                  type='text'\r\n                  isInvalid={invalidUsernameMess !== ''}\r\n                  placeholder={\r\n                    lang === 'English' ? 'Username or Email' : 'Tên tài khoản hoặc Email'\r\n                  }\r\n                  onChange={handleUsernameChange}\r\n                  value={username}\r\n                  disabled={waitForResponse || waitForServer}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {invalidUsernameMess}\r\n                </Form.Control.Feedback>\r\n              </InputGroup>\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId='password'>\r\n              <InputGroup hasValidation>\r\n                <Form.Control\r\n                  type='password'\r\n                  isInvalid={invalidPasswordMess !== ''}\r\n                  placeholder={lang === 'English' ? 'Password' : 'Mật Khẩu'}\r\n                  onChange={handlePasswordChange}\r\n                  value={password}\r\n                  disabled={waitForResponse || waitForServer}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {invalidPasswordMess}\r\n                </Form.Control.Feedback>\r\n              </InputGroup>\r\n            </Form.Group>\r\n            <Button type='submit' className='submit-form-button'>\r\n              {waitForResponse ? (\r\n                <Spinner animation='border' variant='dark' />\r\n              ) : lang === 'English' ? (\r\n                'Log In'\r\n              ) : (\r\n                'Đăng Nhập'\r\n              )}\r\n            </Button>\r\n            <Button className='log-in-as-guest' onClick={handleLoginAsGuest}>\r\n              {waitForServer ? (\r\n                <Spinner animation='border' variant='dark' />\r\n              ) : lang === 'English' ? (\r\n                'Log In As Guest'\r\n              ) : (\r\n                'Khách'\r\n              )}\r\n            </Button>\r\n          </Form>\r\n          <p className='seperator'>\r\n            <span></span>\r\n            <span className='seperator-text'>\r\n              {lang === 'English' ? 'or connect with' : 'hoặc đăng nhập với'}\r\n            </span>\r\n            <span></span>\r\n          </p>\r\n          <div className='social-login'>\r\n            <a\r\n              className='google'\r\n              href={`${process.env.REACT_APP_BASE_URL}/api/auth/google`}\r\n            >\r\n              <i className='fab fa-google'></i> Google\r\n            </a>\r\n            <a\r\n              className='facebook'\r\n              href={`${process.env.REACT_APP_BASE_URL}/api/auth/facebook`}\r\n            >\r\n              <i className='fab fa-facebook '></i> Facebook\r\n            </a>\r\n            <a\r\n              className='github'\r\n              href={`${process.env.REACT_APP_BASE_URL}/api/auth/github`}\r\n            >\r\n              <i className='fab fa-github '></i> Github\r\n            </a>\r\n          </div>\r\n          <div className='sign-up-area'>\r\n            <Link to='/signup'>{lang === 'English' ? 'Sign Up' : 'Đăng Ký'}</Link>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","export default __webpack_public_path__ + \"static/media/board-image.3c95ca99.png\";","import React from \"react\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport board_image from \"./board-image.png\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"./EntryComponent.scss\";\r\n\r\nconst EntryComponent = () => {\r\n  const lang = useSelector((state) => state.appState.lang);\r\n\r\n  return (\r\n    <Row md={{ cols: 2 }} className=\"justify-content-around mt-5\">\r\n      <Col\r\n        className=\"image-container\"\r\n        md={{ span: 4, order: 1 }}\r\n        xs={{ span: 10, order: 2 }}\r\n      >\r\n        <img src={board_image} alt=\"\" />\r\n      </Col>\r\n      <Col\r\n        className=\"intro\"\r\n        md={{ span: 4, order: 2 }}\r\n        xs={{ span: 10, order: 1 }}\r\n      >\r\n        <h1>\r\n          {lang === \"English\"\r\n            ? \"Play Xiangqi Online for Free\"\r\n            : \"Chơi Cờ Tướng Miễn Phí\"}\r\n        </h1>\r\n        <Link className=\"play-button\" to=\"/signin\">\r\n          {lang === \"English\" ? \"Play\" : \"Chơi\"}\r\n        </Link>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default EntryComponent;\r\n","import { Button, Tooltip, OverlayTrigger } from \"react-bootstrap\";\r\n\r\nconst renderInvites = (invites, handleAccept, handleDecline, lang) => {\r\n  return invites.map((value, index) => {\r\n    const { playername, photo, time, cancelInvite } = value;\r\n    return (\r\n      <li key={`invite-${index}`}>\r\n        <div className=\"image-container\">\r\n          <img src={photo}></img>\r\n        </div>\r\n        <div className=\"name-and-btn-container\">\r\n          <p>\r\n            <OverlayTrigger\r\n              placement=\"top\"\r\n              overlay={<Tooltip id=\"sender-name-tooltip\">{playername}</Tooltip>}\r\n            >\r\n              <span id=\"player-name\">{playername}</span>\r\n            </OverlayTrigger>\r\n\r\n            <span id={cancelInvite ? \"cancel-invite\" : \"invite-text\"}>\r\n              {cancelInvite\r\n                ? lang === \"English\"\r\n                  ? \" canceled invite\"\r\n                  : \" hủy lời mời\"\r\n                : lang === \"English\"\r\n                ? ` invites you to a game (${time} min)`\r\n                : ` mời bạn vào trận (${time} phút)`}\r\n            </span>\r\n          </p>\r\n          <div className=\"btn-container\">\r\n            <Button\r\n              onClick={handleAccept}\r\n              className=\"accept-invite\"\r\n              playername={playername}\r\n              disabled={cancelInvite}\r\n            >\r\n              {lang === \"English\" ? \"Accept\" : \"Đồng Ý\"}\r\n            </Button>\r\n            <Button\r\n              onClick={handleDecline}\r\n              className=\"decline-invite\"\r\n              playername={playername}\r\n              disabled={cancelInvite}\r\n            >\r\n              {lang === \"English\" ? \"Decline\" : \"Từ Chối\"}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    );\r\n  });\r\n};\r\n\r\nexport default renderInvites;\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { SocketContext } from \"../../../App/context.js\";\r\nimport renderInvites from \"./renderInvites.js\";\r\nimport \"./Invites.scss\";\r\n\r\nconst Invites = ({ lang }) => {\r\n  const [invites, setInvites] = useState([]);\r\n  const socket = useContext(SocketContext);\r\n\r\n  const handleAccept = (event) => {\r\n    const playername = event.currentTarget.getAttribute(\"playername\");\r\n    const index = invites.findIndex(\r\n      (player) => player.playername === playername\r\n    );\r\n    const { socketID } = invites[index];\r\n    socket.emit(\"acceptInvite\", socketID);\r\n    setInvites([]);\r\n  };\r\n\r\n  const handleDecline = (event) => {\r\n    const playername = event.currentTarget.getAttribute(\"playername\");\r\n    const index = invites.findIndex(\r\n      (player) => player.playername === playername\r\n    );\r\n    socket.emit(\"declineInvite\", invites[index].socketID, false);\r\n    setInvites((prevState) => {\r\n      prevState.splice(index, 1);\r\n      return [...prevState];\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"receiveInvite\", (sender, senderSocketID, time) => {\r\n      setInvites((prevState) => {\r\n        sender.socketID = senderSocketID;\r\n        sender.time = time;\r\n        prevState.push(sender);\r\n        return [...prevState];\r\n      });\r\n      socket.emit(\"inviteReceived\", senderSocketID);\r\n    });\r\n\r\n    socket.on(\"clearInvites\", () => {\r\n      setInvites([]);\r\n    });\r\n\r\n    socket.on(\"inviteCanceled\", (senderInfo) => {\r\n      const index = invites.findIndex(\r\n        (player) => player.playername === senderInfo.playername\r\n      );\r\n      if (index !== -1) {\r\n        setInvites((prevState) => {\r\n          prevState[index].cancelInvite = true;\r\n          return [...prevState];\r\n        });\r\n\r\n        setTimeout(() => {\r\n          setInvites((prevState) => {\r\n            prevState.splice(index, 1);\r\n            return [...prevState];\r\n          });\r\n        }, 1000);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"receiveInvite\");\r\n      socket.removeAllListeners(\"inviteCanceled\");\r\n      socket.removeAllListeners(\"clearInvites\");\r\n    };\r\n  }, [invites]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket.emit(\"declineInvite\", null, true);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <ul className=\"invites-list\">\r\n      {renderInvites(invites, handleAccept, handleDecline, lang)}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Invites;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Navbar, NavDropdown, Nav } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport callAPI from \"../../App/callAPI.js\";\r\nimport Invites from \"./Invites/Invites.jsx\";\r\nimport { SocketContext } from \"../../App/context.js\";\r\nimport \"./NavBar.scss\";\r\n\r\nconst NavBar = (props) => {\r\n  const dispatch = useDispatch();\r\n  const socket = useContext(SocketContext);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n\r\n  const handleSetLang = (event) => {\r\n    const selectedLang = event.currentTarget.text;\r\n    dispatch({ type: \"setLang\", value: selectedLang });\r\n    if (playerInfo)\r\n      callAPI(\"POST\", \"api/setLang\", {\r\n        username: playerInfo.username,\r\n        choosenLang: selectedLang,\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.querySelector(\"title\").innerText =\r\n      lang === \"English\" ? \"Xiangqi\" : \"Cờ Tướng\";\r\n  }, [lang]);\r\n\r\n  const isAuthenticated = useSelector(\r\n    (state) => state.appState.isAuthenticated\r\n  );\r\n\r\n  const handleLogout = async () => {\r\n    props.setWaitForResponse(true);\r\n    await callAPI(\"GET\", \"api/logout\", null);\r\n    dispatch({ type: \"setIsAuthenticated\", value: false });\r\n    dispatch({ type: \"setPlayerInfo\", value: null });\r\n    if (props.setRedirect) props.setRedirect(true);\r\n    socket.disconnect();\r\n  };\r\n\r\n  return (\r\n    <Navbar expand=\"md\" className=\"nav-bar\">\r\n      <Invites lang={lang} />\r\n      <Navbar.Brand>\r\n        <Link to=\"/\" className=\"link-brand\">\r\n          {lang === \"English\" ? \"Xiangqi\" : \"Cờ Tướng\"}\r\n        </Link>\r\n      </Navbar.Brand>\r\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n      <Navbar.Collapse id=\"basic-navbar-nav\">\r\n        <Nav className=\"nav\">\r\n          {props.setRedirect ? (\r\n            <Link to=\"/\" className=\"link nav-link\">\r\n              {lang === \"English\" ? \"Play\" : \"Chơi\"}\r\n            </Link>\r\n          ) : null}\r\n          <Link\r\n            target={\r\n              isAuthenticated && isAuthenticated !== \"guest\" ? \"_self\" : \"_self\"\r\n            }\r\n            to={`/${\r\n              isAuthenticated && isAuthenticated !== \"guest\" ? \"home\" : \"signin\"\r\n            }`}\r\n            className=\"link nav-link\"\r\n            style={{\r\n              display: props.setRedirect ? \"none\" : \"inline\",\r\n            }}\r\n          >\r\n            {isAuthenticated && isAuthenticated !== \"guest\"\r\n              ? lang === \"English\"\r\n                ? \"Home\"\r\n                : \"Trang Chủ\"\r\n              : lang === \"English\"\r\n              ? \"Sign In\"\r\n              : \"Đăng Nhập\"}\r\n          </Link>\r\n          <button\r\n            className=\"link nav-link logout\"\r\n            onClick={handleLogout}\r\n            style={{\r\n              display:\r\n                isAuthenticated && isAuthenticated !== \"guest\"\r\n                  ? \"inline\"\r\n                  : \"none\",\r\n            }}\r\n          >\r\n            {lang === \"English\" ? \"Log Out\" : \"Đăng Xuất\"}\r\n          </button>\r\n          <Link\r\n            to=\"/signup\"\r\n            className=\"link nav-link \"\r\n            style={{\r\n              display:\r\n                isAuthenticated && isAuthenticated !== \"guest\"\r\n                  ? \"none\"\r\n                  : \"inline\",\r\n            }}\r\n          >\r\n            {lang === \"English\" ? \"Sign Up\" : \"Đăng Ký\"}\r\n          </Link>\r\n          <NavDropdown title={lang} id=\"basic-nav-dropdown\">\r\n            <NavDropdown.Item onClick={handleSetLang}>\r\n              Tiếng Việt\r\n            </NavDropdown.Item>\r\n            <NavDropdown.Item onClick={handleSetLang}>English</NavDropdown.Item>\r\n          </NavDropdown>\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </Navbar>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import { useEffect, useState } from \"react\";\r\nimport callAPI from \"./callAPI\";\r\nimport { authenticateUser } from \"./context.js\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst useFetchData = () => {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector(\r\n    (state) => state.appState.isAuthenticated\r\n  );\r\n  const [waitForResponse, setWaitForResponse] = useState(true);\r\n\r\n  useEffect(async () => {\r\n    try {\r\n      if (!isAuthenticated) {\r\n        const { user, message, opponentID } = await callAPI(\r\n          \"GET\",\r\n          \"api/user\",\r\n          null\r\n        );\r\n\r\n        if (user) {\r\n          authenticateUser(dispatch, user, opponentID);\r\n        } else if (message) dispatch({ type: \"setLoginError\", value: message });\r\n        setWaitForResponse(false);\r\n      } else setWaitForResponse(false);\r\n    } catch (err) {\r\n      dispatch({ type: \"setLoginError\", value: err.message });\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  return [waitForResponse, setWaitForResponse];\r\n};\r\n\r\nexport default useFetchData;\r\n","import { Button, Tooltip, OverlayTrigger } from \"react-bootstrap\";\r\nimport React from \"react\";\r\n\r\nconst PlayButton = ({ findingMatch, lang, handlePlay }) => {\r\n  if (findingMatch === true) {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"top\"\r\n        overlay={\r\n          <Tooltip id=\"play-button-tooltip\">\r\n            {lang === \"English\" ? \"Click To Cancel\" : \"Nhấp Để Hủy\"}\r\n          </Tooltip>\r\n        }\r\n      >\r\n        <Button className=\"play finding-opponent\" onClick={handlePlay}>\r\n          {lang === \"English\" ? \"Finding Opponent...\" : \"Tìm Trận...\"}\r\n        </Button>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n  return (\r\n    <Button className=\"play\" onClick={handlePlay}>\r\n      {findingMatch}\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default PlayButton;\r\n","const renderPlayersList = (players, handleSelectPlayer, name) => {\r\n  const playersList = players.map((player, index) => {\r\n    const { username, photo, socketID } = player;\r\n    if (username === name) return null;\r\n    return (\r\n      <li\r\n        key={`player${index}`}\r\n        onClick={handleSelectPlayer}\r\n        playername={username}\r\n      >\r\n        <div className=\"img-container\">\r\n          <img src={photo}></img>\r\n        </div>\r\n        <p>{username}</p>\r\n        <div className=\"status\">\r\n          <span\r\n            style={{ backgroundColor: socketID ? \"#28a745\" : \"#6c757d\" }}\r\n          ></span>\r\n        </div>\r\n      </li>\r\n    );\r\n  });\r\n  return playersList;\r\n};\r\n\r\nexport default renderPlayersList;\r\n","const renderPendingPlayers = (pendingPlayers, cancelInvite, lang) => {\r\n  return pendingPlayers.map((value, index) => {\r\n    const { username, photo } = value;\r\n    return (\r\n      <li key={`pending-player-${index}`}>\r\n        <div>\r\n          <img src={photo} alt=\"\" />\r\n        </div>\r\n        <p>{username}</p>\r\n        <p className={value.declineInvite ? \"decline\" : \"pending\"}>\r\n          {value.declineInvite\r\n            ? lang === \"English\"\r\n              ? \"Declined\"\r\n              : \"Từ Chối\"\r\n            : lang === \"English\"\r\n            ? \"Pending...\"\r\n            : \"Đang Chờ...\"}\r\n        </p>\r\n        <i\r\n          className=\"fas fa-times\"\r\n          onClick={cancelInvite}\r\n          playername={username}\r\n        ></i>\r\n      </li>\r\n    );\r\n  });\r\n};\r\n\r\nexport default renderPendingPlayers;\r\n","import React, { useEffect, useState, useContext, useRef } from \"react\";\r\nimport \"./PlayWithFriend.scss\";\r\nimport { Button, Tooltip, Overlay, Spinner } from \"react-bootstrap\";\r\nimport renderPlayersList from \"./renderPlayersList.js\";\r\nimport renderPendingPlayers from \"./renderPendingPlayers.js\";\r\nimport callAPI from \"../../../../App/callAPI.js\";\r\nimport { SocketContext } from \"../../../../App/context.js\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst PlayWithFriend = ({ goBack, lang }) => {\r\n  const [input, setInput] = useState(\"\");\r\n  const [playersList, setPlayersList] = useState([]);\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n  const [pendingPlayers, setPendingPlayers] = useState([]);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const socket = useContext(SocketContext);\r\n  const [show, setShow] = useState(\"\");\r\n  const target = useRef(null);\r\n  const copyButton = useRef(null);\r\n  const [inviteLink, setInviteLink] = useState(\"\");\r\n  const [invitedPlayer, setInvitedPlayer] = useState(null);\r\n  const time = useSelector((state) => state.gameState.time);\r\n  const side = useSelector((state) => state.boardState.side);\r\n\r\n  const [showText, setShowText] = useState(false);\r\n\r\n  const handleSelectPlayer = (event) => {\r\n    const name = event.currentTarget.getAttribute(\"playername\");\r\n    setInput(name);\r\n    setPlayersList([]);\r\n  };\r\n\r\n  const replaceSpecialCharacters = (str) => {\r\n    return str.replace(/[^0-9a-zA-Z_-]+/g, \"\");\r\n  };\r\n\r\n  const handleOnChange = async (event) => {\r\n    try {\r\n      const value = event.currentTarget.value;\r\n      setInput(value);\r\n      if (value) {\r\n        const { players } = await callAPI(\"POST\", \"api/players\", {\r\n          playername: replaceSpecialCharacters(value),\r\n        });\r\n        const reCheck = document.querySelector(\"#player-name-search\").value;\r\n        if (!players) return;\r\n        const name = playerInfo.username;\r\n        if (reCheck)\r\n          setPlayersList(renderPlayersList(players, handleSelectPlayer, name));\r\n      } else setPlayersList([]);\r\n    } catch (_) {\r\n      handleCanotSendInvite(\r\n        lang === \"English\"\r\n          ? \"Something went wrong there. Try again\"\r\n          : \"Đã xảy ra lỗi. Xin hãy thử lại\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const cancelInvite = (event) => {\r\n    const playername = event.currentTarget.getAttribute(\"playername\");\r\n    const index = pendingPlayers.findIndex(\r\n      (player) => player.username === playername\r\n    );\r\n    socket.emit(\"cancelInvite\", pendingPlayers[index].socketID, false);\r\n    setPendingPlayers((prevState) => {\r\n      prevState.splice(index, 1);\r\n      return [...prevState];\r\n    });\r\n  };\r\n\r\n  const handleCanotSendInvite = (reason) => {\r\n    setWaitForResponse(false);\r\n    setShow(reason);\r\n    setTimeout(() => {\r\n      setShow(\"\");\r\n    }, 1000);\r\n  };\r\n\r\n  const handleSendInvite = async (event) => {\r\n    try {\r\n      event.preventDefault();\r\n      if (waitForResponse) return;\r\n      const index = pendingPlayers.findIndex(\r\n        (player) => player.username === input\r\n      );\r\n      if (index === -1) {\r\n        setWaitForResponse(true);\r\n        const { players } = await callAPI(\"POST\", \"api/players\", {\r\n          playername: replaceSpecialCharacters(input),\r\n          exact: true,\r\n        });\r\n        if (players.length && players[0].username !== playerInfo.username) {\r\n          if (players[0].socketID) {\r\n            if (pendingPlayers.length + 1 > 5) {\r\n              handleCanotSendInvite(\r\n                lang === \"English\"\r\n                  ? \"You have sent too many invites\"\r\n                  : \"Bạn đã gửi quá nhiều lời mời\"\r\n              );\r\n              return;\r\n            }\r\n            setInvitedPlayer(players[0]);\r\n            socket.emit(\"setTimeAndSide\", time, side[1], () => {\r\n              socket.emit(\r\n                \"sendInvite\",\r\n                players[0].socketID,\r\n                players[0].username\r\n              );\r\n            });\r\n          } else\r\n            handleCanotSendInvite(\r\n              `${players[0].username} ${\r\n                lang === \"English\" ? \"isn't\" : \"không\"\r\n              } online`\r\n            );\r\n        } else\r\n          handleCanotSendInvite(\r\n            lang === \"English\" ? \"user not found\" : \"không tìm thấy\"\r\n          );\r\n      }\r\n    } catch (_) {\r\n      handleCanotSendInvite(\r\n        lang === \"English\"\r\n          ? \"Something went wrong there. Try again\"\r\n          : \"Đã xảy ra lỗi. Xin hãy thử lại\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const clearInput = () => {\r\n    setInput(\"\");\r\n    setPlayersList([]);\r\n  };\r\n\r\n  const handleGenerateInviteLink = () => {\r\n    socket.emit(\"setTimeAndSide\", time, side[1], () => {\r\n      socket.emit(\"generateInviteLink\", (inviteLink) => {\r\n        setInviteLink(inviteLink);\r\n      });\r\n    });\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    navigator.clipboard.writeText(inviteLink).then(() => {\r\n      setShowText(true);\r\n      setTimeout(() => {\r\n        setShowText(false);\r\n      }, 1000);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"validInvite\", () => {\r\n      setWaitForResponse(false);\r\n      setPendingPlayers((prevState) => {\r\n        prevState.push(invitedPlayer);\r\n        return [...prevState];\r\n      });\r\n    });\r\n\r\n    socket.on(\"inviteDeclined\", (receiverInfo) => {\r\n      const index = pendingPlayers.findIndex(\r\n        (player) => player.username === receiverInfo.playername\r\n      );\r\n      if (index !== -1) {\r\n        setPendingPlayers((prevState) => {\r\n          prevState[index].declineInvite = true;\r\n          return [...prevState];\r\n        });\r\n        setTimeout(() => {\r\n          setPendingPlayers((prevState) => {\r\n            prevState.splice(index, 1);\r\n            return [...prevState];\r\n          });\r\n        }, 1000);\r\n      }\r\n    });\r\n\r\n    socket.on(\"invalidInvite\", (message) => {\r\n      setWaitForResponse(false);\r\n      let messageInVi = `${invitedPlayer.username} đang trong trận`;\r\n      if (/disconnected/.test(message))\r\n        messageInVi = `${invitedPlayer.username} có thể đã bị ngắt kết nối`;\r\n      else messageInVi = `${invitedPlayer.username} đã nhận quá nhiều lời mời`;\r\n      handleCanotSendInvite(lang === \"English\" ? message : messageInVi);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"validInvite\");\r\n      socket.removeAllListeners(\"invalidInvite\");\r\n      socket.removeAllListeners(\"inviteDeclined\");\r\n      socket.removeAllListeners(\"playerInGame\");\r\n    };\r\n  }, [invitedPlayer, pendingPlayers]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      socket.emit(\"cancelInvite\", null, true);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"play-with-friend-container\">\r\n      <i className=\"fas fa-arrow-left fa-2x\" onClick={goBack}></i>\r\n      <ul className=\"players-pending players-list\">\r\n        {renderPendingPlayers(pendingPlayers, cancelInvite, lang)}\r\n      </ul>\r\n      <div className=\"btn-container\">\r\n        <form\r\n          className=\"username-input\"\r\n          onSubmit={handleSendInvite}\r\n          method=\"POST\"\r\n        >\r\n          <i className=\"fas fa-search\"></i>\r\n          <input\r\n            id=\"player-name-search\"\r\n            type=\"text\"\r\n            placeholder={lang === \"English\" ? \"Search...\" : \"Tìm kiếm...\"}\r\n            onInput={handleOnChange}\r\n            value={input}\r\n          />\r\n          <i\r\n            className=\"fas fa-times\"\r\n            onClick={clearInput}\r\n            style={{ display: input ? \"inline\" : \"none\" }}\r\n          ></i>\r\n          <Button className=\"invite\" type=\"submit\" ref={target}>\r\n            {waitForResponse ? (\r\n              <Spinner\r\n                animation=\"border\"\r\n                variant=\"info\"\r\n                style={{ width: \"1.5rem\", height: \"1.5rem\" }}\r\n              />\r\n            ) : lang === \"English\" ? (\r\n              \"Invite\"\r\n            ) : (\r\n              <>&nbsp;&nbsp;Mời&nbsp;&nbsp;</>\r\n            )}\r\n          </Button>\r\n          <Overlay target={target.current} show={show !== \"\"}>\r\n            {(props) => <Tooltip {...props}>{show}</Tooltip>}\r\n          </Overlay>\r\n          <ul className=\"players-list\">{playersList}</ul>\r\n        </form>\r\n        <Button className=\"invite-link\" onClick={handleGenerateInviteLink}>\r\n          {lang === \"English\" ? \"Invite Link\" : \"Link Mời\"}\r\n        </Button>\r\n        <div\r\n          className=\"link-container\"\r\n          style={{ display: inviteLink ? \"flex\" : \"none\" }}\r\n        >\r\n          <i className=\"fas fa-times\" onClick={() => setInviteLink(\"\")}></i>\r\n          <input\r\n            type=\"text\"\r\n            value={inviteLink}\r\n            className=\"link\"\r\n            readOnly={true}\r\n          />\r\n          <button\r\n            className=\"copy-link\"\r\n            onClick={handleCopyLink}\r\n            ref={copyButton}\r\n          >\r\n            {lang === \"English\" ? \"Copy\" : \"Sao Chép\"}\r\n          </button>\r\n          <Overlay placement=\"top\" show={showText} target={copyButton.current}>\r\n            {({ placement, arrowProps, show: _show, popper, ...props }) => (\r\n              <div {...props} className=\"copied\">\r\n                {lang === \"English\" ? \"Copied\" : \"Đã Sao Chép\"}\r\n              </div>\r\n            )}\r\n          </Overlay>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayWithFriend;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Col, Button } from \"react-bootstrap\";\r\nimport PlayButton from \"./PlayButton/PlayButton.jsx\";\r\nimport \"./GameController.scss\";\r\nimport { useDispatch, useSelector, useStore } from \"react-redux\";\r\nimport { SocketContext, SetMoveTimerContext } from \"../../../App/context.js\";\r\nimport PlayWithFriend from \"./PlayWithFriend/PlayWithFriend.jsx\";\r\n\r\nconst GameController = (props) => {\r\n  const dispatch = useDispatch();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const [playWithFriendText, setPlayWithFriendText] = useState(\r\n    \"Play With Friend\"\r\n  );\r\n  const [playWithFriend, setPlayWithFriend] = useState(false);\r\n  const socket = useContext(SocketContext);\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n  const findingMatch = useSelector((state) => state.gameState.findingMatch);\r\n  const time = useSelector((state) => state.gameState.time);\r\n  const side = useSelector((state) => state.boardState.side);\r\n\r\n  const handlePlayWithFriend = () => {\r\n    if (!socket.connected && !playWithFriend) {\r\n      setPlayWithFriendText(\r\n        lang === \"English\" ? \"Connection Was Closed\" : \"Kết nối đã đóng\"\r\n      );\r\n      setTimeout(() => {\r\n        setPlayWithFriendText(\r\n          lang === \"English\" ? \"Play With Friend\" : \"Chơi Với Bạn\"\r\n        );\r\n      }, 700);\r\n    } else setPlayWithFriend(!playWithFriend);\r\n  };\r\n\r\n  const handlePlay = () => {\r\n    if (!socket.connected) {\r\n      dispatch({\r\n        type: \"setFindingMatch\",\r\n        value: lang === \"English\" ? \"Connection Was Closed\" : \"Kết nối đã đóng\",\r\n      });\r\n      setTimeout(() => {\r\n        dispatch({\r\n          type: \"setFindingMatch\",\r\n          value: lang === \"English\" ? \"Play\" : \"Chơi\",\r\n        });\r\n      }, 700);\r\n    } else if (findingMatch !== true) {\r\n      socket.emit(\"setTimeAndSide\", +time, side[1], () => {\r\n        socket.emit(\"findMatch\");\r\n        dispatch({ type: \"setFindingMatch\", value: true });\r\n      });\r\n    } else if (findingMatch === true) socket.emit(\"cancelFindMatch\");\r\n  };\r\n\r\n  const handleSelectTime = (event) => {\r\n    const selectedTime = +event.currentTarget.getAttribute(\"value\");\r\n    dispatch({ type: \"setTime\", value: selectedTime });\r\n    props.handleToggle();\r\n  };\r\n\r\n  const handleSwitchSide = (event) => {\r\n    const selectedSide = event.currentTarget.getAttribute(\"value\");\r\n    if (selectedSide === \"black\") {\r\n      dispatch({ type: \"switchSide\", value: [\"red\", \"black\"] });\r\n      socket.emit(\"setTimeAndSide\", +time, \"black\");\r\n    } else {\r\n      dispatch({ type: \"switchSide\", value: [\"black\", \"red\"] });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"foundMatch\", (opponent, firstMove, time) => {\r\n      dispatch({ type: \"setFoundMatch\", value: true });\r\n      dispatch({\r\n        type: \"setOpponentInfo\",\r\n        value: {\r\n          playername: opponent.playername,\r\n          photo: opponent.photo,\r\n        },\r\n      });\r\n\r\n      dispatch({ type: \"setTime\", value: time });\r\n      dispatch({ type: \"setTurnToMove\", value: firstMove });\r\n      setMoveTimer(firstMove, false, dispatch);\r\n    });\r\n\r\n    socket.on(\"findMatchCanceled\", () => {\r\n      dispatch({\r\n        type: \"setFindingMatch\",\r\n        value: lang === \"English\" ? \"Play\" : \"Chơi\",\r\n      });\r\n    });\r\n\r\n    socket.emit(\"eventHandlersRegistered\");\r\n\r\n    return () => {\r\n      socket.emit(\"cancelFindMatch\");\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setPlayWithFriendText(\r\n      lang === \"English\" ? \"Play With Friend\" : \"Chơi Với Bạn\"\r\n    );\r\n    dispatch({\r\n      type: \"setFindingMatch\",\r\n      value: lang === \"English\" ? \"Play\" : \"Chơi\",\r\n    });\r\n  }, [lang]);\r\n\r\n  return (\r\n    <Col md={{ span: 4 }} xs={{ span: 10 }} className=\"game-controller mb-3\">\r\n      {!playWithFriend ? (\r\n        <div className=\"button-container\">\r\n          <div className=\"select-side-container\">\r\n            <Button\r\n              className=\"red-side\"\r\n              value=\"red\"\r\n              onClick={handleSwitchSide}\r\n              disabled={findingMatch === true || findingMatch === \"Waiting...\"}\r\n            >\r\n              {lang === \"English\" ? \"Red\" : \"Đỏ\"}\r\n            </Button>\r\n            <Button\r\n              className=\"black-side\"\r\n              value=\"black\"\r\n              onClick={handleSwitchSide}\r\n              disabled={findingMatch === true || findingMatch === \"Waiting...\"}\r\n            >\r\n              {lang === \"English\" ? \"Black\" : \"Đen\"}\r\n            </Button>\r\n          </div>\r\n          <div className=\"time-select-container\">\r\n            <Button\r\n              className=\"select-timer\"\r\n              onClick={props.handleToggle}\r\n              disabled={findingMatch === true || findingMatch === \"Waiting...\"}\r\n            >\r\n              <i className=\"fas fa-clock\"></i> {time + \":00\"}{\" \"}\r\n              <i className=\"fas fa-angle-down\"></i>\r\n            </Button>\r\n            <div\r\n              className=\"time-select-table\"\r\n              style={{ display: props.timeSelectorDisplay }}\r\n            >\r\n              <Button onClick={handleSelectTime} value=\"1\">\r\n                1 {lang === \"English\" ? \"min\" : \"phút\"}\r\n              </Button>\r\n              <Button onClick={handleSelectTime} value=\"3\">\r\n                3 {lang === \"English\" ? \"min\" : \"phút\"}\r\n              </Button>\r\n              <Button onClick={handleSelectTime} value=\"5\">\r\n                5 {lang === \"English\" ? \"min\" : \"phút\"}\r\n              </Button>\r\n              <Button onClick={handleSelectTime} value=\"10\">\r\n                10 {lang === \"English\" ? \"min\" : \"phút\"}\r\n              </Button>\r\n              <Button onClick={handleSelectTime} value=\"15\">\r\n                15 {lang === \"English\" ? \"min\" : \"phút\"}\r\n              </Button>\r\n              <Button onClick={handleSelectTime} value=\"30\">\r\n                30 {lang === \"English\" ? \"min\" : \"phút\"}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n          <PlayButton\r\n            findingMatch={findingMatch}\r\n            handlePlay={handlePlay}\r\n            lang={lang}\r\n          />\r\n\r\n          <Button\r\n            className=\"play-with-friend\"\r\n            disabled={findingMatch === true || findingMatch === \"Waiting...\"}\r\n            onClick={handlePlayWithFriend}\r\n          >\r\n            {playWithFriendText}\r\n          </Button>\r\n          <Button className=\"center-board\" onClick={props.handleCenterBoard}>\r\n            {lang === \"English\"\r\n              ? `Center Board: ${props.centerBoard ? \"On\" : \"Off\"}`\r\n              : `Canh Giữa Bàn Cờ:  ${props.centerBoard ? \"Bật\" : \"Tắt\"}`}\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <PlayWithFriend goBack={handlePlayWithFriend} lang={lang} />\r\n      )}\r\n    </Col>\r\n  );\r\n};\r\n\r\nexport default GameController;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport \"./Timer.scss\";\r\nimport { useDispatch, useSelector, useStore } from \"react-redux\";\r\nimport { SocketContext, SetMoveTimerContext } from \"../../../App/context.js\";\r\n\r\nconst Timer = (props) => {\r\n  const dispatch = useDispatch();\r\n  const store = useStore();\r\n  const minute = Math.floor(props.timeLeftToMove / 60);\r\n  const second = props.timeLeftToMove % 60;\r\n  const socket = useContext(SocketContext);\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n  const turnToMove = useSelector((state) => state.boardState.turnToMove);\r\n\r\n  useEffect(() => {\r\n    if (props.timeLeftToMove <= 0 && turnToMove) {\r\n      const opponent = store.getState().gameState.opponentInfo;\r\n      dispatch({ type: \"setGameResult\", value: \"Lose\" });\r\n      dispatch({\r\n        type: \"setMessage\",\r\n        value: {\r\n          type: \"game result message\",\r\n          winner: `${opponent.playername} Won - `,\r\n          reason: \"Game Abandoned\",\r\n          className: \"game-message\",\r\n        },\r\n      });\r\n      setMoveTimer(null, true, dispatch);\r\n      socket.emit(\"gameFinish\", [\"Won\", \"Game Abandoned\"]);\r\n    }\r\n  }, [turnToMove, props.timeLeftToMove]);\r\n\r\n  return (\r\n    <div\r\n      className={`clock ${\r\n        props.turnToMove && socket.connected ? \"turn-to-move\" : \"\"\r\n      }`}\r\n    >\r\n      <span>\r\n        {(minute < 10 ? \"0\" + minute : minute) +\r\n          \":\" +\r\n          (second < 10 ? \"0\" + second : second)}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timer;\r\n","import React from \"react\";\r\n\r\nconst appendPiece = ({ board, handleMouseDown }, pieces, choosenSide) => {\r\n  for (let i = 0; i < 10; i++) {\r\n    for (let j = 0; j < 9; j++) {\r\n      if (board[i][j] && board[i][j].side === choosenSide) {\r\n        const [row, col] = board[i][j].position;\r\n        pieces.push(\r\n          <image\r\n            id={`p${row}${col}`}\r\n            href={`images/Pieces/${board[i][j].name}.png`}\r\n            width={board[i][j].width - 3}\r\n            height={board[i][j].width - 3}\r\n            style={{ opacity: board[i][j].canBeCaptured ? \"0.6\" : \"1\" }}\r\n            transform={board[i][j].translate}\r\n            key={`piece${i}${j}`}\r\n            onMouseDown={handleMouseDown}\r\n          ></image>\r\n        );\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nfunction Piece(props) {\r\n  const pieces = [];\r\n  const side = props.side;\r\n  const turnToMove = props.turnToMove;\r\n  appendPiece(props, pieces, turnToMove ? side[0] : side[1]);\r\n  appendPiece(props, pieces, turnToMove ? side[1] : side[0]);\r\n\r\n  return <>{pieces}</>;\r\n}\r\n\r\nexport default Piece;\r\n","const getSVGLocation = (clientX, clientY, svg) => {\r\n  const point = svg.createSVGPoint();\r\n  point.x = clientX;\r\n  point.y = clientY;\r\n  const location = point.matrixTransform(svg.getScreenCTM().inverse());\r\n  return [location.x, location.y];\r\n};\r\n\r\nexport default getSVGLocation;\r\n","class Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    this.width = width;\r\n    this.position = [row, col];\r\n    this.name = name;\r\n    this.side = name.split(\"-\")[1];\r\n    this.choosenSide = choosenSide;\r\n    this.minCol = 0;\r\n    this.maxCol = 8;\r\n    this.minRow = 0;\r\n    this.maxRow = 9;\r\n    this.translate = `translate(${width * col}, ${width * row})`;\r\n  }\r\n\r\n  move(x, y) {\r\n    const translate = `translate(${x - this.width / 2}, ${y - this.width / 2})`;\r\n    this.translate = translate;\r\n  }\r\n\r\n  checkValidMove(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [moveRow, moveCol] = [newRow - curRow, newCol - curCol];\r\n    const valid =\r\n      newCol >= this.minCol &&\r\n      newCol <= this.maxCol &&\r\n      newRow >= this.minRow &&\r\n      newRow <= this.maxRow;\r\n    const existMove = this.moves.some((move) => {\r\n      return move[0] === moveRow && move[1] === moveCol;\r\n    });\r\n    if (valid && existMove) {\r\n      if (!this.moveHint) {\r\n        const generalTranslate = this.putGeneralInDanger(newRow, newCol, board);\r\n        if (generalTranslate) return generalTranslate;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setPosition(capture, newRow, newCol) {\r\n    const [translateX, translateY] = [newCol * this.width, newRow * this.width];\r\n    const translate = `translate(${translateX}, ${translateY})`;\r\n    this.position = [newRow, newCol];\r\n    this.translate = translate;\r\n    return [capture === \"capture\", newRow, newCol];\r\n  }\r\n\r\n  canMoveToNewPosition(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    if (this.side === this.choosenSide[1]) {\r\n      const isValid = this.checkValidMove(newRow, newCol, board);\r\n      if (isValid && !/translate/.test(isValid)) {\r\n        if (!board[newRow][newCol].side) {\r\n          if (this.countPiecesBetween(newRow, newCol, board) === 0) return true;\r\n        } else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n          if (this.countPiecesBetween(newRow, newCol, board) === 1)\r\n            return \"capture\";\r\n      } else if (isValid) return isValid;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  showMoveHints(mode, board) {\r\n    if (mode === \"off\") {\r\n      for (let i = 0; i < 10; i++) {\r\n        for (let j = 0; j < 9; j++) {\r\n          if (board[i][j] === false) board[i][j] = 0;\r\n          else if (board[i][j]) board[i][j].canBeCaptured = false;\r\n        }\r\n      }\r\n      return;\r\n    }\r\n    const [curRow, curCol] = this.position;\r\n    for (let move of this.moves) {\r\n      const [newRow, newCol] = [curRow + move[0], curCol + move[1]];\r\n      this.moveHint = true;\r\n      const moveResult = this.canMoveToNewPosition(newRow, newCol, board);\r\n      this.moveHint = false;\r\n      if (moveResult) {\r\n        if (moveResult === \"capture\") {\r\n          board[newRow][newCol].canBeCaptured = true;\r\n        } else board[newRow][newCol] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  countPiecesBetween(newRow, newCol, board) {\r\n    let [curRow, curCol] = this.position;\r\n    let count = 0;\r\n    if (newRow === curRow) {\r\n      do {\r\n        curCol += curCol > newCol ? -1 : 1;\r\n        if (board[curRow][curCol]) count++;\r\n      } while (curCol !== newCol);\r\n    } else {\r\n      do {\r\n        curRow += curRow > newRow ? -1 : 1;\r\n        if (board[curRow][curCol]) count++;\r\n      } while (curRow !== newRow);\r\n    }\r\n    return count;\r\n  }\r\n\r\n  static isGeneralInDanger(board, side) {\r\n    for (let i = 0; i < 10; i++) {\r\n      for (let j = 0; j < 9; j++) {\r\n        if (board[i][j] && board[i][j].side !== side) {\r\n          const canCapture = board[i][j].canCaptureGeneral(board);\r\n          if (/translate/.test(canCapture)) return canCapture;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  putGeneralInDanger(newRow, newCol, board) {\r\n    const tmpBoard = board.reduce((acc, row) => {\r\n      acc.push([...row]);\r\n      return acc;\r\n    }, []);\r\n    this.updateTmpBoard(newRow, newCol, tmpBoard);\r\n    return Piece.isGeneralInDanger(tmpBoard, this.side);\r\n  }\r\n\r\n  static isLost(board, side) {\r\n    for (let i = 0; i < 10; i++) {\r\n      for (let j = 0; j < 9; j++) {\r\n        if (board[i][j] && board[i][j].side === side) {\r\n          const [curRow, curCol] = board[i][j].position;\r\n          for (let move of board[i][j].moves) {\r\n            const [newRow, newCol] = [curRow + move[0], curCol + move[1]];\r\n            const tmp = board[i][j].canMoveToNewPosition(newRow, newCol, board);\r\n            if (tmp && !/translate/.test(tmp)) return null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (Piece.isGeneralInDanger(board, side)) {\r\n      return \"Checkmate\";\r\n    }\r\n    return \"Stalemate\";\r\n  }\r\n\r\n  updateTmpBoard(newRow, newCol, tmpBoard) {\r\n    const [curRow, curCol] = this.position;\r\n    tmpBoard[newRow][newCol] = tmpBoard[curRow][curCol];\r\n    tmpBoard[curRow][curCol] = 0;\r\n  }\r\n\r\n  canCaptureGeneral(tmpBoard) {\r\n    const [curRow, curCol] = this.position;\r\n    for (let move of this.moves) {\r\n      const [newRow, newCol] = [curRow + move[0], curCol + move[1]];\r\n      if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\r\n        if (tmpBoard[newRow][newCol].side)\r\n          if (tmpBoard[newRow][newCol].side !== tmpBoard[curRow][curCol].side)\r\n            if (this.countPiecesBetween(newRow, newCol, tmpBoard) === 1)\r\n              if (tmpBoard[newRow][newCol].name.split(\"-\")[0] === \"general\") {\r\n                return tmpBoard[newRow][newCol].translate;\r\n              }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  modifyBoard(board, [newRow, newCol], dispatch) {\r\n    const [curRow, curCol] = this.position;\r\n    this.setPosition(null, newRow, newCol);\r\n    if (board[newRow][newCol]) {\r\n      dispatch({ type: \"setCapturedPieces\", value: board[newRow][newCol] });\r\n    }\r\n    board[newRow][newCol] = board[curRow][curCol];\r\n    board[curRow][curCol] = 0;\r\n    dispatch({ type: \"setBoard\", value: [...board] });\r\n  }\r\n\r\n  animateMove([newRow, newCol], board, dispatch) {\r\n    const [curRow, curCol] = this.position;\r\n    this.DOMNode = document.querySelector(`#p${curRow}${curCol}`);\r\n    if (curCol === newCol) {\r\n      this.moveVertical([newRow, newCol], board, dispatch);\r\n    } else this.moveDiagonal([newRow, newCol], board, dispatch);\r\n  }\r\n\r\n  setTransform([xB, yB], board, dispatch, finished) {\r\n    const translate = `translate(${xB * this.width}, ${yB * this.width})`;\r\n    this.DOMNode.setAttribute(\"transform\", translate);\r\n    if (finished) {\r\n      this.modifyBoard(board, [yB, xB], dispatch);\r\n    }\r\n  }\r\n\r\n  moveVertical([yB, xB], board, dispatch) {\r\n    const [yA, xA] = this.position;\r\n    let step = 0;\r\n    let start;\r\n\r\n    const animate = (timestamp) => {\r\n      if (start === undefined) start = timestamp;\r\n      const timeElapsed = timestamp - start;\r\n      step = ((yB - yA) / 270) * timeElapsed;\r\n      if (Math.abs(step) < Math.abs(yB - yA)) {\r\n        this.setTransform([xA, yA + step], board, dispatch);\r\n        window.requestAnimationFrame(animate);\r\n      } else if (Math.abs(step) >= Math.abs(yB - yA)) {\r\n        this.setTransform([xB, yB], board, dispatch, true);\r\n      }\r\n    };\r\n\r\n    window.requestAnimationFrame(animate);\r\n  }\r\n\r\n  moveDiagonal([yB, xB], board, dispatch) {\r\n    const [yA, xA] = this.position;\r\n    let step = 0;\r\n    let start;\r\n\r\n    const animate = (timestamp) => {\r\n      if (start === undefined) start = timestamp;\r\n      const timeElapsed = timestamp - start;\r\n      step = ((xB - xA) / 270) * timeElapsed;\r\n      if (Math.abs(step) < Math.abs(xB - xA)) {\r\n        let y = (step / (xB - xA)) * (yB - yA) + yA;\r\n        this.setTransform([xA + step, y], board, dispatch);\r\n        window.requestAnimationFrame(animate);\r\n      } else if (Math.abs(step) >= Math.abs(xB - xA)) {\r\n        this.setTransform([xB, yB], board, dispatch, true);\r\n      }\r\n    };\r\n\r\n    window.requestAnimationFrame(animate);\r\n  }\r\n}\r\n\r\nexport default Piece;\r\n","import React from \"react\";\r\n\r\nconst MoveHint = ({ board, boardWidth }) => {\r\n  const moveHints = [];\r\n  const canCaptureHints = [];\r\n  const radius = boardWidth / 18;\r\n  for (let i = 0; i < 10; i++) {\r\n    for (let j = 0; j < 9; j++) {\r\n      if (board[i][j] === false) {\r\n        moveHints.push(\r\n          <circle\r\n            cx={radius + j * (boardWidth / 9)}\r\n            cy={radius + i * (boardWidth / 9)}\r\n            key={`move-hint-${moveHints.length}`}\r\n            r={radius / 2}\r\n          ></circle>\r\n        );\r\n      } else if (board[i][j] && board[i][j].canBeCaptured) {\r\n        canCaptureHints.push(\r\n          <image\r\n            href=\"images/Legal_Capture_Icon/legal_capture.png\"\r\n            key={`capture-hint-${canCaptureHints.length}`}\r\n            transform={board[i][j].translate}\r\n            width={board[i][j].width - 3}\r\n            height={board[i][j].width - 3}\r\n          ></image>\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {moveHints}\r\n      {canCaptureHints}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MoveHint;\r\n","import React, { useEffect, useRef, useContext, useState } from 'react';\r\nimport Piece from './Piece/Piece.jsx';\r\nimport './Board.scss';\r\nimport { useSelector, useDispatch, useStore } from 'react-redux';\r\nimport getSVGLocation from './getSVGLocation.js';\r\nimport { SocketContext, SetMoveTimerContext } from '../../../App/context.js';\r\nimport PieceClass from '../../../../pieces/piece.js';\r\nimport MoveHint from './MoveHint/MoveHint.jsx';\r\n\r\nfunction Board() {\r\n  const dispatch = useDispatch();\r\n  const store = useStore();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const board = useSelector((state) => state.boardState.board);\r\n  const targetDisplay = useSelector((state) => state.boardState.targetDisplay);\r\n  const boardSize = useSelector((state) => state.boardState.boardSize);\r\n  const currentPiece = useSelector((state) => state.boardState.currentPiece);\r\n  const getClicked = useSelector((state) => state.boardState.getClicked);\r\n  const draggable = useSelector((state) => state.boardState.draggable);\r\n  const [warningDisplay, setWarningDisplay] = useState('none');\r\n  const [warningTranslate, setWarningTranslate] = useState('translate(0, 0)');\r\n  const side = useSelector((state) => state.boardState.side);\r\n  const svgRef = useRef();\r\n  const targetTranslate = useSelector((state) => state.boardState.targetTranslate);\r\n  const turnToMove = useSelector((state) => state.boardState.turnToMove);\r\n  const socket = useContext(SocketContext);\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n\r\n  const opponentInfo = useSelector((state) => state.gameState.opponentInfo);\r\n\r\n  const handleMouseDown = (event) => {\r\n    const gameResult = store.getState().gameState.gameResult;\r\n    if (gameResult !== null) return;\r\n    const elementId = event.currentTarget.id;\r\n    const [row, col] = [+elementId[1], +elementId[2]];\r\n    const translate = board[row][col].translate;\r\n    if (!currentPiece || board[row][col].side === currentPiece.side) {\r\n      if (currentPiece) {\r\n        const [curRow, curCol] = currentPiece.position;\r\n        if (row !== curRow || curCol !== col) {\r\n          currentPiece.showMoveHints('off', board);\r\n          dispatch({ type: 'setGetClicked', value: false });\r\n        }\r\n      }\r\n      board[row][col].showMoveHints('on', board);\r\n      dispatch({ type: 'setBoard', value: [...board] });\r\n      dispatch({ type: 'setTargetDisplay', value: 'inline' });\r\n      dispatch({ type: 'setDraggable', value: true });\r\n      dispatch({ type: 'setTargetTranslate', value: translate });\r\n      dispatch({ type: 'setCurrentPiece', value: board[row][col] });\r\n    }\r\n  };\r\n\r\n  const updateBoard = (moveResult, [curRow, curCol]) => {\r\n    if (moveResult && !/translate/.test(moveResult)) {\r\n      const [capture, newRow, newCol] = moveResult;\r\n      if (capture) {\r\n        dispatch({ type: 'setCapturedPieces', value: board[newRow][newCol] });\r\n      }\r\n      board[curRow][curCol] = 0;\r\n      board[newRow][newCol] = currentPiece;\r\n    } else if (moveResult) {\r\n      setTimeout(() => {\r\n        setWarningDisplay('none');\r\n      }, 400);\r\n      setWarningDisplay('inline');\r\n      setWarningTranslate(moveResult);\r\n    }\r\n  };\r\n\r\n  const handleOpponentMove = ([curRow, curCol], [newRow, newCol]) => {\r\n    if (board[curRow][curCol] && board[curRow][curCol].side === side[0]) {\r\n      dispatch({ type: 'setOpponentTimeLeftToMove', value: 'restart' });\r\n      board[curRow][curCol].animateMove([newRow, newCol], board, dispatch);\r\n      socket.emit('finishMove');\r\n      dispatch({ type: 'setTurnToMove', value: true });\r\n    }\r\n  };\r\n\r\n  const updateCurrentPiece = (moveResult) => {\r\n    if ((moveResult && !/translate/.test(moveResult)) || getClicked) {\r\n      currentPiece.showMoveHints('off', board);\r\n      dispatch({ type: 'setTargetDisplay', value: 'none' });\r\n      dispatch({ type: 'setCurrentPiece', value: null });\r\n      dispatch({ type: 'setGetClicked', value: false });\r\n    } else {\r\n      dispatch({ type: 'setGetClicked', value: true });\r\n    }\r\n  };\r\n\r\n  const movePiece = (event) => {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    let moveResult = null;\r\n    const svg = svgRef.current;\r\n    const [x, y] = getSVGLocation(+event.clientX, +event.clientY, svg);\r\n    const newCol = Math.floor(x / currentPiece.width);\r\n    const newRow = Math.floor(y / currentPiece.width);\r\n    const [curRow, curCol] = currentPiece.position;\r\n    const canMove = currentPiece.canMoveToNewPosition(newRow, newCol, board);\r\n    if (turnToMove && canMove && !/translate/.test(canMove))\r\n      moveResult = currentPiece.setPosition(canMove, newRow, newCol);\r\n    else if (/translate/.test(canMove)) moveResult = canMove;\r\n    updateBoard(moveResult, [curRow, curCol]);\r\n    dispatch({ type: 'setDraggable', value: false });\r\n    updateCurrentPiece(moveResult);\r\n    dispatch({ type: 'setBoard', value: [...board] });\r\n    if (moveResult && !/translate/.test(moveResult)) {\r\n      dispatch({ type: 'setPlayerTimeLeftToMove', value: 'restart' });\r\n      dispatch({ type: 'setTurnToMove', value: !turnToMove });\r\n      socket.emit('opponentMove', moveResult, [curRow, curCol]);\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = (event) => {\r\n    event.preventDefault();\r\n    const gameResult = store.getState().gameState.gameResult;\r\n    if (currentPiece && gameResult === null) {\r\n      movePiece(event);\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (event) => {\r\n    const svg = svgRef.current;\r\n    const [x, y] = getSVGLocation(+event.clientX, +event.clientY, svg);\r\n    if (x >= 0 && x < boardSize[0] && y >= 0 && y < boardSize[1] && draggable) {\r\n      currentPiece.move(x, y);\r\n      dispatch({ type: 'setBoard', value: [...board] });\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    if (currentPiece) {\r\n      const gameResult = store.getState().gameState.gameResult;\r\n      if (!event.target.id && gameResult === null) movePiece(event);\r\n    }\r\n  };\r\n\r\n  const constructNewPiecesWidth = (width) => {\r\n    const newBoard = board.map((row) => {\r\n      const newRow = row.map((piece) => {\r\n        if (piece) {\r\n          const [row, col] = piece.position;\r\n          piece.width = width;\r\n          piece.translate = `translate(${width * col}, ${width * row})`;\r\n          return piece;\r\n        }\r\n        return 0;\r\n      });\r\n      return newRow;\r\n    });\r\n    return newBoard;\r\n  };\r\n\r\n  const handleResize = () => {\r\n    const width = document.querySelector('.board-container').offsetWidth;\r\n    dispatch({\r\n      type: 'setBoardSize',\r\n      value: [width, width / (521 / 577)],\r\n    });\r\n    dispatch({\r\n      type: 'setBoard',\r\n      value: constructNewPiecesWidth(width / 9),\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const width = document.querySelector('.board-container').offsetWidth;\r\n    dispatch({ type: 'setBoardSize', value: [width, width / (521 / 577)] });\r\n    dispatch({ type: 'setBoard', value: constructNewPiecesWidth(width / 9) });\r\n    window.ondragstart = () => false;\r\n\r\n    socket.on('setTimer', () => {\r\n      const turnToMove = store.getState().boardState.turnToMove;\r\n      const gameResult = store.getState().gameState.gameResult;\r\n      if (gameResult == null) setMoveTimer(turnToMove, false, dispatch);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners('setTimer');\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.onmousemove = handleMouseMove;\r\n    window.onmouseup = handleMouseUp;\r\n    window.onresize = handleResize;\r\n    socket.on('move', ([curRow, curCol], [newRow, newCol]) => {\r\n      const gameResult = store.getState().gameState.gameResult;\r\n      if (gameResult === null) handleOpponentMove([curRow, curCol], [newRow, newCol]);\r\n    });\r\n\r\n    return () => {\r\n      window.onmouseup = null;\r\n      window.onmousemove = null;\r\n      window.onresize = null;\r\n      socket.removeAllListeners('move');\r\n    };\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (turnToMove && !draggable) {\r\n      const lostReason = PieceClass.isLost(board, side[1]);\r\n      if (lostReason) {\r\n        let message = lostReason;\r\n        if (lang !== 'English')\r\n          message = lostReason === 'Checkmate' ? 'Chiếu Bí' : 'Hết Cờ';\r\n        dispatch({ type: 'setGameResult', value: 'Lose' });\r\n        dispatch({\r\n          type: 'setMessage',\r\n          value: {\r\n            type: 'game result message',\r\n            winner: `${opponentInfo.playername} ${\r\n              lang === 'English' ? 'Won' : 'Thắng'\r\n            } - `,\r\n            reason: message,\r\n            className: 'game-message',\r\n          },\r\n        });\r\n        setMoveTimer(null, true, dispatch);\r\n        socket.emit('gameFinish', ['Won', lostReason]);\r\n        return;\r\n      }\r\n    }\r\n  }, [turnToMove, board, draggable]);\r\n\r\n  return (\r\n    <svg\r\n      width={boardSize[0]}\r\n      height={boardSize[1]}\r\n      onClick={handleClick}\r\n      style={{\r\n        backgroundImage: 'url(\"images/Board/board.jpg\")',\r\n      }}\r\n      ref={svgRef}\r\n    >\r\n      <image\r\n        href='images/Target_Icon/target.gif'\r\n        width={boardSize[0] / 9 - 3}\r\n        height={boardSize[0] / 9 - 3}\r\n        style={{ display: targetDisplay }}\r\n        transform={targetTranslate}\r\n      ></image>\r\n      <MoveHint board={board} boardWidth={boardSize[0]} />\r\n      <Piece\r\n        board={board}\r\n        handleMouseDown={handleMouseDown}\r\n        side={side}\r\n        turnToMove={turnToMove}\r\n      />\r\n\r\n      <image\r\n        href='images/Legal_Capture_Icon/legal_capture.png'\r\n        transform={warningTranslate}\r\n        style={{ display: warningDisplay, opacity: '0.6' }}\r\n        width={boardSize[0] / 9 - 3}\r\n        height={boardSize[0] / 9 - 3}\r\n      ></image>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(Board);\r\n","import React from \"react\";\r\nimport \"./GameResult.scss\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nconst GameResult = () => {\r\n  const dispatch = useDispatch();\r\n  const gameResult = useSelector((state) => state.gameState.gameResult);\r\n  const [boardWidth, boardHeight] = useSelector(\r\n    (state) => state.boardState.boardSize\r\n  );\r\n  const gameResultDisplay = useSelector(\r\n    (state) => state.gameState.gameResultDisplay\r\n  );\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const side = useSelector((state) => state.boardState.side);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const opponentInfo = useSelector((state) => state.gameState.opponentInfo);\r\n  const side1 = side[1].charAt(0).toUpperCase() + side[1].slice(1);\r\n  const side0 = side[0].charAt(0).toUpperCase() + side[0].slice(1);\r\n  let displayGameResult = lang == \"English\" ? \"Draw\" : \"Hòa\";\r\n\r\n  if (gameResult === \"Won\") {\r\n    displayGameResult = `${\r\n      lang === \"English\" ? side1 : side1 === \"Red\" ? \"Đỏ\" : \"Đen\"\r\n    } ${lang === \"English\" ? \"Won\" : \"Thắng\"}`;\r\n  } else if (gameResult === \"Lose\")\r\n    displayGameResult = `${\r\n      lang === \"English\" ? side0 : side0 === \"Red\" ? \"Đỏ\" : \"Đen\"\r\n    } ${lang === \"English\" ? \"Won\" : \"Thắng\"}`;\r\n\r\n  const handleHideGameResult = () => {\r\n    dispatch({ type: \"setGameResultDisplay\", value: \"none\" });\r\n  };\r\n\r\n  if (!gameResult) return null;\r\n  return (\r\n    <div\r\n      className=\"game-result\"\r\n      style={{\r\n        width: \"80%\",\r\n        height: `${boardHeight - 40}px`,\r\n        left: `${boardWidth * (10 / 100)}px`,\r\n        display: `${gameResultDisplay}`,\r\n      }}\r\n    >\r\n      <i\r\n        className=\"fas fa-times hide-game-result\"\r\n        onClick={handleHideGameResult}\r\n      ></i>\r\n      <div className=\"won-side\">\r\n        <p>{displayGameResult}</p>\r\n      </div>\r\n      <div className=\"players\">\r\n        <div className=\"player-info\">\r\n          <div\r\n            className={`img-container ${\r\n              gameResult === \"Won\" || gameResult === \"Draw\" ? \"\" : \"winner\"\r\n            }`}\r\n          >\r\n            <img src={opponentInfo.photo} alt=\"\" />\r\n          </div>\r\n\r\n          <p>{opponentInfo.playername}</p>\r\n        </div>\r\n        <span>VS</span>\r\n        <div className=\"player-info\">\r\n          <div\r\n            className={`img-container ${gameResult === \"Won\" ? \"winner\" : \"\"}`}\r\n          >\r\n            <img src={playerInfo.photo} alt=\"\" />\r\n          </div>\r\n\r\n          <p>{playerInfo.username}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameResult;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport './Pause.scss';\r\nimport { useSelector, useDispatch, useStore } from 'react-redux';\r\nimport { SocketContext, SetMoveTimerContext } from '../../../../App/context.js';\r\n\r\nconst Timer = ({ lang, pause }) => {\r\n  const dispatch = useDispatch();\r\n  const socket = useContext(SocketContext);\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n  const time = useSelector((state) => state.gameState.pauseTime);\r\n  const minute = Math.floor(time / 60);\r\n  const second = time % 60;\r\n  const store = useStore();\r\n  useEffect(() => {\r\n    if (time === 0) {\r\n      if (/Paused/.test(pause)) {\r\n        dispatch({ type: 'setPauseTime', value: 'timeout' });\r\n        dispatch({ type: 'setPause', value: 'Timeout' });\r\n        socket.emit('startTimer', true);\r\n      } else {\r\n        socket.emit('startTimer', false);\r\n        socket.emit('startGame');\r\n      }\r\n    }\r\n\r\n    socket.on('receiveGameStartSignal', () => {\r\n      socket.emit('receiveGameStartSignalAck');\r\n    });\r\n\r\n    socket.on('gameStarted', () => {\r\n      const turnToMove = store.getState().boardState.turnToMove;\r\n      dispatch({ type: 'setPauseTime', value: 'restart' });\r\n      dispatch({ type: 'setPause', value: null });\r\n      socket.emit('startTimer', false);\r\n      dispatch({ type: 'setPause', value: null });\r\n      dispatch({ type: 'setPauseTime', value: 'restart' });\r\n      setMoveTimer(turnToMove, false, dispatch, true);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners('receiveGameStartSignal');\r\n      socket.removeAllListeners('gameStarted');\r\n    };\r\n  }, [time]);\r\n\r\n  return (\r\n    <p className='pause-timer'>\r\n      {/Paused/.test(pause)\r\n        ? lang === 'English'\r\n          ? 'Resume In'\r\n          : 'Tiếp Tục Trong'\r\n        : lang === 'English'\r\n        ? 'Game Will Start In'\r\n        : 'Bắt Đầu Trận Trong'}\r\n      :{' '}\r\n      <span>\r\n        {(minute < 10 ? '0' + minute : minute) +\r\n          ':' +\r\n          (second < 10 ? '0' + second : second)}\r\n      </span>\r\n    </p>\r\n  );\r\n};\r\n\r\nconst Pause = () => {\r\n  const dispatch = useDispatch();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const pause = useSelector((state) => state.gameState.pause);\r\n  const [boardWidth, boardHeight] = useSelector((state) => state.boardState.boardSize);\r\n  const store = useStore();\r\n  const socket = useContext(SocketContext);\r\n  let pauseAnnounce = pause;\r\n\r\n  useEffect(() => {\r\n    const handleOpponentPauseOrResumeGame = (pause) => {\r\n      const opponentInfo = store.getState().gameState.opponentInfo;\r\n      const action = pause ? 'Paused' : 'Resumed';\r\n      const actionInVi = pause ? 'Dừng' : 'Tiếp Tục';\r\n      const message = {\r\n        from: `${opponentInfo.playername}`,\r\n        message: lang === 'English' ? `${action} Game` : `${actionInVi} Trận`,\r\n        className: 'game-message',\r\n      };\r\n      dispatch({ type: 'setMessage', value: message });\r\n      dispatch({\r\n        type: 'setPause',\r\n        value: `${opponentInfo.playername} ${pause ? 'Paused' : 'Resumed'} Game`,\r\n      });\r\n      socket.emit(`receive${pause ? 'Pause' : 'Resume'}SignalAck`);\r\n    };\r\n\r\n    socket.on('startPauseTimer', (isResume) => {\r\n      socket.emit('startTimer', false);\r\n      if (isResume) dispatch({ type: 'setPauseTime', value: 'timeout' });\r\n      socket.removeAllListeners('oneSecondPass');\r\n      socket.on('oneSecondPass', () => {\r\n        dispatch({ type: 'setPauseTime', value: null });\r\n      });\r\n      socket.emit('startTimer', true);\r\n    });\r\n\r\n    socket.on('opponentPauseGame', () => {\r\n      handleOpponentPauseOrResumeGame(true);\r\n    });\r\n\r\n    socket.on('opponentResumeGame', () => {\r\n      socket.removeAllListeners('oneSecondPass');\r\n      dispatch({ type: 'setPauseTime', value: 'timeout' });\r\n      handleOpponentPauseOrResumeGame(false);\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners('opponentPauseGame');\r\n      socket.removeAllListeners('opponentResumeGame');\r\n      socket.removeAllListeners('startPauseTimer');\r\n    };\r\n  }, [pause]);\r\n\r\n  if (!pause) return null;\r\n\r\n  if (lang !== 'English') {\r\n    const name = pause.split(' ')[0];\r\n    if (/Paused/.test(pause)) pauseAnnounce = name + ' Dừng Trận';\r\n    else if (/Resumed/.test(pause)) pauseAnnounce = name + ' Tiếp Tục Trận';\r\n    else pauseAnnounce = 'Hết Thời Gian Dừng';\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className='pause'\r\n      style={{\r\n        width: `${boardWidth}px`,\r\n        height: `${boardHeight}px`,\r\n      }}\r\n    >\r\n      <div>\r\n        <p className='pause-announce'>{pauseAnnounce}</p>\r\n        <Timer pause={pause} lang={lang} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(Pause);\r\n","import React from 'react';\r\nimport { Col, OverlayTrigger, Tooltip } from 'react-bootstrap';\r\nimport Timer from '../Timer/Timer.jsx';\r\nimport Board from '../Board/Board';\r\nimport './GamePlayArea.scss';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport GameResult from './GameResult/GameResult.jsx';\r\nimport Pause from './Pause/Pause.jsx';\r\n\r\nconst GamePlayArea = ({ lang }) => {\r\n  const opponentTimeLeftToMove = useSelector(\r\n    (state) => state.gameState.opponentTimeLeftToMove,\r\n  );\r\n  const playerTimeLeftToMove = useSelector(\r\n    (state) => state.gameState.playerTimeLeftToMove,\r\n  );\r\n  const turnToMove = useSelector((state) => state.boardState.turnToMove);\r\n  const gameResult = useSelector((state) => state.gameState.gameResult);\r\n  const foundMatch = useSelector((state) => state.gameState.foundMatch);\r\n  const capturedPieces = useSelector((state) => state.boardState.capturedPieces);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const opponentInfo = useSelector((state) => state.gameState.opponentInfo);\r\n\r\n  return (\r\n    <Col\r\n      md={{ span: 4 }}\r\n      sm={{ span: 11 }}\r\n      xs={{ span: 11 }}\r\n      className='board-container pb-3'\r\n    >\r\n      <div className='player-area'>\r\n        <div className='avatar-and-name'>\r\n          <img src={opponentInfo.photo} alt='' />\r\n          <OverlayTrigger\r\n            placement='bottom'\r\n            overlay={(props) => (\r\n              <Tooltip id='name-tooltip' {...props}>\r\n                {opponentInfo.playername}\r\n              </Tooltip>\r\n            )}\r\n          >\r\n            <p className='user-name'>\r\n              {foundMatch ? (\r\n                <Link to={`/home/${opponentInfo.playername}`} target='_blank'>\r\n                  {opponentInfo.playername}\r\n                </Link>\r\n              ) : lang === 'English' ? (\r\n                opponentInfo.playername\r\n              ) : (\r\n                'Đối Thủ'\r\n              )}\r\n            </p>\r\n          </OverlayTrigger>\r\n        </div>\r\n        <div className='captured-pieces'>\r\n          {capturedPieces.map((element, index) => {\r\n            if (element.side === element.choosenSide[1])\r\n              return (\r\n                <img\r\n                  src={`images/Pieces/${element.name}.png`}\r\n                  style={{ width: '27px' }}\r\n                  key={`c${index}`}\r\n                ></img>\r\n              );\r\n            return null;\r\n          })}\r\n        </div>\r\n        <Timer\r\n          timeLeftToMove={opponentTimeLeftToMove}\r\n          turnToMove={foundMatch && gameResult === null ? !turnToMove : turnToMove}\r\n        />\r\n      </div>\r\n      <Board />\r\n      <div className='player-area'>\r\n        <div className='avatar-and-name'>\r\n          <div className='avatar-and-name'>\r\n            <img src={playerInfo.photo} alt='' />\r\n\r\n            <OverlayTrigger\r\n              placement='top'\r\n              overlay={(props) => (\r\n                <Tooltip id='name-tooltip' {...props}>\r\n                  {playerInfo.username}\r\n                </Tooltip>\r\n              )}\r\n            >\r\n              <p className='user-name'>\r\n                {!playerInfo.guest ? (\r\n                  <Link to='/home' target='_blank'>\r\n                    {playerInfo.username}\r\n                  </Link>\r\n                ) : (\r\n                  playerInfo.username\r\n                )}\r\n              </p>\r\n            </OverlayTrigger>\r\n          </div>\r\n        </div>\r\n        <div className='captured-pieces'>\r\n          {capturedPieces.map((element, index) => {\r\n            if (element.side === element.choosenSide[0])\r\n              return (\r\n                <img\r\n                  src={`images/Pieces/${element.name}.png`}\r\n                  style={{ width: '27px' }}\r\n                  key={`c${index}`}\r\n                ></img>\r\n              );\r\n            return null;\r\n          })}\r\n        </div>\r\n        <Timer timeLeftToMove={playerTimeLeftToMove} turnToMove={turnToMove} />\r\n      </div>\r\n      <GameResult />\r\n      <Pause />\r\n    </Col>\r\n  );\r\n};\r\n\r\nexport default GamePlayArea;\r\n","const renderMessages = (messages, lang) => {\r\n  const displayMessages = messages.map((element, index) => {\r\n    if (element.type) {\r\n      return (\r\n        <li key={`m${index}`} id={`m${index}`} className={element.className}>\r\n          <p className=\"game-over\">\r\n            {lang === \"English\" ? \"Game Over\" : \"Trận Đấu Kết Thúc\"}\r\n          </p>\r\n          <p>{`${element.winner}${element.reason}`}</p>\r\n        </li>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <li key={`m${index}`} id={`m${index}`} className={element.className}>\r\n        <span>{element.from}</span> {element.message}\r\n      </li>\r\n    );\r\n  });\r\n  return displayMessages;\r\n};\r\n\r\nexport default renderMessages;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport \"./DrawOffer.scss\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport {\r\n  SocketContext,\r\n  SetMoveTimerContext,\r\n} from \"../../../../../App/context.js\";\r\n\r\nconst DrawOffer = (props) => {\r\n  const dispatch = useDispatch();\r\n  const socket = useContext(SocketContext);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const opponentInfo = useSelector((state) => state.gameState.opponentInfo);\r\n  const gameResult = useSelector((state) => state.gameState.gameResult);\r\n  const receiveDrawOffer = useSelector(\r\n    (state) => state.gameState.receiveDrawOffer\r\n  );\r\n\r\n  const handleDrawResult = () => {\r\n    dispatch({ type: \"setGameResult\", value: \"Draw\" });\r\n    dispatch({\r\n      type: \"setMessage\",\r\n      value: {\r\n        type: \"game result message\",\r\n        winner: \"\",\r\n        reason: lang === \"English\" ? \"Game Draw By Agreement\" : \"Chấp Nhận Hòa\",\r\n        className: \"game-message\",\r\n      },\r\n    });\r\n    setMoveTimer(null, true, dispatch);\r\n  };\r\n\r\n  const handleAcceptOffer = () => {\r\n    dispatch({ type: \"setReceiveDrawOffer\", value: false });\r\n    if (!gameResult) {\r\n      handleDrawResult();\r\n      socket.emit(\"gameFinish\", \"Draw\");\r\n    }\r\n  };\r\n\r\n  const handleDeclineOffer = () => {\r\n    const mess = lang === \"English\" ? \"Declined A Draw\" : \"Từ Chối Hòa\";\r\n    dispatch({ type: \"setReceiveDrawOffer\", value: false });\r\n    dispatch({\r\n      type: \"setMessage\",\r\n      value: {\r\n        from: `${playerInfo.username}`,\r\n        message: mess,\r\n        className: \"game-message\",\r\n      },\r\n    });\r\n    socket.emit(\"sendMessage\", {\r\n      from: `${playerInfo.username}`,\r\n      message: mess,\r\n      className: \"game-message\",\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"receiveDrawOffer\", () => {\r\n      dispatch({ type: \"setReceiveDrawOffer\", value: true });\r\n    });\r\n\r\n    socket.on(\"draw\", () => {\r\n      handleDrawResult();\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"draw\");\r\n      socket.removeAllListeners(\"receiveDrawOffer\");\r\n    };\r\n  });\r\n\r\n  if (!receiveDrawOffer) return null;\r\n  return (\r\n    <li className=\"draw-offer\" style={{ display: props.display }}>\r\n      <p>\r\n        <span>{opponentInfo.playername}</span>{\" \"}\r\n        {lang === \"English\" ? \"Offer A Draw\" : \"Đề Nghị Hòa\"}\r\n      </p>\r\n      <div className=\"answer\">\r\n        <Button className=\"accept-offer\" onClick={handleAcceptOffer}>\r\n          {lang === \"English\" ? \"Accept\" : \"Đồng Ý\"}{\" \"}\r\n          <i className=\"fas fa-check\"></i>\r\n        </Button>\r\n        <Button className=\"decline-offer\" onClick={handleDeclineOffer}>\r\n          {lang === \"English\" ? \"Decline\" : \"Từ Chối\"}{\" \"}\r\n          <i className=\"fas fa-times\"></i>\r\n        </Button>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default DrawOffer;\r\n","import React, { useState, useRef, useEffect, useContext } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport \"./ChatSection.scss\";\r\nimport renderMessages from \"./renderMessages.js\";\r\nimport DrawOffer from \"./DrawOffer/DrawOffer.jsx\";\r\nimport { SocketContext } from \"../../../../App/context.js\";\r\n\r\nconst ChatSection = () => {\r\n  const dispatch = useDispatch();\r\n  const socket = useContext(SocketContext);\r\n  const [input, setInput] = useState(\"\");\r\n  const messagesContainerRef = useRef();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const messages = useSelector((state) => state.gameState.messages);\r\n  const [hideChat, setHideChat] = useState(false);\r\n  const displayMessages = renderMessages(messages, lang);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const opponentInfo = useSelector((state) => state.gameState.opponentInfo);\r\n\r\n  const handleOnChange = (event) => {\r\n    setInput(event.currentTarget.value);\r\n  };\r\n\r\n  const handleHideChat = () => {\r\n    setHideChat(true);\r\n  };\r\n\r\n  const handleShowChat = () => {\r\n    setHideChat(false);\r\n  };\r\n\r\n  const handleSendMessage = (event) => {\r\n    event.preventDefault();\r\n    if (input) {\r\n      const message = {\r\n        from: `${playerInfo.username}: `,\r\n        message: input,\r\n        className: \"\",\r\n      };\r\n      dispatch({ type: \"setMessage\", value: message });\r\n      setInput(\"\");\r\n      socket.emit(\"sendMessage\", message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (messages.length > 0) {\r\n      const list = messagesContainerRef.current;\r\n      const lastListItem = document.querySelector(`#m${messages.length - 1}`);\r\n      if (lastListItem) {\r\n        list.scrollTop = lastListItem.offsetTop;\r\n      }\r\n    }\r\n    socket.on(\"incomingMessage\", (message) => {\r\n      if (message.from && message.className !== \"game-message\")\r\n        message.from = `${opponentInfo.playername}: `;\r\n      dispatch({ type: \"setMessage\", value: message });\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"incomingMessage\");\r\n    };\r\n  });\r\n\r\n  return hideChat ? (\r\n    <Button className=\"show-chat\" onClick={handleShowChat}>\r\n      {lang === \"English\" ? \"Show Chat\" : \"Hiện Chat\"}\r\n      <DrawOffer display=\"none\" />\r\n    </Button>\r\n  ) : (\r\n    <div className=\"chat-section\">\r\n      <i className=\"fas fa-times hide-chat\" onClick={handleHideChat}></i>\r\n      <ul className=\"message-container\" ref={messagesContainerRef}>\r\n        <li className=\"announce-new-game\">\r\n          <p className=\"versus game-message\">\r\n            <span>{opponentInfo.playername}</span> vs{\" \"}\r\n            <span>{playerInfo.username}</span>\r\n          </p>\r\n        </li>\r\n        {displayMessages}\r\n      </ul>\r\n      <DrawOffer display=\"flex\" />\r\n      <form className=\"chat-input\" onSubmit={handleSendMessage}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder={lang === \"English\" ? \"Message...\" : \"Tin Nhắn...\"}\r\n          onChange={handleOnChange}\r\n          value={input}\r\n        />\r\n        <Button className=\"send-btn\" type=\"submit\">\r\n          {lang === \"English\" ? \"Send\" : \"Gửi\"}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatSection;\r\n","import React, { useContext } from \"react\";\r\nimport { SocketContext } from \"../../../App/context.js\";\r\nimport { Col, Button } from \"react-bootstrap\";\r\nimport \"./GameBar.scss\";\r\nimport ChatSection from \"./ChatSection/ChatSection.jsx\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst GameBar = (props) => {\r\n  const dispatch = useDispatch();\r\n  const receiveDrawOffer = useSelector(\r\n    (state) => state.gameState.receiveDrawOffer\r\n  );\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const gameResult = useSelector((state) => state.gameState.gameResult);\r\n  const socket = useContext(SocketContext);\r\n  const pause = useSelector((state) => state.gameState.pause);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n\r\n  const handlePauseOrResume = (event) => {\r\n    const action = event.currentTarget.id;\r\n    const actionInVi = action === \"Pause\" ? \"Dừng\" : \"Tiếp Tục\";\r\n    const message = {\r\n      from: `${playerInfo.username}`,\r\n      message: lang === \"English\" ? `${action}d Game` : `${actionInVi} Trận`,\r\n      className: \"game-message\",\r\n    };\r\n    dispatch({ type: \"setMessage\", value: message });\r\n    dispatch({\r\n      type: \"setPause\",\r\n      value: `${playerInfo.username} ${action}d Game`,\r\n    });\r\n    socket.emit(`player${action}Game`);\r\n  };\r\n\r\n  const handleOfferDraw = () => {\r\n    if (!receiveDrawOffer) {\r\n      dispatch({\r\n        type: \"setMessage\",\r\n        value: {\r\n          from: `${playerInfo.username}`,\r\n          message: lang === \"English\" ? \"Offered A Draw\" : \"Đề Nghị Hòa\",\r\n          className: \"game-message\",\r\n        },\r\n      });\r\n      socket.emit(\"sendDrawOffer\");\r\n    }\r\n  };\r\n\r\n  const handleExit = () => {\r\n    socket.removeAllListeners(\"oneSecondPass\");\r\n    const width = document.querySelector(\".board-container\").offsetWidth;\r\n    socket.emit(\"exitGame\");\r\n    dispatch({ type: \"resetBoardState\", value: width });\r\n    dispatch({ type: \"resetGameState\" });\r\n  };\r\n\r\n  return (\r\n    <Col\r\n      md={{ span: 4 }}\r\n      xs={{ span: 10 }}\r\n      className=\"game-controller mb-3 game-bar-controller\"\r\n    >\r\n      <div className=\"button-container game-bar\">\r\n        <div className=\"select-side-container\">\r\n          <Button\r\n            className=\"red-side draw-btn\"\r\n            value=\"draw\"\r\n            onClick={handleOfferDraw}\r\n            disabled={gameResult !== null || pause}\r\n          >\r\n            &#189; {lang === \"English\" ? \"Draw\" : \"Hòa\"}\r\n          </Button>\r\n          <Button\r\n            className=\"black-side resign-btn\"\r\n            value=\"resign\"\r\n            onClick={props.handleResign}\r\n            disabled={gameResult !== null || pause}\r\n          >\r\n            <i className=\"fas fa-flag\"></i>{\" \"}\r\n            {lang === \"English\" ? \"Resign\" : \"Thua\"}\r\n          </Button>\r\n        </div>\r\n        <div className=\"time-select-container\">\r\n          <Button\r\n            className=\"select-timer pause-btn\"\r\n            disabled={gameResult !== null || (pause && !/Paused/.test(pause))}\r\n            id={!pause ? \"Pause\" : \"Resume\"}\r\n            onClick={handlePauseOrResume}\r\n          >\r\n            <i className={`fas fa-${!pause ? \"pause\" : \"play\"}`}></i>{\" \"}\r\n            {!pause\r\n              ? lang === \"English\"\r\n                ? \"Pause\"\r\n                : \"Dừng\"\r\n              : lang === \"English\"\r\n              ? \"Resume\"\r\n              : \"Tiếp Tục\"}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <ChatSection />\r\n      <Button\r\n        className=\"exit-game\"\r\n        disabled={gameResult === null}\r\n        onClick={handleExit}\r\n      >\r\n        {lang === \"English\" ? \"Exit Game\" : \"Rời Trận\"}\r\n      </Button>\r\n      <Button className=\"center-board\" onClick={props.handleCenterBoard}>\r\n        {lang === \"English\"\r\n          ? `Center Board: ${props.centerBoard ? \"On\" : \"Off\"}`\r\n          : `Canh Giữa Bàn Cờ:  ${props.centerBoard ? \"Bật\" : \"Tắt\"}`}\r\n      </Button>\r\n    </Col>\r\n  );\r\n};\r\n\r\nexport default GameBar;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { SocketContext, SetMoveTimerContext } from \"../../App/context.js\";\r\nimport \"./Game.scss\";\r\nimport { Row } from \"react-bootstrap\";\r\nimport GameController from \"./GameController/GameController.jsx\";\r\nimport GamePlayArea from \"./GamePlayArea/GamePlayArea.jsx\";\r\nimport { useSelector, useStore, useDispatch } from \"react-redux\";\r\nimport GameBar from \"./GameBar/GameBar.jsx\";\r\n\r\nconst Game = () => {\r\n  const dispatch = useDispatch();\r\n  const [timeSelectorDisplay, setTimeSelectorDisplay] = useState(\"none\");\r\n  const foundMatch = useSelector((state) => state.gameState.foundMatch);\r\n  const [centerBoard, setCenterBoard] = useState(false);\r\n  const socket = useContext(SocketContext);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const store = useStore();\r\n  const setMoveTimer = useContext(SetMoveTimerContext);\r\n\r\n  const handleCenterBoard = () => {\r\n    setCenterBoard(!centerBoard);\r\n  };\r\n\r\n  const handleToggle = () => {\r\n    setTimeSelectorDisplay(timeSelectorDisplay === \"none\" ? \"flex\" : \"none\");\r\n  };\r\n\r\n  const handleGameOver = (result, reason) => {\r\n    const opponentInfo = store.getState().gameState.opponentInfo;\r\n    const playerInfo = store.getState().appState.playerInfo;\r\n    dispatch({ type: \"setGameResult\", value: result });\r\n    dispatch({ type: \"setReceiveDrawOffer\", value: false });\r\n    dispatch({\r\n      type: \"setMessage\",\r\n      value: {\r\n        type: \"game result message\",\r\n        winner: `${\r\n          result === \"Won\"\r\n            ? `${playerInfo.username}`\r\n            : `${opponentInfo.playername}`\r\n        } ${lang === \"English\" ? \"Won\" : \"Thắng\"} - `,\r\n        reason:\r\n          lang === \"English\"\r\n            ? reason\r\n            : reason === \"Game Abandoned\"\r\n            ? \"Trận Đấu Bị Hủy\"\r\n            : /Resigned/.test(reason)\r\n            ? reason.replace(\"Resigned\", \"Đầu Hàng\")\r\n            : \"Chiếu Bí\",\r\n        className: \"game-message\",\r\n      },\r\n    });\r\n    setMoveTimer(null, true, dispatch);\r\n  };\r\n\r\n  const handleResign = () => {\r\n    const playerInfo = store.getState().appState.playerInfo;\r\n    handleGameOver(\"Lose\", `${playerInfo.username} Resigned`);\r\n    socket.emit(\"gameFinish\", [\"Won\", `${playerInfo.username} Resigned`]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"gameOver\", (result, reason) => {\r\n      const foundMatch = store.getState().gameState.foundMatch;\r\n      const gameResult = store.getState().gameState.gameResult;\r\n      if (gameResult !== null || !foundMatch) return;\r\n      handleGameOver(result, reason);\r\n    });\r\n\r\n    socket.on(\"opponentLeftGame\", () => {\r\n      const foundMatch = store.getState().gameState.foundMatch;\r\n      const opponentInfo = store.getState().gameState.opponentInfo;\r\n      if (foundMatch)\r\n        dispatch({\r\n          type: \"setMessage\",\r\n          value: {\r\n            from: `${opponentInfo.playername}`,\r\n            message: lang === \"English\" ? \"Left The Game\" : \"Đã Rời Trận\",\r\n            className: \"game-message\",\r\n          },\r\n        });\r\n    });\r\n\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === \"visible\" && !socket.connected) {\r\n        socket.connect();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\r\n    window.onfocus = () => {\r\n      if (!socket.connected) {\r\n        socket.connect();\r\n      }\r\n    };\r\n\r\n    return () => {\r\n      socket.removeAllListeners(\"opponentLeftGame\");\r\n      socket.removeAllListeners(\"gameOver\");\r\n      window.onfocus = null;\r\n      document.removeAllListeners(\"visibilitychange\", handleVisibilityChange);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Row md={{ cols: 1 }} className=\"mt-3 pb-3\">\r\n      <GamePlayArea lang={lang} />\r\n      <div\r\n        className=\"w-100\"\r\n        style={{ display: centerBoard ? \"block\" : \"none\" }}\r\n      ></div>\r\n      {!foundMatch ? (\r\n        <GameController\r\n          timeSelectorDisplay={timeSelectorDisplay}\r\n          handleToggle={handleToggle}\r\n          handleCenterBoard={handleCenterBoard}\r\n          centerBoard={centerBoard}\r\n        />\r\n      ) : (\r\n        <GameBar\r\n          handleCenterBoard={handleCenterBoard}\r\n          centerBoard={centerBoard}\r\n          handleResign={handleResign}\r\n        />\r\n      )}\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","import React, { useState } from \"react\";\r\nimport \"./Warning.scss\";\r\n\r\nconst Warning = (props) => {\r\n  const [display, setDisplay] = useState(\"flex\");\r\n\r\n  return (\r\n    <div className=\"warning\" style={{ display: display }}>\r\n      <div className=\"warning-icon\">\r\n        <i className=\"fas fa-exclamation-triangle fa-2x\"></i>\r\n      </div>\r\n      <p>{props.connectionError}</p>\r\n      <i\r\n        className=\"fas fa-times\"\r\n        onClick={() => {\r\n          setDisplay(\"none\");\r\n        }}\r\n      ></i>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Warning;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./VerifyEmailNote.scss\";\r\n\r\nconst VerifyEmailNote = ({ lang }) => {\r\n  const [hideNote, setHideNote] = useState(false);\r\n\r\n  const handleHideNote = () => {\r\n    setHideNote(true);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"verify-email-note\"\r\n      style={{ display: hideNote ? \"none\" : \"block\" }}\r\n    >\r\n      <p>\r\n        {lang === \"English\" ? (\r\n          <>\r\n            Look Like you haven't verified your email. Please click{\" \"}\r\n            <Link to=\"/verify-email\">here</Link> to verify your email or{\" \"}\r\n            <Link to=\"/settings\">here</Link> to change your email.\r\n          </>\r\n        ) : (\r\n          <>\r\n            Bạn chưa xác nhận email. xin hãy nhấp vào{\" \"}\r\n            <Link to=\"/verify-email\">đây</Link> để xác nhận email hoặc vào{\" \"}\r\n            <Link to=\"/settings\">đây</Link> để thay đổi email.\r\n          </>\r\n        )}\r\n      </p>\r\n      <i className=\"fas fa-times hide-note\" onClick={handleHideNote}></i>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerifyEmailNote;\r\n","import React, { useEffect, useState, useContext } from 'react';\r\nimport EntryComponent from './EntryComponent/EntryComponent.jsx';\r\nimport NavBar from './NavBar/NavBar.jsx';\r\nimport { Container, Spinner } from 'react-bootstrap';\r\nimport useFetchData from '../App/useFetchData.js';\r\nimport './Main.scss';\r\nimport { useSelector, useDispatch, useStore } from 'react-redux';\r\nimport Game from './Game/Game.jsx';\r\nimport { SocketContext } from '../App/context';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Warning from './Warning/Warning.jsx';\r\nimport VerifyEmailNote from './VerifyEmailNote/VerifyEmailNote.jsx';\r\n\r\nconst Main = () => {\r\n  const dispatch = useDispatch();\r\n  const [connectionError, setConnectionError] = useState(null);\r\n  const socket = useContext(SocketContext);\r\n  const store = useStore();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const loginError = useSelector((state) => state.appState.loginError);\r\n  const isAuthenticated = useSelector((state) => state.appState.isAuthenticated);\r\n  const [waitForResponse, setWaitForResponse] = useFetchData();\r\n\r\n  useEffect(() => {\r\n    if (connectionError) {\r\n      if (connectionError === 'Connection Was Closed')\r\n        setConnectionError('Kết nối đã đóng');\r\n      else if (connectionError === 'Successfully reconnect')\r\n        setConnectionError('Kết nối lại thành công');\r\n      else if (/logged in/.test(connectionError))\r\n        setConnectionError(\r\n          'Kết nối đã đóng vì tài khoản của bạn được đăng nhập từ nơi khác',\r\n        );\r\n    }\r\n  }, [lang]);\r\n\r\n  useEffect(() => {\r\n    socket.on('connect_error', (err) => {\r\n      let errMess = err.message;\r\n      if (/your account/.test(err) && lang !== 'English')\r\n        errMess = 'Kết nối đã đóng vì tài khoản của bạn được đăng nhập từ nơi khác';\r\n      setConnectionError(errMess);\r\n      socket.close();\r\n    });\r\n\r\n    socket.on('connect', () => {\r\n      if (connectionError) {\r\n        setConnectionError(\r\n          lang === 'English' ? 'Successfully reconnect' : 'Kết nối lại thành công',\r\n        );\r\n        setTimeout(() => {\r\n          setConnectionError(null);\r\n        }, 1000);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners('connect_error');\r\n      socket.removeAllListeners('connect');\r\n    };\r\n  }, [connectionError]);\r\n\r\n  useEffect(() => {\r\n    socket.on('disconnect', (reason) => {\r\n      const foundMatch = store.getState().gameState.foundMatch;\r\n      if (!foundMatch) {\r\n        dispatch({\r\n          type: 'setFindingMatch',\r\n          value: lang === 'English' ? 'Connection Was Closed' : 'Kết nối đã đóng',\r\n        });\r\n        setTimeout(() => {\r\n          dispatch({\r\n            type: 'setFindingMatch',\r\n            value: lang === 'English' ? 'Play' : 'Chơi',\r\n          });\r\n        }, 700);\r\n      }\r\n      if (reason !== 'io client disconnect') {\r\n        socket.removeAllListeners('oneSecondPass');\r\n        setConnectionError(\r\n          lang === 'English' ? 'Connection Was Closed' : 'Kết nối đã đóng',\r\n        );\r\n        if (foundMatch) {\r\n          dispatch({ type: 'setGameResult', value: undefined });\r\n          dispatch({\r\n            type: 'setMessage',\r\n            value: {\r\n              from: '',\r\n              className: 'game-message',\r\n              message: lang === 'English' ? 'Connection Was Closed' : 'Kết nối đã đóng',\r\n            },\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.removeAllListeners('disconnect');\r\n    };\r\n  }, []);\r\n\r\n  if (loginError) return <Redirect to='/signin' />;\r\n\r\n  if (waitForResponse)\r\n    return <Spinner animation='border' variant='secondary' className='spinner' />;\r\n\r\n  return (\r\n    <Container fluid>\r\n      <div>\r\n        <NavBar setWaitForResponse={setWaitForResponse} />\r\n        {isAuthenticated ? <Game /> : <EntryComponent />}\r\n      </div>\r\n\r\n      {playerInfo && !playerInfo.guest && !playerInfo.email.verified ? (\r\n        <VerifyEmailNote lang={lang} />\r\n      ) : null}\r\n      {connectionError ? <Warning connectionError={connectionError} /> : null}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { useState, useContext } from 'react';\r\nimport useValidateInput from './useValidateInput.js';\r\nimport { Container, Form, InputGroup, Button, Spinner, Row, Col } from 'react-bootstrap';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { AuthenticateUserContext } from '../App/context.js';\r\nimport callAPI from '../App/callAPI.js';\r\n\r\nconst Signup = () => {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector((state) => state.appState.isAuthenticated);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const authenticateUser = useContext(AuthenticateUserContext);\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n  const {\r\n    handleEmailChange,\r\n    handleError,\r\n    setError,\r\n    handleFirstnameChange,\r\n    handleLastnameChange,\r\n    handleMissingField,\r\n    handleUsernameChange,\r\n    handlePasswordChange,\r\n    username,\r\n    password,\r\n    lastname,\r\n    firstname,\r\n    email,\r\n    invalidEmailMess,\r\n    invalidPasswordMess,\r\n    invalidUsernameMess,\r\n    error,\r\n    showPassword,\r\n    setShowPassword,\r\n    confirmPassword,\r\n    handleConfirmPasswordChange,\r\n    confirmPasswordMess,\r\n    setConfirmPasswordMess,\r\n  } = useValidateInput(false, false, lang);\r\n\r\n  const handleSignUp = async (event) => {\r\n    try {\r\n      event.preventDefault();\r\n      if (waitForResponse) return;\r\n      setError('');\r\n      const missingField = handleMissingField();\r\n      if (confirmPassword !== password) {\r\n        setConfirmPasswordMess(\r\n          lang === 'English' ? \"Password doesn't match\" : 'Mật khẩu không khớp',\r\n        );\r\n        return;\r\n      }\r\n      if (\r\n        !missingField &&\r\n        !invalidEmailMess &&\r\n        !invalidPasswordMess &&\r\n        !invalidUsernameMess &&\r\n        !confirmPasswordMess\r\n      ) {\r\n        setWaitForResponse(true);\r\n        setError(null);\r\n        const { message, user, ok, opponentID } = await callAPI('POST', 'api/signup', {\r\n          email: email,\r\n          firstname: firstname,\r\n          username: username,\r\n          password: password,\r\n          lastname: lastname,\r\n        });\r\n        setWaitForResponse(false);\r\n        if (user) {\r\n          authenticateUser(dispatch, user, opponentID);\r\n        } else handleError(ok, message);\r\n      }\r\n    } catch (err) {\r\n      setWaitForResponse(false);\r\n      handleError(false, err.toString());\r\n    }\r\n  };\r\n\r\n  if (isAuthenticated) {\r\n    if (isAuthenticated !== 'guest') return <Redirect to='/' />;\r\n  }\r\n\r\n  return (\r\n    <Container fluid>\r\n      <h1>{lang === 'English' ? 'Xiangqi' : 'Cờ Tướng'}</h1>(\r\n      <Row className='justify-content-center'>\r\n        <Col\r\n          md={{ span: 7 }}\r\n          sm={{ span: 7 }}\r\n          xs={{ span: 10 }}\r\n          className='login-component d-flex flex-column  align-items-center'\r\n        >\r\n          {error ? <p className='error-message'>{error}</p> : null}\r\n          <Form onSubmit={handleSignUp} method='POST'>\r\n            <Form.Group controlId='username'>\r\n              <Form.Label>{lang === 'English' ? 'Username' : 'Tên tài khoản'}</Form.Label>\r\n              <InputGroup hasValidation>\r\n                <Form.Control\r\n                  type='text'\r\n                  isInvalid={invalidUsernameMess !== ''}\r\n                  onChange={handleUsernameChange}\r\n                  value={username}\r\n                  disabled={waitForResponse}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {invalidUsernameMess}\r\n                </Form.Control.Feedback>\r\n              </InputGroup>\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId='firstname'>\r\n              <Form.Label>{lang === 'English' ? 'Firstname' : 'Họ'}</Form.Label>\r\n              <Form.Control\r\n                type='text'\r\n                onChange={handleFirstnameChange}\r\n                value={firstname}\r\n                disabled={waitForResponse}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId='lastname'>\r\n              <Form.Label>{lang === 'English' ? 'Lastname' : 'tên'}</Form.Label>\r\n              <Form.Control\r\n                type='text'\r\n                onChange={handleLastnameChange}\r\n                value={lastname}\r\n                disabled={waitForResponse}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId='email'>\r\n              <Form.Label>Email</Form.Label>\r\n              <InputGroup hasValidation>\r\n                <Form.Control\r\n                  type='email'\r\n                  isInvalid={invalidEmailMess !== ''}\r\n                  onChange={handleEmailChange}\r\n                  value={email}\r\n                  disabled={waitForResponse}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {invalidEmailMess}\r\n                </Form.Control.Feedback>\r\n              </InputGroup>\r\n            </Form.Group>\r\n            <Form.Group controlId='password'>\r\n              <Form.Label>{lang === 'English' ? 'Password' : 'Mật Khẩu'}</Form.Label>\r\n              <InputGroup hasValidation className='password-group'>\r\n                <Form.Control\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  isInvalid={invalidPasswordMess !== ''}\r\n                  onChange={handlePasswordChange}\r\n                  value={password}\r\n                  disabled={waitForResponse}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {invalidPasswordMess}\r\n                </Form.Control.Feedback>\r\n                <button\r\n                  className='toggle-password'\r\n                  type='button'\r\n                  style={{ display: invalidPasswordMess ? 'none' : 'inline' }}\r\n                  onClick={() => {\r\n                    setShowPassword(!showPassword);\r\n                  }}\r\n                >\r\n                  {showPassword\r\n                    ? lang === 'English'\r\n                      ? 'Hide'\r\n                      : 'Ẩn'\r\n                    : lang === 'English'\r\n                    ? 'Show'\r\n                    : 'Hiện'}\r\n                </button>\r\n              </InputGroup>\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Form.Label>\r\n                {lang === 'English' ? 'Confirm Password' : 'Xác nhận mật khẩu'}\r\n              </Form.Label>\r\n              <InputGroup hasValidation>\r\n                <Form.Control\r\n                  type='password'\r\n                  isInvalid={confirmPasswordMess !== ''}\r\n                  disabled={waitForResponse}\r\n                  value={confirmPassword}\r\n                  onChange={handleConfirmPasswordChange}\r\n                />\r\n                <Form.Control.Feedback type='invalid'>\r\n                  {confirmPasswordMess}\r\n                </Form.Control.Feedback>\r\n              </InputGroup>\r\n            </Form.Group>\r\n            <Button type='submit' className='submit-form-button'>\r\n              {waitForResponse ? (\r\n                <Spinner animation='border' variant='dark' />\r\n              ) : lang === 'English' ? (\r\n                'Submit'\r\n              ) : (\r\n                'Đăng Ký'\r\n              )}\r\n            </Button>\r\n          </Form>\r\n          <p className='seperator'>\r\n            <span></span>\r\n            <span className='seperator-text'>\r\n              {lang === 'English' ? 'or connect with' : 'hoặc đăng nhập với'}\r\n            </span>\r\n            <span></span>\r\n          </p>\r\n          <div className='social-login'>\r\n            <a\r\n              className='google'\r\n              href={`${process.env.REACT_APP_BASE_URL}/api/auth/google`}\r\n            >\r\n              <i className='fab fa-google'></i> Google\r\n            </a>\r\n            <a\r\n              className='facebook'\r\n              href={`${process.env.REACT_APP_BASE_URL}/api/auth/facebook`}\r\n            >\r\n              <i className='fab fa-facebook '></i> Facebook\r\n            </a>\r\n            <a\r\n              className='github'\r\n              href={`${process.env.REACT_APP_BASE_URL}/api/auth/github`}\r\n            >\r\n              <i className='fab fa-github '></i> Github\r\n            </a>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useState, useRef } from \"react\";\r\nimport {\r\n  Container,\r\n  Form,\r\n  InputGroup,\r\n  Button,\r\n  Spinner,\r\n  Row,\r\n  Col,\r\n} from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport callAPI from \"../App/callAPI.js\";\r\n\r\nconst VerifyEmail = () => {\r\n  const dispatch = useDispatch();\r\n  const [verified, setVerified] = useState(false);\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n  const [resend, setResend] = useState(false);\r\n  const [verificationCode, setVerficationCode] = useState(\"\");\r\n  const [invalidCodeMess, setInvalidCodeMess] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [waitForSendingCode, setWaitForSendingCode] = useState(false);\r\n  const codeRef = useRef();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n\r\n  const handleVerificationCodeChange = (event) => {\r\n    const value = event.target.value;\r\n    if (/[^0-9]/.test(value))\r\n      setInvalidCodeMess(\r\n        lang === \"English\"\r\n          ? \"Invalid verification code\"\r\n          : \"Mã xác nhận không hợp lệ\"\r\n      );\r\n    else setInvalidCodeMess(\"\");\r\n    setVerficationCode(value);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (waitForResponse || waitForSendingCode) return;\r\n    if (!verificationCode)\r\n      setInvalidCodeMess(\r\n        lang === \"English\"\r\n          ? \"Please fill in this field\"\r\n          : \"Xin hãy điền thông tin này\"\r\n      );\r\n    else if (!invalidCodeMess) {\r\n      setError(null);\r\n      setWaitForResponse(true);\r\n      const { message, ok, user } = await callAPI(\r\n        \"POST\",\r\n        \"api/verify-email/code\",\r\n        {\r\n          username: playerInfo.username,\r\n          correct: +codeRef.current === +verificationCode,\r\n        }\r\n      );\r\n      setWaitForResponse(false);\r\n      if (!ok) setError(message);\r\n      else if (user) {\r\n        setVerified(true);\r\n        dispatch({ type: \"setPlayerInfo\", value: user });\r\n      } else if (message === \"Incorrect Code\")\r\n        setInvalidCodeMess(\r\n          lang === \"English\" ? \"Incorrect Code\" : \"Mã xác nhận không chính xác\"\r\n        );\r\n      else setError(message);\r\n    }\r\n  };\r\n\r\n  const sendVerificationCode = async () => {\r\n    if (waitForResponse || waitForSendingCode) return;\r\n    if (!resend) setResend(true);\r\n    setWaitForSendingCode(true);\r\n    setError(\"\");\r\n    const lastname = playerInfo.name.lastname;\r\n    const { message, code, ok } = await callAPI(\"POST\", \"api/verify-email\", {\r\n      email: playerInfo.email.value,\r\n      lastname: lastname ? lastname : playerInfo.username,\r\n    });\r\n    setWaitForSendingCode(false);\r\n    if (!ok) setError(message);\r\n    else codeRef.current = code;\r\n  };\r\n\r\n  if (!playerInfo || verified) return <Redirect to=\"/\" />;\r\n\r\n  return (\r\n    <Container fluid>\r\n      <h1>{lang === \"English\" ? \"Xiangqi\" : \"Cờ Tướng\"}</h1>\r\n      <Row className=\"justify-content-center\">\r\n        <Col\r\n          lg={{ span: 3 }}\r\n          md={{ span: 4 }}\r\n          xs={{ span: 8 }}\r\n          className=\"login-component d-flex flex-column  align-items-center\"\r\n        >\r\n          {error ? <p className=\"error-message\">{error}</p> : null}\r\n          <Form onSubmit={handleSubmit} method=\"POST\">\r\n            <Form.Group controlId=\"verificationCode\">\r\n              <Form.Label style={{ float: \"left\" }}>\r\n                {lang === \"English\"\r\n                  ? \"Enter your verification code\"\r\n                  : \"Nhập mã xác nhận\"}\r\n              </Form.Label>\r\n              <InputGroup hasValidation>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  name=\"verificationCode\"\r\n                  isInvalid={invalidCodeMess !== \"\"}\r\n                  onChange={handleVerificationCodeChange}\r\n                  value={verificationCode}\r\n                  disabled={waitForResponse || waitForSendingCode}\r\n                  placeholder={\r\n                    lang === \"English\" ? \"Verification Code\" : \"Mã Xác Nhận\"\r\n                  }\r\n                />\r\n                <Form.Control.Feedback\r\n                  type=\"invalid\"\r\n                  style={{ textAlign: \"left\" }}\r\n                >\r\n                  {invalidCodeMess}\r\n                </Form.Control.Feedback>\r\n              </InputGroup>\r\n            </Form.Group>\r\n\r\n            <Button type=\"submit\" className=\"submit-form-button\">\r\n              {waitForResponse ? (\r\n                <Spinner animation=\"border\" variant=\"dark\" />\r\n              ) : lang === \"English\" ? (\r\n                \"Submit\"\r\n              ) : (\r\n                \"Xác Nhận Email\"\r\n              )}\r\n            </Button>\r\n            <Button\r\n              onClick={sendVerificationCode}\r\n              style={{ marginTop: \"10px\" }}\r\n              className=\"submit-form-button\"\r\n            >\r\n              {waitForSendingCode ? (\r\n                <Spinner animation=\"border\" variant=\"dark\" />\r\n              ) : resend ? (\r\n                lang === \"English\" ? (\r\n                  \"Resend Verification Code\"\r\n                ) : (\r\n                  \"Gửi lại Mã Xác Nhận\"\r\n                )\r\n              ) : lang === \"English\" ? (\r\n                \"Send Verification Code\"\r\n              ) : (\r\n                \"Gửi Mã Xác Nhận\"\r\n              )}\r\n            </Button>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default VerifyEmail;\r\n","import { Link } from \"react-router-dom\";\r\n\r\nconst renderMemberLists = (members, username, lang) => {\r\n  const option = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n  return members.map((member, index) => {\r\n    if (member.guest || member.username === username) return null;\r\n    const { lastname, firstname } = member.name;\r\n    const fullname =\r\n      (firstname ? firstname : \"\") + \" \" + (lastname ? lastname : \"\");\r\n    const joinDate = new Date(member.join).toLocaleDateString(\r\n      lang === \"English\" ? \"us-US\" : \"vi-VI\",\r\n      option\r\n    );\r\n\r\n    return (\r\n      <li className=\"member\" key={`member-${index}`}>\r\n        <Link\r\n          className=\"member-profile-link\"\r\n          to={`/home/${member.username}`}\r\n          target=\"_blank\"\r\n        >\r\n          <div>\r\n            <img src={member.photo} />\r\n          </div>\r\n          <div className=\"member-info\">\r\n            <div className=\"name-and-state\">\r\n              <p className=\"member-name\">{member.username}</p>\r\n              <p className={`member-state ${member.socketID ? \"online\" : \"\"}`}>\r\n                {member.socketID ? \"Online\" : \"Offline\"}\r\n              </p>\r\n            </div>\r\n            <div className=\"join-date-and-name\">\r\n              <p>{fullname}</p>\r\n              <p>{(lang === \"English\" ? \"Join: \" : \"Tham Gia: \") + joinDate}</p>\r\n            </div>\r\n          </div>\r\n        </Link>\r\n      </li>\r\n    );\r\n  });\r\n};\r\n\r\nexport default renderMemberLists;\r\n","import React, { useState } from \"react\";\r\nimport callAPI from \"../../App/callAPI.js\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport renderMembersList from \"./renderMembersList.js\";\r\nimport \"./FindMembers.scss\";\r\n\r\nconst FindPlayer = ({ playerInfo }) => {\r\n  const [value, setValue] = useState(\"\");\r\n  const [members, setMembers] = useState([]);\r\n  const [errorMess, setErrorMess] = useState(null);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const replaceSpecialCharacters = (str) => {\r\n    return str.replace(/[^0-9a-zA-Z-]+/g, \"\");\r\n  };\r\n\r\n  const handleOnChange = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const value = event.currentTarget.value;\r\n      setValue(value);\r\n      if (value) {\r\n        const { players } = await callAPI(\"POST\", \"api/players\", {\r\n          playername: replaceSpecialCharacters(value),\r\n        });\r\n        const reCheck = document.querySelector(\"#member-name-input\").value;\r\n        if (!players) return;\r\n        const username = playerInfo.username;\r\n        if (reCheck) setMembers(renderMembersList(players, username, lang));\r\n      } else setMembers([]);\r\n    } catch (err) {\r\n      setErrorMess(err.message);\r\n      setTimeout(() => {\r\n        setErrorMess(null);\r\n      }, 1000);\r\n    }\r\n  };\r\n\r\n  const renderTooltip = (props) => (\r\n    <Tooltip {...props} id=\"tooltip\">\r\n      {errorMess}\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <div className=\"find-players\">\r\n      <p className=\"members-title\">\r\n        {lang === \"English\" ? \"Members\" : \"Thành Viên\"}\r\n      </p>\r\n      <div className=\"search-area\">\r\n        <OverlayTrigger\r\n          placement=\"top\"\r\n          overlay={renderTooltip}\r\n          show={errorMess !== null}\r\n        >\r\n          <input\r\n            placeholder={\r\n              lang === \"English\" ? \"Search Members...\" : \"Tìm Thành Viên...\"\r\n            }\r\n            value={value}\r\n            onChange={handleOnChange}\r\n            id=\"member-name-input\"\r\n          />\r\n        </OverlayTrigger>\r\n        <i className=\"fas fa-search\"></i>\r\n        <ul className=\"members-list\">{members}</ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FindPlayer;\r\n","import React, { useState } from \"react\";\r\nimport { Spinner, OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport \"./ProfileHeader.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport callAPI from \"../../App/callAPI.js\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst ProfileHeader = (props) => {\r\n  const { playerInfo, setError, viewOthersProfile, setting } = props;\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const firstname = playerInfo.name.firstname;\r\n  const lastname = playerInfo.name.lastname;\r\n  const playerFullName = firstname + \" \" + lastname;\r\n\r\n  const handleChangeProfilePic = () => {\r\n    const inputElement = document.querySelector(\"#pic-input\");\r\n    inputElement.click();\r\n  };\r\n\r\n  const upload = async (event) => {\r\n    try {\r\n      const formData = new FormData();\r\n      const file = event.currentTarget.files[0];\r\n      const name = event.currentTarget.name;\r\n      formData.append(name, file);\r\n      setWaitForResponse(true);\r\n      const { user, message } = await callAPI(\r\n        \"POST\",\r\n        `uploads/${playerInfo._id}`,\r\n        formData,\r\n        true\r\n      );\r\n      setWaitForResponse(false);\r\n      if (user) {\r\n        dispatch({ type: \"setPlayerInfo\", value: user });\r\n      } else if (message) {\r\n        setError(\r\n          message === \"Only image files are allowed.\" && lang !== \"English\"\r\n            ? \"Tập tin không hợp lệ.\"\r\n            : lang === \"English\"\r\n            ? message\r\n            : \"Đã xảy ra lỗi. Xin hãy thử lại.\"\r\n        );\r\n      }\r\n    } catch (err) {\r\n      setError(\r\n        lang === \"English\"\r\n          ? \"Looks like there was an error. Please refresh.\"\r\n          : \"Đã xảy ra lỗi. Vui lòng tải lại trang.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-header\">\r\n      <div className={`change-pic-area ${setting ? \"setting-img\" : \"\"}`}>\r\n        {!waitForResponse && !viewOthersProfile ? (\r\n          <button className=\"change-pic\" onClick={handleChangeProfilePic}>\r\n            <i className=\"fas fa-camera\"></i>\r\n            {lang === \"English\" ? \"Change\" : \"Thay Đổi\"}\r\n          </button>\r\n        ) : null}\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          id=\"pic-input\"\r\n          onChange={upload}\r\n          name={playerInfo._id}\r\n        />\r\n        {!waitForResponse ? (\r\n          <img src={playerInfo.photo} />\r\n        ) : (\r\n          <Spinner animation=\"border\" variant=\"secondary\" />\r\n        )}\r\n      </div>\r\n      <div\r\n        id={viewOthersProfile ? \"other-profile\" : \"\"}\r\n        className={`user-profile-info ${setting ? \"setting-profile-info\" : \"\"}`}\r\n      >\r\n        <div className=\"user-name-lastname\">\r\n          <OverlayTrigger\r\n            placement=\"top\"\r\n            overlay={(props) => (\r\n              <Tooltip id=\"profile-name-tooltip\" {...props}>\r\n                {playerInfo.username}\r\n              </Tooltip>\r\n            )}\r\n          >\r\n            <p className=\"user-name\">{playerInfo.username}</p>\r\n          </OverlayTrigger>\r\n          <OverlayTrigger\r\n            placement=\"top\"\r\n            overlay={(props) => (\r\n              <Tooltip id=\"profile-name-tooltip\" {...props}>\r\n                {playerFullName}\r\n              </Tooltip>\r\n            )}\r\n          >\r\n            <p className=\"user-full-name\">{playerFullName}</p>\r\n          </OverlayTrigger>\r\n        </div>\r\n        <div className=\"edit-profile-container\">\r\n          {!viewOthersProfile && !setting ? (\r\n            <Link to=\"/settings\">\r\n              <i className=\"fas fa-edit\"></i>{\" \"}\r\n              {lang === \"English\" ? \"Edit\" : \"Chỉnh Sửa\"}\r\n            </Link>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileHeader;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"./ProfileInfo.scss\";\r\n\r\nconst ProfileInfo = ({ playerInfo }) => {\r\n  const option = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const { won, draw, lost } = playerInfo.totalGames;\r\n  const totalMatches = won + draw + lost;\r\n  const joinDate = new Date(playerInfo.join).toLocaleDateString(\r\n    lang === \"English\" ? \"us-US\" : \"vi-VI\",\r\n    option\r\n  );\r\n  const lastOnlineDate = new Date(playerInfo.lastOnline).toLocaleDateString(\r\n    lang === \"English\" ? \"us-US\" : \"vi-VI\",\r\n    option\r\n  );\r\n\r\n  return (\r\n    <div className=\"profile-info\">\r\n      <div className=\"join profile-info-item\">\r\n        <i className=\"fas fa-user-plus \" style={{ marginLeft: \"9px\" }}></i>\r\n        <p className=\"item-title\">\r\n          {lang === \"English\" ? \"Joined\" : \"Tham Gia\"}\r\n        </p>\r\n        <p className=\"item-value\">{joinDate}</p>\r\n      </div>\r\n      <div className=\"last-online profile-info-item\">\r\n        <i className=\"fas fa-signal \"></i>\r\n        <p className=\"item-title\">\r\n          {lang === \"English\" ? \"Last Online\" : \"Lần Cuối Online\"}\r\n        </p>\r\n\r\n        <p className=\"item-value\">{lastOnlineDate}</p>\r\n      </div>\r\n      <div className=\"games profile-info-item\">\r\n        <i className=\"fas fa-chess-board \"></i>\r\n        <p className=\"item-title\">{lang === \"English\" ? \"Games\" : \"Trận\"}</p>\r\n        <p className=\"item-value\">\r\n          {totalMatches > 1000000 ? \"1000000+\" : totalMatches}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileInfo;\r\n","//hsla(0, 0%, 100%, 0.4)\r\nconst renderMatchHistory = (playerInfo, lang) => {\r\n  const [playername, matches] = [playerInfo.username, playerInfo.matches];\r\n  return matches.map((value, index) => {\r\n    let resultInVi = \"Hòa\";\r\n    let reasonInVi = \"Đồng Ý Hòa\";\r\n\r\n    if (value.result !== \"Draw\") {\r\n      if (value.reason === \"Game Abandoned\") reasonInVi = \"Trận Đấu Bị Hủy\";\r\n      else if (/Resigned/.test(value.reason))\r\n        reasonInVi = value.reason.replace(\"Resigned\", \"Đầu Hàng\");\r\n      else reasonInVi = \"Chiếu Bí\";\r\n      if (value.result === \"Won\") resultInVi = \"Thắng\";\r\n      else resultInVi = \"Thua\";\r\n    }\r\n\r\n    const option = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n    const date = new Date(value.date).toLocaleDateString(\r\n      lang === \"English\" ? \"us-US\" : \"vi-VI\",\r\n      option\r\n    );\r\n    return (\r\n      <tr className=\"game-table-row\" key={`match-${index}`}>\r\n        <td className=\"game-time\">\r\n          <div className=\"match-history-value\">\r\n            {\" \"}\r\n            <i className=\"fas fa-clock\" style={{ color: \"#769656\" }}></i>\r\n            {value.time + (lang === \"English\" ? \" min\" : \" phút\")}\r\n          </div>\r\n        </td>\r\n        <td className=\"players-name\">\r\n          <div className=\"match-history-value\">\r\n            <p>\r\n              {value.result === \"Draw\" ? (\r\n                <i className=\"fas fa-equals\"></i>\r\n              ) : (\r\n                <i\r\n                  className={`fas fa-${\r\n                    value.result === \"Won\" ? \"plus\" : \"minus\"\r\n                  }-square`}\r\n                ></i>\r\n              )}\r\n\r\n              {playername}\r\n            </p>\r\n            <p>\r\n              {value.result === \"Draw\" ? (\r\n                <i className=\"fas fa-equals\"></i>\r\n              ) : (\r\n                <i\r\n                  className={`fas fa-${\r\n                    value.result !== \"Won\" ? \"plus\" : \"minus\"\r\n                  }-square`}\r\n                ></i>\r\n              )}\r\n              {value.opponent}\r\n            </p>\r\n          </div>\r\n        </td>\r\n        <td></td>\r\n        <td></td>\r\n        <td></td>\r\n        <td className=\"match-result\">\r\n          <div\r\n            className=\"match-history-value\"\r\n            style={{\r\n              color:\r\n                value.result === \"Won\"\r\n                  ? \"#769656\"\r\n                  : value.result === \"Draw\"\r\n                  ? \"hsla(0, 0%, 100%, 0.4)\"\r\n                  : \"#dc3545\",\r\n            }}\r\n          >\r\n            {lang === \"English\" ? value.result : resultInVi}\r\n          </div>\r\n        </td>\r\n        <td className=\"match-result\">\r\n          <div className=\"match-history-value reason\">\r\n            {\" \"}\r\n            {lang === \"English\" ? value.reason : reasonInVi}\r\n          </div>\r\n        </td>\r\n        <td className=\"match-date\">\r\n          <div>{date}</div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  });\r\n};\r\n\r\nexport default renderMatchHistory;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport renderMatchHistory from \"./renderMatchHistory.js\";\r\nimport \"./MatchHistory.scss\";\r\n\r\nconst MatchHistory = ({ playerInfo, viewOthersProfile }) => {\r\n  const { won, lost, draw } = playerInfo.totalGames;\r\n  const lang = useSelector((state) => state.appState.lang);\r\n\r\n  return (\r\n    <div className=\"match-history-container\">\r\n      <div className=\"match-history-title\">\r\n        <p>\r\n          {lang === \"English\"\r\n            ? \"Match History(Last 20 Played)\"\r\n            : \"Lịch Sử Đấu(20 trận gần nhất)\"}\r\n        </p>\r\n        <p>{`${won > 10000 ? \"10000+\" : won}W/${\r\n          lost > 10000 ? \"10000+\" : lost\r\n        }L/${draw > 10000 ? \"10000+\" : draw}D`}</p>\r\n      </div>\r\n      {playerInfo.email.verified ? (\r\n        <Table borderless responsive={true}>\r\n          <thead>\r\n            <tr>\r\n              <th></th>\r\n              <th>{lang === \"English\" ? \"Players\" : \"Người Chơi\"}</th>\r\n              <th></th>\r\n              <th></th>\r\n              <th></th>\r\n              <th>{lang === \"English\" ? \"Result\" : \"Kết Quả\"}</th>\r\n              <th>{lang === \"English\" ? \"Reason\" : \"Lý Do\"}</th>\r\n              <th className=\"date-head\">\r\n                {lang === \"English\" ? \"Date\" : \"Ngày\"}\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{renderMatchHistory(playerInfo, lang)}</tbody>\r\n        </Table>\r\n      ) : (\r\n        <p id=\"verify-email-note\">\r\n          {viewOthersProfile ? (\r\n            lang === \"English\" ? (\r\n              \"User's match history isn't available.\"\r\n            ) : (\r\n              \"Lịch sử đấu của người chơi hiện không khả dụng.\"\r\n            )\r\n          ) : lang === \"English\" ? (\r\n            <>\r\n              You need to verify your email to view your match history. Please\r\n              click <Link to=\"/verify-email\">here</Link> to verify your email or{\" \"}\r\n              <Link to=\"/settings\">here</Link> to change your email.\r\n            </>\r\n          ) : (\r\n            <>\r\n              Bạn cần phải xác nhận email để xem lịch sử đấu. Xin hãy nhấp vào{\" \"}\r\n              <Link to=\"/verify-email\">đây</Link> để xác nhận email hoặc vào{\" \"}\r\n              <Link to=\"/settings\">đây</Link> để thay đổi email.\r\n            </>\r\n          )}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MatchHistory;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./Home.scss\";\r\nimport { Table, Row, Col, Spinner, Container } from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link, Redirect, useParams } from \"react-router-dom\";\r\nimport FindMembers from \"./FindMembers/FindMembers.jsx\";\r\nimport ProfileHeader from \"./ProfileHeader/ProfileHeader.jsx\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo.jsx\";\r\nimport MatchHistory from \"./MatchHistory/MatchHistory.jsx\";\r\nimport NavBar from \"../Main/NavBar/NavBar.jsx\";\r\nimport callAPI from \"../App/callAPI.js\";\r\n\r\nconst Home = (props) => {\r\n  const dispatch = useDispatch();\r\n  const { name } = useParams();\r\n  const [error, setError] = useState(null);\r\n  const [redirect, setRedirect] = useState(false);\r\n  const loginError = useSelector((state) => state.appState.loginError);\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n\r\n  useEffect(async () => {\r\n    try {\r\n      if (loginError) return;\r\n      let response;\r\n      setWaitForResponse(true);\r\n      if (!name) response = await callAPI(\"GET\", \"api/user\");\r\n      else\r\n        response = await callAPI(\"POST\", \"api/user\", {\r\n          username: name,\r\n        });\r\n      setWaitForResponse(false);\r\n      const { user, message } = response;\r\n      if (user) {\r\n        dispatch({ type: \"setPlayerInfo\", value: user });\r\n        if (user.lang) dispatch({ type: \"setLang\", value: user.lang });\r\n      } else if (message) dispatch({ type: \"setLoginError\", value: message });\r\n      else if (!user && !playerInfo) {\r\n        setRedirect(true);\r\n      }\r\n    } catch (err) {\r\n      dispatch({ type: \"setLoginError\", value: err.message });\r\n    }\r\n  }, []);\r\n\r\n  if (redirect) return <Redirect to=\"/\" />;\r\n  if (loginError) return <Redirect to=\"/signin\" />;\r\n  if (!playerInfo || waitForResponse)\r\n    return (\r\n      <Spinner animation=\"border\" variant=\"secondary\" className=\"spinner\" />\r\n    );\r\n\r\n  return (\r\n    <Container fluid>\r\n      <NavBar\r\n        setWaitForResponse={setWaitForResponse}\r\n        setRedirect={setRedirect}\r\n      />\r\n      <Row className=\"home-row mt-3\">\r\n        <p\r\n          className=\"upload-pic-err\"\r\n          style={{ display: error ? \"block\" : \" none\" }}\r\n        >\r\n          <i\r\n            className=\"fas fa-times\"\r\n            onClick={() => {\r\n              setError(null);\r\n            }}\r\n          ></i>\r\n          {error}\r\n        </p>\r\n        <Col\r\n          lg={{ span: 8 }}\r\n          md={{ span: 9 }}\r\n          sm={{ span: 11 }}\r\n          className=\"profile-info-container\"\r\n        >\r\n          <ProfileHeader\r\n            setError={setError}\r\n            playerInfo={playerInfo}\r\n            viewOthersProfile={Boolean(name)}\r\n          />\r\n          <ProfileInfo playerInfo={playerInfo} />\r\n          <MatchHistory\r\n            playerInfo={playerInfo}\r\n            viewOthersProfile={Boolean(name)}\r\n          />\r\n        </Col>\r\n        <Col\r\n          lg={{ span: 4 }}\r\n          md={{ span: 9 }}\r\n          sm={{ span: 11 }}\r\n          className=\"find-players-container\"\r\n        >\r\n          <FindMembers playerInfo={playerInfo} />\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Form, Container, Row, Col, InputGroup, Spinner, Button } from 'react-bootstrap';\r\nimport NavBar from '../Main/NavBar/NavBar.jsx';\r\nimport './Settings.scss';\r\nimport callAPI from '../App/callAPI.js';\r\nimport useValidateInput from '../Signup/useValidateInput.js';\r\nimport ProfileHeader from '../Home/ProfileHeader/ProfileHeader.jsx';\r\n\r\nconst Settings = () => {\r\n  const dispatch = useDispatch();\r\n  const playerInfo = useSelector((state) => state.appState.playerInfo);\r\n  const lang = useSelector((state) => state.appState.lang);\r\n  const [buttonText, setButtonText] = useState(lang === 'English' ? 'Save' : 'Lưu');\r\n  const [uploadErr, setUploadErr] = useState(null);\r\n  const [waitForServer, setWaitForServer] = useState(false);\r\n  const validateInput = useValidateInput(false, true, lang);\r\n  const [waitForResponse, setWaitForResponse] = useState(false);\r\n\r\n  const getChanges = () => {\r\n    const changes = {};\r\n    const { username, email, lastname, firstname } = validateInput;\r\n    if (playerInfo.username !== username) changes['username'] = username;\r\n    if (playerInfo.email.value !== '' && playerInfo.email.value !== email) {\r\n      changes['email'] = { value: email, verified: false };\r\n    }\r\n    changes['name.lastname'] = lastname;\r\n    changes['name.firstname'] = firstname;\r\n    if (validateInput.password) changes['password'] = validateInput.password;\r\n    return changes;\r\n  };\r\n\r\n  const handleSaveChange = async (event) => {\r\n    try {\r\n      event.preventDefault();\r\n      if (waitForServer) return;\r\n      setUploadErr('');\r\n      validateInput.setError(null);\r\n      const { password, confirmPassword } = validateInput;\r\n      const missingField = validateInput.handleMissingField(!playerInfo.email.value);\r\n      if (password !== confirmPassword) {\r\n        validateInput.setConfirmPasswordMess(\r\n          lang === 'English' ? \"Password doesn't match\" : 'Mật khẩu không khớp',\r\n        );\r\n        return;\r\n      }\r\n      if (\r\n        !missingField &&\r\n        !validateInput.invalidEmailMess &&\r\n        !validateInput.invalidPasswordMess &&\r\n        !validateInput.invalidUsernameMess &&\r\n        !validateInput.confirmPasswordMess\r\n      ) {\r\n        const changes = getChanges();\r\n        setWaitForServer(true);\r\n        const { user, message, ok } = await callAPI('POST', 'api/signup/settings', {\r\n          changes: changes,\r\n          currentPassword: validateInput.currentPassword,\r\n          user: playerInfo.username,\r\n        });\r\n        setWaitForServer(false);\r\n        if (user) {\r\n          dispatch({ type: 'setPlayerInfo', value: user });\r\n          setButtonText(\r\n            lang === 'English'\r\n              ? 'Your settings have been saved.'\r\n              : 'Thay đổi của bạn đã được lưu',\r\n          );\r\n          setTimeout(() => {\r\n            setButtonText(lang === 'English' ? 'Save' : 'Lưu');\r\n          }, 1000);\r\n        } else if (message) validateInput.handleError(ok, message);\r\n      }\r\n    } catch (err) {\r\n      setWaitForServer(false);\r\n      setUploadErr(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (playerInfo) {\r\n      const { username, email, name } = playerInfo;\r\n      validateInput.setUsername(username ? username : '');\r\n      validateInput.setEmail(email.value ? email.value : '');\r\n      validateInput.setLastname(name.lastname ? name.lastname : '');\r\n      validateInput.setFirstname(name.firstname ? name.firstname : '');\r\n    }\r\n  }, []);\r\n\r\n  if (!playerInfo) return <Redirect to='/' />;\r\n\r\n  if (waitForResponse)\r\n    return <Spinner animation='border' variant='secondary' className='spinner' />;\r\n\r\n  return (\r\n    <Container fluid className='settings-container'>\r\n      <NavBar setWaitForResponse={setWaitForResponse} />\r\n      <Row className='home-row mt-3'>\r\n        <p\r\n          className='upload-pic-err'\r\n          style={{\r\n            display: uploadErr || validateInput.error ? 'block' : ' none',\r\n          }}\r\n        >\r\n          <i\r\n            className='fas fa-times'\r\n            onClick={() => {\r\n              validateInput.setError(null);\r\n              setUploadErr(null);\r\n            }}\r\n          ></i>\r\n          {uploadErr ? uploadErr : validateInput.error}\r\n        </p>\r\n        <Col xs={11} md={7}>\r\n          <ProfileHeader setError={setUploadErr} setting={true} playerInfo={playerInfo} />\r\n          <Form\r\n            className='mt-3 mb-3 settings-form'\r\n            method='POST'\r\n            onSubmit={handleSaveChange}\r\n          >\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                {lang === 'English' ? 'Username' : 'Tên tài khoản'}\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <InputGroup hasValidation>\r\n                  <Form.Control\r\n                    type='text'\r\n                    value={validateInput.username}\r\n                    onChange={validateInput.handleUsernameChange}\r\n                    isInvalid={validateInput.invalidUsernameMess !== ''}\r\n                  />\r\n                  <Form.Control.Feedback type='invalid'>\r\n                    {validateInput.invalidUsernameMess}\r\n                  </Form.Control.Feedback>\r\n                </InputGroup>\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                Email\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <InputGroup hasValidation>\r\n                  <Form.Control\r\n                    type='email'\r\n                    value={validateInput.email}\r\n                    onChange={validateInput.handleEmailChange}\r\n                    isInvalid={validateInput.invalidEmailMess !== ''}\r\n                  />\r\n                  <Form.Control.Feedback type='invalid'>\r\n                    {validateInput.invalidEmailMess}\r\n                  </Form.Control.Feedback>\r\n                </InputGroup>\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                {lang === 'English' ? 'Firstname' : 'Họ'}\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <Form.Control\r\n                  type='text'\r\n                  value={validateInput.firstname}\r\n                  onChange={validateInput.handleFirstnameChange}\r\n                />\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                {lang === 'English' ? 'Lastname' : 'Tên'}\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <Form.Control\r\n                  type='text'\r\n                  value={validateInput.lastname}\r\n                  onChange={validateInput.handleLastnameChange}\r\n                />\r\n              </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                {lang === 'English' ? 'Current Password' : 'Mật khẩu hiện tại'}\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <InputGroup hasValidation>\r\n                  <Form.Control\r\n                    type='password'\r\n                    value={validateInput.currentPassword}\r\n                    onChange={validateInput.handleCurrentPasswordChange}\r\n                    isInvalid={validateInput.invalidCurrentPassword !== ''}\r\n                  />\r\n                  <Form.Control.Feedback type='invalid'>\r\n                    {validateInput.invalidCurrentPassword}\r\n                  </Form.Control.Feedback>\r\n                </InputGroup>\r\n              </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                {lang === 'English' ? 'New Password' : 'Mật khẩu mới'}\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <InputGroup hasValidation className='password-group'>\r\n                  <Form.Control\r\n                    type={validateInput.showPassword ? 'text' : 'password'}\r\n                    value={validateInput.password}\r\n                    isInvalid={validateInput.invalidPasswordMess !== ''}\r\n                    onChange={validateInput.handlePasswordChange}\r\n                  />\r\n                  <Form.Control.Feedback type='invalid'>\r\n                    {validateInput.invalidPasswordMess}\r\n                  </Form.Control.Feedback>\r\n                  <button\r\n                    className='toggle-password'\r\n                    type='button'\r\n                    style={{\r\n                      display: validateInput.invalidPasswordMess ? 'none' : 'inline',\r\n                    }}\r\n                    onClick={() => {\r\n                      validateInput.setShowPassword(!validateInput.showPassword);\r\n                    }}\r\n                  >\r\n                    {validateInput.showPassword ? 'Hide' : 'Show'}\r\n                  </button>\r\n                </InputGroup>\r\n              </Col>\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Row} className='mt-4 form-group-row'>\r\n              <Form.Label column xs={12} lg={2}>\r\n                {lang === 'English' ? 'Confirm New Password' : 'Xác nhận mật khẩu mới'}\r\n              </Form.Label>\r\n              <Col sm={12} lg={10}>\r\n                <InputGroup hasValidation>\r\n                  <Form.Control\r\n                    type='password'\r\n                    value={validateInput.confirmPassword}\r\n                    onChange={validateInput.handleConfirmPasswordChange}\r\n                    isInvalid={validateInput.confirmPasswordMess !== ''}\r\n                  />\r\n                  <Form.Control.Feedback type='invalid'>\r\n                    {validateInput.confirmPasswordMess}\r\n                  </Form.Control.Feedback>\r\n                </InputGroup>\r\n              </Col>\r\n            </Form.Group>\r\n            <Col className='mt-4'>\r\n              <Button type='submit' className='submit-form-button'>\r\n                {waitForServer ? (\r\n                  <Spinner animation='border' variant='dark' />\r\n                ) : (\r\n                  buttonText\r\n                )}\r\n              </Button>\r\n            </Col>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch, useStore } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst useHandleRoutingWhilePlaying = (socket, setMoveTimer) => {\r\n  const store = useStore();\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const foundMatch = store.getState().gameState.foundMatch;\r\n    const opponentInfo = store.getState().gameState.opponentInfo;\r\n    const result = store.getState().gameState.gameResult;\r\n    if (result === undefined) return;\r\n    if (foundMatch && location.pathname !== \"/\" && !result) {\r\n      dispatch({ type: \"setGameResult\", value: \"Lose\" });\r\n      dispatch({\r\n        type: \"setMessage\",\r\n        value: {\r\n          type: \"game result message\",\r\n          winner: `${opponentInfo.playername} Won - `,\r\n          reason: \"Game Abandoned\",\r\n          className: \"game-message\",\r\n        },\r\n      });\r\n      setMoveTimer(null, true, dispatch);\r\n      socket.emit(\"gameFinish\", [\"Won\", \"Game Abandoned\"]);\r\n    }\r\n  }, [location]);\r\n};\r\n\r\nexport default useHandleRoutingWhilePlaying;\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport SignIn from '../SignIn/SignIn.jsx';\r\nimport Main from '../Main/Main.jsx';\r\nimport Signup from '../Signup/Signup.jsx';\r\nimport VerifyEmail from '../VerifyEmail/VerifyEmail.jsx';\r\nimport Home from '../Home/Home.jsx';\r\nimport Settings from '../Settings/Settings.jsx';\r\n\r\nimport {\r\n  SocketContext,\r\n  SetMoveTimerContext,\r\n  setMoveTimer,\r\n  AuthenticateUserContext,\r\n  authenticateUser,\r\n  socket,\r\n} from './context.js';\r\nimport useHandleRoutingWhilePlaying from './useHandleRoutingWhilePlaying.js';\r\n\r\nfunction App() {\r\n  useHandleRoutingWhilePlaying(socket, setMoveTimer);\r\n\r\n  return (\r\n    <SocketContext.Provider value={socket}>\r\n      <SetMoveTimerContext.Provider value={setMoveTimer}>\r\n        <AuthenticateUserContext.Provider value={authenticateUser}>\r\n          <Switch>\r\n            <Route path='/signin'>\r\n              <SignIn />\r\n            </Route>\r\n            <Route path='/signup'>\r\n              <Signup />\r\n            </Route>\r\n            <Route path='/verify-email'>\r\n              <VerifyEmail />\r\n            </Route>\r\n            <Route path='/home/:name'>\r\n              <Home />\r\n            </Route>\r\n            <Route path='/home'>\r\n              <Home />\r\n            </Route>\r\n            <Route path='/settings'>\r\n              <Settings />\r\n            </Route>\r\n            <Route path='/'>\r\n              <Main />\r\n            </Route>\r\n          </Switch>\r\n        </AuthenticateUserContext.Provider>\r\n      </SetMoveTimerContext.Provider>\r\n    </SocketContext.Provider>\r\n  );\r\n}\r\n\r\nexport { App };\r\n","const advisorRules = [\r\n  [1, 1],\r\n  [1, -1],\r\n  [-1, 1],\r\n  [-1, -1],\r\n];\r\n\r\nexport default advisorRules;\r\n","import Piece from \"./piece.js\";\r\nimport advisorRules from \"./move_rules/advisorRules.js\";\r\n\r\nclass Advisor extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = advisorRules;\r\n    this.minCol = 3;\r\n    this.maxCol = 5;\r\n    this.minRow = this.side === this.choosenSide[0] ? 0 : 7;\r\n    this.maxRow = this.side === this.choosenSide[0] ? 2 : 9;\r\n  }\r\n\r\n  countPiecesBetween(newRow, newCol, board) {\r\n    let [curRow, curCol] = this.position;\r\n    let count = 0;\r\n    do {\r\n      curCol += curCol > newCol ? -1 : 1;\r\n      curRow += curRow > newRow ? -1 : 1;\r\n      if (board[curRow][curCol]) count++;\r\n    } while (curCol !== newCol || curRow !== newRow);\r\n\r\n    return count;\r\n  }\r\n\r\n  canCaptureGeneral() {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default Advisor;\r\n","const generalRules = [\r\n  [1, 0],\r\n  [0, 1],\r\n  [-1, 0],\r\n  [0, -1],\r\n];\r\n\r\nexport default generalRules;\r\n","import Advisor from \"./advisor.js\";\r\nimport generalRules from \"./move_rules/generalRules.js\";\r\n\r\nclass General extends Advisor {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = generalRules;\r\n  }\r\n\r\n  canCaptureGeneral(tmpBoard) {\r\n    let [curRow, curCol] = this.position;\r\n    const tmp = curRow < 3 ? 1 : -1;\r\n    do {\r\n      curRow += tmp;\r\n      if (tmpBoard[curRow][curCol]) {\r\n        if (tmpBoard[curRow][curCol].name.split(\"-\")[0] === \"general\") {\r\n          return tmpBoard[curRow][curCol].translate;\r\n        }\r\n        return false;\r\n      }\r\n    } while (curRow !== 0 && curRow !== 9);\r\n    return false;\r\n  }\r\n\r\n  countPiecesBetween(newRow, newCol, board) {\r\n    let [curRow, curCol] = this.position;\r\n    let count = 0;\r\n    if (newRow === curRow) {\r\n      do {\r\n        curCol += curCol > newCol ? -1 : 1;\r\n        if (board[curRow][curCol]) count++;\r\n      } while (curCol !== newCol);\r\n    } else {\r\n      do {\r\n        curRow += curRow > newRow ? -1 : 1;\r\n        if (board[curRow][curCol]) count++;\r\n      } while (curRow !== newRow);\r\n    }\r\n    return count;\r\n  }\r\n}\r\n\r\nexport default General;\r\n","const cannonRules = [\r\n  [0, 1],\r\n  [0, 2],\r\n  [0, 3],\r\n  [0, 4],\r\n  [0, 5],\r\n  [0, 6],\r\n  [0, 7],\r\n  [0, 8],\r\n  [0, -1],\r\n  [0, -2],\r\n  [0, -3],\r\n  [0, -4],\r\n  [0, -5],\r\n  [0, -6],\r\n  [0, -7],\r\n  [0, -8],\r\n  [1, 0],\r\n  [2, 0],\r\n  [3, 0],\r\n  [4, 0],\r\n  [5, 0],\r\n  [6, 0],\r\n  [7, 0],\r\n  [8, 0],\r\n  [9, 0],\r\n  [-1, 0],\r\n  [-2, 0],\r\n  [-3, 0],\r\n  [-4, 0],\r\n  [-5, 0],\r\n  [-6, 0],\r\n  [-7, 0],\r\n  [-8, 0],\r\n  [-9, 0],\r\n];\r\n\r\nexport default cannonRules;\r\n","import Piece from \"./piece.js\";\r\nimport cannonRules from \"./move_rules/cannonRules.js\";\r\n\r\nclass Cannon extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = cannonRules;\r\n  }\r\n\r\n  canMoveToNewPosition(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    if (this.side === this.choosenSide[1]) {\r\n      const isValid = this.checkValidMove(newRow, newCol, board);\r\n      if (isValid && !/translate/.test(isValid)) {\r\n        if (!board[newRow][newCol].side) {\r\n          if (this.countPiecesBetween(newRow, newCol, board) === 0) return true;\r\n        } else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n          if (this.countPiecesBetween(newRow, newCol, board) === 2) {\r\n            return \"capture\";\r\n          }\r\n      } else if (isValid) return isValid;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  canCaptureGeneral(tmpBoard) {\r\n    const [curRow, curCol] = this.position;\r\n    for (let move of this.moves) {\r\n      const [newRow, newCol] = [curRow + move[0], curCol + move[1]];\r\n      if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\r\n        if (tmpBoard[newRow][newCol].side)\r\n          if (tmpBoard[newRow][newCol].side !== tmpBoard[curRow][curCol].side)\r\n            if (this.countPiecesBetween(newRow, newCol, tmpBoard) === 2)\r\n              if (tmpBoard[newRow][newCol].name.split(\"-\")[0] === \"general\") {\r\n                return tmpBoard[newRow][newCol].translate;\r\n              }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default Cannon;\r\n","const elephantRules = [\r\n  [-2, -2],\r\n  [2, 2],\r\n  [-2, 2],\r\n  [2, -2],\r\n];\r\n\r\nexport default elephantRules;\r\n","import Piece from \"./piece.js\";\r\nimport elephantRules from \"./move_rules/elephantRules.js\";\r\n\r\nclass Elephant extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = elephantRules;\r\n    this.maxRow = this.side === this.choosenSide[0] ? 4 : 9;\r\n    this.minRow = this.side === this.choosenSide[0] ? 0 : 5;\r\n  }\r\n\r\n  countPiecesBetween(newRow, newCol, board) {\r\n    let [curRow, curCol] = this.position;\r\n    let count = 0;\r\n    do {\r\n      curCol += curCol > newCol ? -1 : 1;\r\n      curRow += curRow > newRow ? -1 : 1;\r\n      if (board[curRow][curCol]) count++;\r\n    } while (curCol !== newCol || curRow !== newRow);\r\n\r\n    return count;\r\n  }\r\n\r\n  canCaptureGeneral() {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default Elephant;\r\n","const chariotRules = [\r\n  [0, 1],\r\n  [0, 2],\r\n  [0, 3],\r\n  [0, 4],\r\n  [0, 5],\r\n  [0, 6],\r\n  [0, 7],\r\n  [0, 8],\r\n  [0, -1],\r\n  [0, -2],\r\n  [0, -3],\r\n  [0, -4],\r\n  [0, -5],\r\n  [0, -6],\r\n  [0, -7],\r\n  [0, -8],\r\n  [1, 0],\r\n  [2, 0],\r\n  [3, 0],\r\n  [4, 0],\r\n  [5, 0],\r\n  [6, 0],\r\n  [7, 0],\r\n  [8, 0],\r\n  [9, 0],\r\n  [-1, 0],\r\n  [-2, 0],\r\n  [-3, 0],\r\n  [-4, 0],\r\n  [-5, 0],\r\n  [-6, 0],\r\n  [-7, 0],\r\n  [-8, 0],\r\n  [-9, 0],\r\n];\r\n\r\nexport default chariotRules;\r\n","import Piece from \"./piece.js\";\r\nimport chariotRules from \"./move_rules/chariotRules.js\";\r\n\r\nclass Chariot extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = chariotRules;\r\n  }\r\n}\r\n\r\nexport default Chariot;\r\n","const horseRules = [\r\n  [2, 1],\r\n  [2, -1],\r\n  [-2, 1],\r\n  [-2, -1],\r\n  [1, 2],\r\n  [-1, 2],\r\n  [1, -2],\r\n  [-1, -2],\r\n];\r\n\r\nexport default horseRules;\r\n","import horseRules from \"./move_rules/horseRules.js\";\r\nimport Piece from \"./piece.js\";\r\n\r\nclass Horse extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves = horseRules;\r\n  }\r\n\r\n  canMoveToNewPosition(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [translateX, translateY] = [curCol * this.width, curRow * this.width];\r\n    this.translate = `translate(${translateX}, ${translateY})`;\r\n    if (this.side === this.choosenSide[1]) {\r\n      const isValid = this.checkValidMove(newRow, newCol, board);\r\n      if (isValid && !/translate/.test(isValid)) {\r\n        if (!this.isBlocked(newRow, newCol, board)) {\r\n          if (!board[newRow][newCol].side) {\r\n            return true;\r\n          } else if (board[newRow][newCol].side !== board[curRow][curCol].side)\r\n            return \"capture\";\r\n        }\r\n      } else if (isValid) return isValid;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isBlocked(newRow, newCol, board) {\r\n    const [curRow, curCol] = this.position;\r\n    const [moveRow, moveCol] = [newRow - curRow, newCol - curCol];\r\n    if (Math.abs(moveRow) === 2) {\r\n      return board[curRow + moveRow / 2][curCol];\r\n    } else {\r\n      return board[curRow][curCol + moveCol / 2];\r\n    }\r\n  }\r\n\r\n  canCaptureGeneral(tmpBoard) {\r\n    const [curRow, curCol] = this.position;\r\n    for (let move of this.moves) {\r\n      const [newRow, newCol] = [curRow + move[0], curCol + move[1]];\r\n      if (newCol >= 0 && newCol < 9 && newRow >= 0 && newRow < 10) {\r\n        if (tmpBoard[newRow][newCol].side)\r\n          if (tmpBoard[newRow][newCol].side !== tmpBoard[curRow][curCol].side)\r\n            if (!this.isBlocked(newRow, newCol, tmpBoard))\r\n              if (tmpBoard[newRow][newCol].name.split(\"-\")[0] === \"general\") {\r\n                return tmpBoard[newRow][newCol].translate;\r\n              }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default Horse;\r\n","const soliderRules = [[[1, 0]], [[-1, 0]]];\r\n\r\nexport default soliderRules;\r\n","import Piece from \"./piece.js\";\r\nimport soliderRules from \"./move_rules/soldierRules.js\";\r\n\r\nclass Soldier extends Piece {\r\n  constructor(width, row, col, name, choosenSide) {\r\n    super(width, row, col, name, choosenSide);\r\n    this.moves =\r\n      choosenSide[0] === this.side\r\n        ? [...soliderRules[0]]\r\n        : [...soliderRules[1]];\r\n  }\r\n\r\n  setPosition(capture, newRow, newCol) {\r\n    const [translateX, translateY] = [newCol * this.width, newRow * this.width];\r\n    const translate = `translate(${translateX}, ${translateY})`;\r\n    this.position = [newRow, newCol];\r\n    this.translate = translate;\r\n    if (this.side === this.choosenSide[0]) {\r\n      if (this.position[0] > 4) this.crossRiver();\r\n    } else if (this.position[0] < 5) this.crossRiver();\r\n    return [capture === \"capture\", newRow, newCol];\r\n  }\r\n\r\n  crossRiver() {\r\n    this.moves.push([0, 1]);\r\n    this.moves.push([0, -1]);\r\n  }\r\n}\r\n\r\nexport default Soldier;\r\n","import Advisor from \"./advisor.js\";\r\nimport General from \"./general.js\";\r\nimport Cannon from \"./cannon.js\";\r\nimport Elephant from \"./elephant.js\";\r\nimport Chariot from \"./chariot.js\";\r\nimport Horse from \"./horse.js\";\r\nimport Solider from \"./soldier.js\";\r\n\r\nconst instantiatePiece = (width, row, col, name, choosenSide) => {\r\n  const pieceName = name.split(\"-\")[0];\r\n  switch (pieceName) {\r\n    case \"advisor\":\r\n      return new Advisor(width, row, col, name, choosenSide);\r\n    case \"general\":\r\n      return new General(width, row, col, name, choosenSide);\r\n    case \"cannon\":\r\n      return new Cannon(width, row, col, name, choosenSide);\r\n    case \"soldier\":\r\n      return new Solider(width, row, col, name, choosenSide);\r\n    case \"chariot\":\r\n      return new Chariot(width, row, col, name, choosenSide);\r\n    case \"horse\":\r\n      return new Horse(width, row, col, name, choosenSide);\r\n    default:\r\n      return new Elephant(width, row, col, name, choosenSide);\r\n  }\r\n};\r\n\r\nexport default instantiatePiece;\r\n","import instantiatePiece from \"../../../../pieces/instantiatePiece.js\";\r\n\r\nconst getInitialPosition = (side) => {\r\n  return {\r\n    \"0,0\": `chariot-${side[0]}`,\r\n    \"0,1\": `horse-${side[0]}`,\r\n    \"0,2\": `elephant-${side[0]}`,\r\n    \"0,3\": `advisor-${side[0]}`,\r\n    \"0,4\": `general-${side[0]}`,\r\n    \"0,5\": `advisor-${side[0]}`,\r\n    \"0,6\": `elephant-${side[0]}`,\r\n    \"0,7\": `horse-${side[0]}`,\r\n    \"0,8\": `chariot-${side[0]}`,\r\n    \"2,1\": `cannon-${side[0]}`,\r\n    \"2,7\": `cannon-${side[0]}`,\r\n    \"3,0\": `soldier-${side[0]}`,\r\n    \"3,2\": `soldier-${side[0]}`,\r\n    \"3,4\": `soldier-${side[0]}`,\r\n    \"3,6\": `soldier-${side[0]}`,\r\n    \"3,8\": `soldier-${side[0]}`,\r\n    \"6,0\": `soldier-${side[1]}`,\r\n    \"6,2\": `soldier-${side[1]}`,\r\n    \"6,4\": `soldier-${side[1]}`,\r\n    \"6,6\": `soldier-${side[1]}`,\r\n    \"6,8\": `soldier-${side[1]}`,\r\n    \"7,1\": `cannon-${side[1]}`,\r\n    \"7,7\": `cannon-${side[1]}`,\r\n    \"9,0\": `chariot-${side[1]}`,\r\n    \"9,1\": `horse-${side[1]}`,\r\n    \"9,2\": `elephant-${side[1]}`,\r\n    \"9,3\": `advisor-${side[1]}`,\r\n    \"9,4\": `general-${side[1]}`,\r\n    \"9,5\": `advisor-${side[1]}`,\r\n    \"9,6\": `elephant-${side[1]}`,\r\n    \"9,7\": `horse-${side[1]}`,\r\n    \"9,8\": `chariot-${side[1]}`,\r\n  };\r\n};\r\n\r\nconst initializeBoard = (width, side) => {\r\n  const initialBoard = [\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n  ];\r\n\r\n  const initialPosition = getInitialPosition(side);\r\n  for (let i = 0; i < 10; i++)\r\n    for (let j = 0; j < 9; j++) {\r\n      const pieceName = initialPosition[[i, j].toString()];\r\n      if (pieceName) {\r\n        initialBoard[i][j] = instantiatePiece(width, i, j, pieceName, side);\r\n      }\r\n    }\r\n  return initialBoard;\r\n};\r\n\r\nexport default initializeBoard;\r\n","import initializeBoard from \"../Components/Main/Game/Board/initializeBoard.js\";\r\n\r\nconst defaultState = {\r\n  board: initializeBoard(520 / 9, [\"red\", \"black\"]),\r\n  targetDisplay: \"none\",\r\n  targetTranslate: \"translate(0, 0)\",\r\n  boardSize: [520, 520 / (521 / 577)],\r\n  currentPiece: null,\r\n  getClicked: false,\r\n  draggable: false,\r\n  capturedPieces: [],\r\n  turnToMove: false,\r\n  side: [\"red\", \"black\"],\r\n};\r\n\r\nconst boardReducer = (state = defaultState, action) => {\r\n  const newState = Object.assign({}, state);\r\n  const { type, value } = action;\r\n  switch (type) {\r\n    case \"setBoard\":\r\n      newState.board = value;\r\n      return newState;\r\n    case \"setTargetDisplay\":\r\n      newState.targetDisplay = value;\r\n      return newState;\r\n    case \"setTargetTranslate\":\r\n      newState.targetTranslate = value;\r\n      return newState;\r\n    case \"setBoardSize\":\r\n      newState.boardSize = value;\r\n      return newState;\r\n    case \"setCurrentPiece\":\r\n      newState.currentPiece = value;\r\n      return newState;\r\n    case \"setGetClicked\":\r\n      newState.getClicked = value;\r\n      return newState;\r\n    case \"setDraggable\":\r\n      newState.draggable = value;\r\n      return newState;\r\n    case \"setCapturedPieces\":\r\n      const newCapturedPieces = [...newState.capturedPieces];\r\n      newCapturedPieces.push(value);\r\n      newState.capturedPieces = newCapturedPieces;\r\n      return newState;\r\n    case \"setTurnToMove\":\r\n      newState.turnToMove = value;\r\n      return newState;\r\n    case \"switchSide\":\r\n      const width = +document.querySelector(\".board-container\").offsetWidth;\r\n      newState.board = initializeBoard(width / 9, value);\r\n      newState.side = value;\r\n      return newState;\r\n    case \"resetBoardState\":\r\n      defaultState.board = initializeBoard(value / 9, [\"red\", \"black\"]);\r\n      defaultState.boardSize = [value, value / (521 / 577)];\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default boardReducer;\r\n","const gameReducer = (\r\n  state = {\r\n    lang: \"English\",\r\n    isAuthenticated: false,\r\n    playerInfo: null,\r\n    loginError: null,\r\n  },\r\n  action\r\n) => {\r\n  const newState = Object.assign({}, state);\r\n  const { type, value } = action;\r\n  switch (type) {\r\n    case \"setLoginError\":\r\n      newState.loginError = value;\r\n      return newState;\r\n    case \"setPlayerInfo\":\r\n      newState.playerInfo = value;\r\n      return newState;\r\n    case \"setLang\":\r\n      newState.lang = value;\r\n      return newState;\r\n    case \"setIsAuthenticated\":\r\n      newState.isAuthenticated = value;\r\n      return newState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default gameReducer;\r\n","const defaultState = {\r\n  findingMatch: \"Play\",\r\n  foundMatch: false,\r\n  time: 10,\r\n  opponentTimeLeftToMove: 10 * 60,\r\n  playerTimeLeftToMove: 10 * 60,\r\n  pause: false,\r\n  pauseTime: 25 * 60,\r\n  receiveDrawOffer: false,\r\n  messages: [],\r\n  opponentInfo: {\r\n    playername: \"Opponent\",\r\n    photo:\r\n      \"https://betacssjs.chesscomfiles.com/bundles/web/images/black_400.918cdaa6.png\",\r\n  },\r\n  gameResult: null,\r\n  gameResultDisplay: \"flex\",\r\n};\r\n\r\nconst gameReducer = (state = defaultState, action) => {\r\n  const newState = Object.assign({}, state);\r\n  const { type, value } = action;\r\n  switch (type) {\r\n    case \"setOpponentInfo\":\r\n      newState.opponentInfo = value;\r\n      return newState;\r\n    case \"setPauseTime\":\r\n      if (value === \"restart\") newState.pauseTime = 25 * 60;\r\n      else if (value === \"timeout\") newState.pauseTime = 5;\r\n      else newState.pauseTime -= 1;\r\n      return newState;\r\n    case \"setGameResult\":\r\n      newState.gameResult = value;\r\n      return newState;\r\n    case \"setFindingMatch\":\r\n      newState.findingMatch = value;\r\n      return newState;\r\n    case \"setFoundMatch\":\r\n      newState.foundMatch = value;\r\n      return newState;\r\n    case \"setTime\":\r\n      newState.time = value;\r\n      newState.playerTimeLeftToMove = value * 60;\r\n      newState.opponentTimeLeftToMove = value * 60;\r\n      return newState;\r\n    case \"setPlayerTimeLeftToMove\":\r\n      if (value === \"restart\")\r\n        newState.playerTimeLeftToMove = newState.time * 60;\r\n      else newState.playerTimeLeftToMove -= 1;\r\n      return newState;\r\n    case \"setOpponentTimeLeftToMove\":\r\n      if (value === \"restart\")\r\n        newState.opponentTimeLeftToMove = newState.time * 60;\r\n      else newState.opponentTimeLeftToMove -= 1;\r\n      return newState;\r\n    case \"setPause\":\r\n      newState.pause = value;\r\n      return newState;\r\n    case \"setReceiveDrawOffer\":\r\n      newState.receiveDrawOffer = value;\r\n      return newState;\r\n    case \"setMessage\":\r\n      const newMessages = [...newState.messages];\r\n      newMessages.push(value);\r\n      newState.messages = newMessages;\r\n      return newState;\r\n    case \"setGameResultDisplay\":\r\n      newState.gameResultDisplay = value;\r\n      return newState;\r\n    case \"resetGameState\":\r\n      return defaultState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default gameReducer;\r\n","import boardReducer from \"./boardReducer.js\";\r\nimport appReducer from \"./appReducer.js\";\r\nimport { combineReducers } from \"redux\";\r\nimport gameReducer from \"./gameReducer.js\";\r\n\r\nconst rootReducer = combineReducers({\r\n  boardState: boardReducer,\r\n  appState: appReducer,\r\n  gameState: gameReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './Components/App/App.jsx';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport { batchedSubscribe } from 'redux-batched-subscribe';\nimport { debounce } from 'lodash';\nimport rootReducer from './reducer/rootReducer.js';\n\nconst debounceNotify = debounce((notify) => notify());\nconst store = createStore(rootReducer, batchedSubscribe(debounceNotify));\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}