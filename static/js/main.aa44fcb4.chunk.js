(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{109:function(e,t,n){},145:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t),n.d(t,"baseURL",(function(){return jt}));var a=n(1),s=n.n(a),c=n(25),r=n.n(c),i=(n(109),n(14)),o=n(10),l=n.n(o),u=n(12),j=n(4),d=n(96),h="".concat(jt,"/play");console.log(h);var m=Object(d.io)(h,{autoConnect:!1,withCredentials:!0,transports:["websocket","polling"],rememberUpgrade:!0}),b=s.a.createContext(),p=s.a.createContext(),f=s.a.createContext(),O=function(e,t,n){m.guest&&m.disconnect(),m.guest=t.guest,e({type:"resetBoardState",value:520}),e({type:"resetGameState"}),e({type:"setIsAuthenticated",value:!t.guest||"guest"}),e({type:"setPlayerInfo",value:t}),t.lang&&e({type:"setLang",value:t.lang}),m.auth={player:{playername:t.username,guest:t.guest,photo:t.photo},opponentID:n},m.connect()},g=function(e,t,n){m.removeAllListeners("oneSecondPass"),t?(n({type:"setPause",value:null}),n({type:"setPauseTime",value:"restart"}),n({type:"setOpponentTimeLeftToMove",value:"restart"}),n({type:"setPlayerTimeLeftToMove",value:"restart"}),n({type:"setTurnToMove",value:!1})):(n(e?{type:"setOpponentTimeLeftToMove",value:"restart"}:{type:"setPlayerTimeLeftToMove",value:"restart"}),m.emit("startTimer",!0),m.on("oneSecondPass",(function(){n(e?{type:"setPlayerTimeLeftToMove",value:null}:{type:"setOpponentTimeLeftToMove",value:null})})))},v=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,s){var c,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"POST"!==t){e.next=8;break}return r={method:"POST",credentials:"include",headers:s?{}:{"Content-Type":"application/json"},body:s?a:JSON.stringify(a)},e.next=5,fetch("".concat(jt,"/").concat(n),r);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,fetch("".concat(jt,"/").concat(n),{credentials:"include"});case 10:c=e.sent;case 11:return e.next=13,c.json();case 13:return(i=e.sent).ok=c.ok,e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n,a,s){return e.apply(this,arguments)}}(),x=function(e,t,n){var s=Object(a.useState)(""),c=Object(j.a)(s,2),r=c[0],i=c[1],o=Object(a.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],h=Object(a.useState)(""),m=Object(j.a)(h,2),b=m[0],p=m[1],f=Object(a.useState)(null),O=Object(j.a)(f,2),g=O[0],v=O[1],x=Object(a.useState)(""),y=Object(j.a)(x,2),w=y[0],S=y[1],k=Object(a.useState)(""),C=Object(j.a)(k,2),N=C[0],T=C[1],E=Object(a.useState)(""),P=Object(j.a)(E,2),M=P[0],I=P[1],L=Object(a.useState)(""),D=Object(j.a)(L,2),G=D[0],R=D[1],A=Object(a.useState)(""),B=Object(j.a)(A,2),F=B[0],W=B[1],V=Object(a.useState)(""),H=Object(j.a)(V,2),U=H[0],q=H[1],_=Object(a.useState)(""),X=Object(j.a)(_,2),K=X[0],z=X[1],J=Object(a.useState)(!1),Y=Object(j.a)(J,2),Z=Y[0],Q=Y[1],$=Object(a.useState)(""),ee=Object(j.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),se=Object(j.a)(ae,2),ce=se[0],re=se[1];return{handleEmailChange:function(e){var t=e.target.value;!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9_.\-]+$/.test(t)||/\.\./.test(t)?d("English"===n?"Invalid email address":"\u0110\u1ecba ch\u1ec9 email kh\xf4ng h\u1ee3p l\u1ec7"):d(""),I(t)},handleError:function(a,s){if(a)if(/Email/.test(s)&&!e)d("English"===n?s:"Email \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng");else if(/User/.test(s))i("English"===n?s:"T\xean t\xe0i kho\u1ea3n \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng");else if(/Password/.test(s)){var c="English"===n?s:"M\u1eadt kh\u1ea3u kh\xf4ng ch\xednh x\xe1c";t?re(c):p(c)}else v(s);else v(s)},setError:v,handleFirstnameChange:function(e){var t=e.target.value;R(t)},handleLastnameChange:function(e){var t=e.target.value;W(t)},handleMissingField:function(a){var s=0,c="English"===n?"Please fill out this field":"Xin h\xe3y \u0111i\u1ec1n th\xf4ng tin n\xe0y";return w||(s+=1,i(c)),N||t||(s+=1,p(c)),!te&&t&&N&&(s+=1,re(c)),M||e||a||(s+=1,d(c)),0!==s},handleUsernameChange:function(t){var a=t.target.value;!e&&a&&(/[^_a-z0-9-]/i.test(a)||a.length<3||a.length>20)?i("English"===n?"Username must be between 3-20 characters long and use only Latin letters and numbers":"T\xean t\xe0i kho\u1ea3n ph\u1ea3i \u0111\xf3 \u0111\u1ed9 d\xe0i t\u1eeb 3-20 v\xe0 ch\u1ec9 ch\u1ee9a ch\u1eef Latin v\xe0 s\u1ed1."):i(""),S(a)},handlePasswordChange:function(t){var a=t.target.value;!e&&a&&a.length<6?p("English"===n?"Password must be atlest 6 characters":"M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1eadt 6 k\xfd t\u1ef1"):p(""),re(""),z(""),T(a)},confirmPassword:U,setConfirmPassword:q,handleConfirmPasswordChange:function(e){var t=e.currentTarget.value;z(t!==N?"English"===n?"Password doesn't match":"M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp":""),q(t)},confirmPasswordMess:K,setConfirmPasswordMess:z,showPassword:Z,setShowPassword:Q,username:w,setUsername:S,setEmail:I,setLastname:W,setFirstname:R,email:M,password:N,lastname:F,firstname:G,invalidEmailMess:u,invalidPasswordMess:b,invalidUsernameMess:r,error:g,handleCurrentPasswordChange:function(e){var t=e.currentTarget.value;re(""),ne(t)},currentPassword:te,invalidCurrentPassword:ce}},y=n(179),w=n(180),S=n(98),k=n(185),C=n(181),N=n(99),T=n(182),E=n(3),P=n(11),M=(n(145),n(0)),I=function(){var e=Object(E.b)(),t=Object(a.useContext)(f),n=Object(a.useState)(!1),s=Object(j.a)(n,2),c=s[0],r=s[1],o=Object(a.useState)(!1),d=Object(j.a)(o,2),h=d[0],m=d[1],b=Object(a.useState)(!1),p=Object(j.a)(b,2),O=p[0],g=p[1],I=Object(E.c)((function(e){return e.appState.loginError})),L=Object(E.c)((function(e){return e.appState.lang})),D=Object(E.c)((function(e){return e.appState.isAuthenticated})),G=x(!0,!1,L),R=G.setError,A=G.error,B=G.username,F=G.password,W=G.handleError,V=G.handleUsernameChange,H=G.handlePasswordChange,U=G.invalidPasswordMess,q=G.invalidUsernameMess,_=G.handleMissingField,X=function(){var n=Object(u.a)(l.a.mark((function n(a){var s,c,r,i,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a.preventDefault(),!h&&!O){n.next=4;break}return n.abrupt("return");case 4:if(R(""),_()||U||q){n.next=18;break}return R(null),m(!0),n.next=11,v("POST","api/login",{username:B,password:F});case 11:s=n.sent,c=s.message,r=s.user,i=s.ok,o=s.opponentID,m(!1),r?t(e,r,o):W(i,c);case 18:n.next=24;break;case 20:n.prev=20,n.t0=n.catch(0),m(!1),W(!1,n.t0.toString());case 24:case"end":return n.stop()}}),n,null,[[0,20]])})));return function(e){return n.apply(this,arguments)}}(),K=function(){var n=Object(u.a)(l.a.mark((function n(){var a,s,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!h&&!O){n.next=3;break}return n.abrupt("return");case 3:if(R(""),"guest"!==D){n.next=8;break}r(!0),n.next=17;break;case 8:return g(!0),n.next=11,v("GET","api/login-as-guest",null);case 11:a=n.sent,s=a.user,c=a.opponentID,g(!1),r(!0),t(e,s,c);case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(0),g(!1),W(!1,n.t0.toString());case 23:case"end":return n.stop()}}),n,null,[[0,19]])})));return function(){return n.apply(this,arguments)}}();if(I)W(!1,I);else if(D){if("guest"!==D)return Object(M.jsx)(i.a,{to:"/"});if(c)return Object(M.jsx)(i.a,{to:"/"})}return Object(M.jsxs)(y.a,{fluid:!0,children:[Object(M.jsx)("h1",{children:"English"===L?"Xiangqi":"C\u1edd T\u01b0\u1edbng"}),Object(M.jsx)(w.a,{className:"justify-content-center",children:Object(M.jsxs)(S.a,{md:{span:7},sm:{span:7},xs:{span:10},className:"login-component d-flex flex-column  align-items-center",children:[A?Object(M.jsx)("p",{className:"error-message",children:A}):null,Object(M.jsxs)(k.a,{onSubmit:X,method:"POST",children:[Object(M.jsx)(k.a.Group,{controlId:"username-or-email",children:Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"text",isInvalid:""!==q,placeholder:"English"===L?"Username or Email":"T\xean t\xe0i kho\u1ea3n ho\u1eb7c Email",onChange:V,value:B,disabled:h||O}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:q})]})}),Object(M.jsx)(k.a.Group,{controlId:"password",children:Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"password",isInvalid:""!==U,placeholder:"English"===L?"Password":"M\u1eadt Kh\u1ea9u",onChange:H,value:F,disabled:h||O}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:U})]})}),Object(M.jsx)(N.a,{type:"submit",className:"submit-form-button",children:h?Object(M.jsx)(T.a,{animation:"border",variant:"dark"}):"English"===L?"Log In":"\u0110\u0103ng Nh\u1eadp"}),Object(M.jsx)(N.a,{className:"log-in-as-guest",onClick:K,children:O?Object(M.jsx)(T.a,{animation:"border",variant:"dark"}):"English"===L?"Log In As Guest":"Kh\xe1ch"})]}),Object(M.jsxs)("p",{className:"seperator",children:[Object(M.jsx)("span",{}),Object(M.jsx)("span",{className:"seperator-text",children:"English"===L?"or connect with":"ho\u1eb7c \u0111\u0103ng nh\u1eadp v\u1edbi"}),Object(M.jsx)("span",{})]}),Object(M.jsxs)("div",{className:"social-login",children:[Object(M.jsxs)("a",{className:"google",href:"".concat(jt,"/api/auth/google"),children:[Object(M.jsx)("i",{className:"fab fa-google"})," Google"]}),Object(M.jsxs)("a",{className:"facebook",href:"".concat(jt,"/api/auth/facebook"),children:[Object(M.jsx)("i",{className:"fab fa-facebook "})," Facebook"]}),Object(M.jsxs)("a",{className:"github",href:"".concat(jt,"/api/auth/github"),children:[Object(M.jsx)("i",{className:"fab fa-github "})," Github"]})]}),Object(M.jsx)("div",{className:"sign-up-area",children:Object(M.jsx)(P.b,{to:"/signup",children:"English"===L?"Sign Up":"\u0110\u0103ng K\xfd"})})]})})]})},L=n.p+"static/media/board-image.3c95ca99.png",D=(n(149),function(){var e=Object(E.c)((function(e){return e.appState.lang}));return Object(M.jsxs)(w.a,{md:{cols:2},className:"justify-content-around mt-5",children:[Object(M.jsx)(S.a,{className:"image-container",md:{span:4,order:1},xs:{span:10,order:2},children:Object(M.jsx)("img",{src:L,alt:""})}),Object(M.jsxs)(S.a,{className:"intro",md:{span:4,order:2},xs:{span:10,order:1},children:[Object(M.jsx)("h1",{children:"English"===e?"Play Xiangqi Online for Free":"Ch\u01a1i C\u1edd T\u01b0\u1edbng Mi\u1ec5n Ph\xed"}),Object(M.jsx)(P.b,{className:"play-button",to:"/signin",children:"English"===e?"Play":"Ch\u01a1i"})]})]})}),G=n(187),R=n(188),A=n(186),B=n(13),F=n(189),W=n(183),V=function(e,t,n,a){return e.map((function(e,s){var c=e.playername,r=e.photo,i=e.time,o=e.cancelInvite;return Object(M.jsxs)("li",{children:[Object(M.jsx)("div",{className:"image-container",children:Object(M.jsx)("img",{src:r})}),Object(M.jsxs)("div",{className:"name-and-btn-container",children:[Object(M.jsxs)("p",{children:[Object(M.jsx)(F.a,{placement:"top",overlay:Object(M.jsx)(W.a,{id:"sender-name-tooltip",children:c}),children:Object(M.jsx)("span",{id:"player-name",children:c})}),Object(M.jsx)("span",{id:o?"cancel-invite":"invite-text",children:o?"English"===a?" canceled invite":" h\u1ee7y l\u1eddi m\u1eddi":"English"===a?" invites you to a game (".concat(i," min)"):" m\u1eddi b\u1ea1n v\xe0o tr\u1eadn (".concat(i," ph\xfat)")})]}),Object(M.jsxs)("div",{className:"btn-container",children:[Object(M.jsx)(N.a,{onClick:t,className:"accept-invite",playername:c,disabled:o,children:"English"===a?"Accept":"\u0110\u1ed3ng \xdd"}),Object(M.jsx)(N.a,{onClick:n,className:"decline-invite",playername:c,disabled:o,children:"English"===a?"Decline":"T\u1eeb Ch\u1ed1i"})]})]})]},"invite-".concat(s))}))},H=(n(150),function(e){var t=e.lang,n=Object(a.useState)([]),s=Object(j.a)(n,2),c=s[0],r=s[1],i=Object(a.useContext)(b);return Object(a.useEffect)((function(){return i.on("receiveInvite",(function(e,t,n){r((function(a){return e.socketID=t,e.time=n,a.push(e),Object(B.a)(a)})),i.emit("inviteReceived",t)})),i.on("clearInvites",(function(){r([])})),i.on("inviteCanceled",(function(e){var t=c.findIndex((function(t){return t.playername===e.playername}));-1!==t&&(r((function(e){return e[t].cancelInvite=!0,Object(B.a)(e)})),setTimeout((function(){r((function(e){return e.splice(t,1),Object(B.a)(e)}))}),1e3))})),function(){i.removeAllListeners("receiveInvite"),i.removeAllListeners("inviteCanceled"),i.removeAllListeners("clearInvites")}}),[c]),Object(a.useEffect)((function(){return function(){i.emit("declineInvite",null,!0)}}),[]),Object(M.jsx)("ul",{className:"invites-list",children:V(c,(function(e){var t=e.currentTarget.getAttribute("playername"),n=c.findIndex((function(e){return e.playername===t})),a=c[n].socketID;i.emit("acceptInvite",a),r([])}),(function(e){var t=e.currentTarget.getAttribute("playername"),n=c.findIndex((function(e){return e.playername===t}));i.emit("declineInvite",c[n].socketID,!1),r((function(e){return e.splice(n,1),Object(B.a)(e)}))}),t)})}),U=(n(151),function(e){var t=Object(E.b)(),n=Object(a.useContext)(b),s=Object(E.c)((function(e){return e.appState.lang})),c=Object(E.c)((function(e){return e.appState.playerInfo})),r=function(e){var n=e.currentTarget.text;t({type:"setLang",value:n}),c&&v("POST","api/setLang",{username:c.username,choosenLang:n})};Object(a.useEffect)((function(){document.querySelector("title").innerText="English"===s?"Xiangqi":"C\u1edd T\u01b0\u1edbng"}),[s]);var i=Object(E.c)((function(e){return e.appState.isAuthenticated})),o=function(){var a=Object(u.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setWaitForResponse(!0),a.next=3,v("GET","api/logout",null);case 3:t({type:"setIsAuthenticated",value:!1}),t({type:"setPlayerInfo",value:null}),e.setRedirect&&e.setRedirect(!0),n.disconnect();case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(M.jsxs)(G.a,{expand:"md",className:"nav-bar",children:[Object(M.jsx)(H,{lang:s}),Object(M.jsx)(G.a.Brand,{children:Object(M.jsx)(P.b,{to:"/",className:"link-brand",children:"English"===s?"Xiangqi":"C\u1edd T\u01b0\u1edbng"})}),Object(M.jsx)(G.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(M.jsx)(G.a.Collapse,{id:"basic-navbar-nav",children:Object(M.jsxs)(R.a,{className:"nav",children:[e.setRedirect?Object(M.jsx)(P.b,{to:"/",className:"link nav-link",children:"English"===s?"Play":"Ch\u01a1i"}):null,Object(M.jsx)(P.b,{target:"_self",to:"/".concat(i&&"guest"!==i?"home":"signin"),className:"link nav-link",style:{display:e.setRedirect?"none":"inline"},children:i&&"guest"!==i?"English"===s?"Home":"Trang Ch\u1ee7":"English"===s?"Sign In":"\u0110\u0103ng Nh\u1eadp"}),Object(M.jsx)("button",{className:"link nav-link logout",onClick:o,style:{display:i&&"guest"!==i?"inline":"none"},children:"English"===s?"Log Out":"\u0110\u0103ng Xu\u1ea5t"}),Object(M.jsx)(P.b,{to:"/signup",className:"link nav-link ",style:{display:i&&"guest"!==i?"none":"inline"},children:"English"===s?"Sign Up":"\u0110\u0103ng K\xfd"}),Object(M.jsxs)(A.a,{title:s,id:"basic-nav-dropdown",children:[Object(M.jsx)(A.a.Item,{onClick:r,children:"Ti\u1ebfng Vi\u1ec7t"}),Object(M.jsx)(A.a.Item,{onClick:r,children:"English"})]})]})})]})}),q=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appState.isAuthenticated})),n=Object(a.useState)(!0),s=Object(j.a)(n,2),c=s[0],r=s[1];return Object(a.useEffect)(Object(u.a)(l.a.mark((function n(){var a,s,c,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t){n.next=12;break}return n.next=4,v("GET","api/user",null);case 4:a=n.sent,s=a.user,c=a.message,i=a.opponentID,s?O(e,s,i):c&&e({type:"setLoginError",value:c}),r(!1),n.next=13;break;case 12:r(!1);case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),e({type:"setLoginError",value:n.t0.message});case 18:case"end":return n.stop()}}),n,null,[[0,15]])}))),[t]),[c,r]},_=(n(152),n(153),function(e){var t=e.findingMatch,n=e.lang,a=e.handlePlay;return!0===t?Object(M.jsx)(F.a,{placement:"top",overlay:Object(M.jsx)(W.a,{id:"play-button-tooltip",children:"English"===n?"Click To Cancel":"Nh\u1ea5p \u0110\u1ec3 H\u1ee7y"}),children:Object(M.jsx)(N.a,{className:"play finding-opponent",onClick:a,children:"English"===n?"Finding Opponent...":"T\xecm Tr\u1eadn..."})}):Object(M.jsx)(N.a,{className:"play",onClick:a,children:t})}),X=(n(154),n(104)),K=n(17),z=(n(155),n(103)),J=function(e,t,n){return e.map((function(e,a){var s=e.username,c=e.photo,r=e.socketID;return s===n?null:Object(M.jsxs)("li",{onClick:t,playername:s,children:[Object(M.jsx)("div",{className:"img-container",children:Object(M.jsx)("img",{src:c})}),Object(M.jsx)("p",{children:s}),Object(M.jsx)("div",{className:"status",children:Object(M.jsx)("span",{style:{backgroundColor:r?"#28a745":"#6c757d"}})})]},"player".concat(a))}))},Y=function(e,t,n){return e.map((function(e,a){var s=e.username,c=e.photo;return Object(M.jsxs)("li",{children:[Object(M.jsx)("div",{children:Object(M.jsx)("img",{src:c,alt:""})}),Object(M.jsx)("p",{children:s}),Object(M.jsx)("p",{className:e.declineInvite?"decline":"pending",children:e.declineInvite?"English"===n?"Declined":"T\u1eeb Ch\u1ed1i":"English"===n?"Pending...":"\u0110ang Ch\u1edd..."}),Object(M.jsx)("i",{className:"fas fa-times",onClick:t,playername:s})]},"pending-player-".concat(a))}))},Z=function(e){var t=e.goBack,n=e.lang,s=Object(a.useState)(""),c=Object(j.a)(s,2),r=c[0],i=c[1],o=Object(a.useState)([]),d=Object(j.a)(o,2),h=d[0],m=d[1],p=Object(a.useState)(!1),f=Object(j.a)(p,2),O=f[0],g=f[1],x=Object(a.useState)([]),y=Object(j.a)(x,2),w=y[0],S=y[1],k=Object(E.c)((function(e){return e.appState.playerInfo})),C=Object(a.useContext)(b),P=Object(a.useState)(""),I=Object(j.a)(P,2),L=I[0],D=I[1],G=Object(a.useRef)(null),R=Object(a.useRef)(null),A=Object(a.useState)(""),F=Object(j.a)(A,2),V=F[0],H=F[1],U=Object(a.useState)(null),q=Object(j.a)(U,2),_=q[0],Z=q[1],Q=Object(E.c)((function(e){return e.gameState.time})),$=Object(E.c)((function(e){return e.boardState.side})),ee=Object(a.useState)(!1),te=Object(j.a)(ee,2),ne=te[0],ae=te[1],se=function(e){var t=e.currentTarget.getAttribute("playername");i(t),m([])},ce=function(e){return e.replace(/[^0-9a-zA-Z_-]+/g,"")},re=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,s,c,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.currentTarget.value,i(a),!a){e.next=15;break}return e.next=6,v("POST","api/players",{playername:ce(a)});case 6:if(s=e.sent,c=s.players,r=document.querySelector("#player-name-search").value,c){e.next=11;break}return e.abrupt("return");case 11:o=k.username,r&&m(J(c,se,o)),e.next=16;break;case 15:m([]);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),ie("English"===n?"Something went wrong there. Try again":"\u0110\xe3 x\u1ea3y ra l\u1ed7i. Xin h\xe3y th\u1eed l\u1ea1i");case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){g(!1),D(e),setTimeout((function(){D("")}),1e3)},oe=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),!O){e.next=4;break}return e.abrupt("return");case 4:if(-1!==w.findIndex((function(e){return e.username===r}))){e.next=24;break}return g(!0),e.next=9,v("POST","api/players",{playername:ce(r),exact:!0});case 9:if(a=e.sent,!(s=a.players).length||s[0].username===k.username){e.next=23;break}if(!s[0].socketID){e.next=20;break}if(!(w.length+1>5)){e.next=16;break}return ie("English"===n?"You have sent too many invites":"B\u1ea1n \u0111\xe3 g\u1eedi qu\xe1 nhi\u1ec1u l\u1eddi m\u1eddi"),e.abrupt("return");case 16:Z(s[0]),C.emit("setTimeAndSide",Q,$[1],(function(){C.emit("sendInvite",s[0].socketID,s[0].username)})),e.next=21;break;case 20:ie("".concat(s[0].username," ").concat("English"===n?"isn't":"kh\xf4ng"," online"));case 21:e.next=24;break;case 23:ie("English"===n?"user not found":"kh\xf4ng t\xecm th\u1ea5y");case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),ie("English"===n?"Something went wrong there. Try again":"\u0110\xe3 x\u1ea3y ra l\u1ed7i. Xin h\xe3y th\u1eed l\u1ea1i");case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return C.on("validInvite",(function(){g(!1),S((function(e){return e.push(_),Object(B.a)(e)}))})),C.on("inviteDeclined",(function(e){var t=w.findIndex((function(t){return t.username===e.playername}));-1!==t&&(S((function(e){return e[t].declineInvite=!0,Object(B.a)(e)})),setTimeout((function(){S((function(e){return e.splice(t,1),Object(B.a)(e)}))}),1e3))})),C.on("invalidInvite",(function(e){g(!1);var t="".concat(_.username," \u0111ang trong tr\u1eadn");t=/disconnected/.test(e)?"".concat(_.username," c\xf3 th\u1ec3 \u0111\xe3 b\u1ecb ng\u1eaft k\u1ebft n\u1ed1i"):"".concat(_.username," \u0111\xe3 nh\u1eadn qu\xe1 nhi\u1ec1u l\u1eddi m\u1eddi"),ie("English"===n?e:t)})),function(){C.removeAllListeners("validInvite"),C.removeAllListeners("invalidInvite"),C.removeAllListeners("inviteDeclined"),C.removeAllListeners("playerInGame")}}),[_,w]),Object(a.useEffect)((function(){return function(){C.emit("cancelInvite",null,!0)}}),[]),Object(M.jsxs)("div",{className:"play-with-friend-container",children:[Object(M.jsx)("i",{className:"fas fa-arrow-left fa-2x",onClick:t}),Object(M.jsx)("ul",{className:"players-pending players-list",children:Y(w,(function(e){var t=e.currentTarget.getAttribute("playername"),n=w.findIndex((function(e){return e.username===t}));C.emit("cancelInvite",w[n].socketID,!1),S((function(e){return e.splice(n,1),Object(B.a)(e)}))}),n)}),Object(M.jsxs)("div",{className:"btn-container",children:[Object(M.jsxs)("form",{className:"username-input",onSubmit:oe,method:"POST",children:[Object(M.jsx)("i",{className:"fas fa-search"}),Object(M.jsx)("input",{id:"player-name-search",type:"text",placeholder:"English"===n?"Search...":"T\xecm ki\u1ebfm...",onInput:re,value:r}),Object(M.jsx)("i",{className:"fas fa-times",onClick:function(){i(""),m([])},style:{display:r?"inline":"none"}}),Object(M.jsx)(N.a,{className:"invite",type:"submit",ref:G,children:O?Object(M.jsx)(T.a,{animation:"border",variant:"info",style:{width:"1.5rem",height:"1.5rem"}}):"English"===n?"Invite":Object(M.jsx)(M.Fragment,{children:"\xa0\xa0M\u1eddi\xa0\xa0"})}),Object(M.jsx)(z.a,{target:G.current,show:""!==L,children:function(e){return Object(M.jsx)(W.a,Object(K.a)(Object(K.a)({},e),{},{children:L}))}}),Object(M.jsx)("ul",{className:"players-list",children:h})]}),Object(M.jsx)(N.a,{className:"invite-link",onClick:function(){C.emit("setTimeAndSide",Q,$[1],(function(){C.emit("generateInviteLink",(function(e){H(e)}))}))},children:"English"===n?"Invite Link":"Link M\u1eddi"}),Object(M.jsxs)("div",{className:"link-container",style:{display:V?"flex":"none"},children:[Object(M.jsx)("i",{className:"fas fa-times",onClick:function(){return H("")}}),Object(M.jsx)("input",{type:"text",value:V,className:"link",readOnly:!0}),Object(M.jsx)("button",{className:"copy-link",onClick:function(){navigator.clipboard.writeText(V).then((function(){ae(!0),setTimeout((function(){ae(!1)}),1e3)}))},ref:R,children:"English"===n?"Copy":"Sao Ch\xe9p"}),Object(M.jsx)(z.a,{placement:"top",show:ne,target:R.current,children:function(e){e.placement,e.arrowProps,e.show,e.popper;var t=Object(X.a)(e,["placement","arrowProps","show","popper"]);return Object(M.jsx)("div",Object(K.a)(Object(K.a)({},t),{},{className:"copied",children:"English"===n?"Copied":"\u0110\xe3 Sao Ch\xe9p"}))}})]})]})]})},Q=function(e){var t=Object(E.b)(),n=Object(E.c)((function(e){return e.appState.lang})),s=Object(a.useState)("Play With Friend"),c=Object(j.a)(s,2),r=c[0],i=c[1],o=Object(a.useState)(!1),l=Object(j.a)(o,2),u=l[0],d=l[1],h=Object(a.useContext)(b),m=Object(a.useContext)(p),f=Object(E.c)((function(e){return e.gameState.findingMatch})),O=Object(E.c)((function(e){return e.gameState.time})),g=Object(E.c)((function(e){return e.boardState.side})),v=function(){h.connected||u?d(!u):(i("English"===n?"Connection Was Closed":"K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng"),setTimeout((function(){i("English"===n?"Play With Friend":"Ch\u01a1i V\u1edbi B\u1ea1n")}),700))},x=function(n){var a=+n.currentTarget.getAttribute("value");t({type:"setTime",value:a}),e.handleToggle()},y=function(e){"black"===e.currentTarget.getAttribute("value")?(t({type:"switchSide",value:["red","black"]}),h.emit("setTimeAndSide",+O,"black")):t({type:"switchSide",value:["black","red"]})};return Object(a.useEffect)((function(){return h.on("foundMatch",(function(e,n,a){t({type:"setFoundMatch",value:!0}),t({type:"setOpponentInfo",value:{playername:e.playername,photo:e.photo}}),t({type:"setTime",value:a}),t({type:"setTurnToMove",value:n}),m(n,!1,t)})),h.on("findMatchCanceled",(function(){t({type:"setFindingMatch",value:"English"===n?"Play":"Ch\u01a1i"})})),h.emit("eventHandlersRegistered"),function(){h.emit("cancelFindMatch")}}),[]),Object(a.useEffect)((function(){i("English"===n?"Play With Friend":"Ch\u01a1i V\u1edbi B\u1ea1n"),t({type:"setFindingMatch",value:"English"===n?"Play":"Ch\u01a1i"})}),[n]),Object(M.jsx)(S.a,{md:{span:4},xs:{span:10},className:"game-controller mb-3",children:u?Object(M.jsx)(Z,{goBack:v,lang:n}):Object(M.jsxs)("div",{className:"button-container",children:[Object(M.jsxs)("div",{className:"select-side-container",children:[Object(M.jsx)(N.a,{className:"red-side",value:"red",onClick:y,disabled:!0===f||"Waiting..."===f,children:"English"===n?"Red":"\u0110\u1ecf"}),Object(M.jsx)(N.a,{className:"black-side",value:"black",onClick:y,disabled:!0===f||"Waiting..."===f,children:"English"===n?"Black":"\u0110en"})]}),Object(M.jsxs)("div",{className:"time-select-container",children:[Object(M.jsxs)(N.a,{className:"select-timer",onClick:e.handleToggle,disabled:!0===f||"Waiting..."===f,children:[Object(M.jsx)("i",{className:"fas fa-clock"})," ",O+":00"," ",Object(M.jsx)("i",{className:"fas fa-angle-down"})]}),Object(M.jsxs)("div",{className:"time-select-table",style:{display:e.timeSelectorDisplay},children:[Object(M.jsxs)(N.a,{onClick:x,value:"1",children:["1 ","English"===n?"min":"ph\xfat"]}),Object(M.jsxs)(N.a,{onClick:x,value:"3",children:["3 ","English"===n?"min":"ph\xfat"]}),Object(M.jsxs)(N.a,{onClick:x,value:"5",children:["5 ","English"===n?"min":"ph\xfat"]}),Object(M.jsxs)(N.a,{onClick:x,value:"10",children:["10 ","English"===n?"min":"ph\xfat"]}),Object(M.jsxs)(N.a,{onClick:x,value:"15",children:["15 ","English"===n?"min":"ph\xfat"]}),Object(M.jsxs)(N.a,{onClick:x,value:"30",children:["30 ","English"===n?"min":"ph\xfat"]})]})]}),Object(M.jsx)(_,{findingMatch:f,handlePlay:function(){h.connected?!0!==f?h.emit("setTimeAndSide",+O,g[1],(function(){h.emit("findMatch"),t({type:"setFindingMatch",value:!0})})):!0===f&&h.emit("cancelFindMatch"):(t({type:"setFindingMatch",value:"English"===n?"Connection Was Closed":"K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng"}),setTimeout((function(){t({type:"setFindingMatch",value:"English"===n?"Play":"Ch\u01a1i"})}),700))},lang:n}),Object(M.jsx)(N.a,{className:"play-with-friend",disabled:!0===f||"Waiting..."===f,onClick:v,children:r}),Object(M.jsx)(N.a,{className:"center-board",onClick:e.handleCenterBoard,children:"English"===n?"Center Board: ".concat(e.centerBoard?"On":"Off"):"Canh Gi\u1eefa B\xe0n C\u1edd:  ".concat(e.centerBoard?"B\u1eadt":"T\u1eaft")})]})})},$=(n(156),function(e){var t=Object(E.b)(),n=Object(E.d)(),s=Math.floor(e.timeLeftToMove/60),c=e.timeLeftToMove%60,r=Object(a.useContext)(b),i=Object(a.useContext)(p),o=Object(E.c)((function(e){return e.boardState.turnToMove}));return Object(a.useEffect)((function(){if(e.timeLeftToMove<=0&&o){var a=n.getState().gameState.opponentInfo;t({type:"setGameResult",value:"Lose"}),t({type:"setMessage",value:{type:"game result message",winner:"".concat(a.playername," Won - "),reason:"Game Abandoned",className:"game-message"}}),i(null,!0,t),r.emit("gameFinish",["Won","Game Abandoned"])}}),[o,e.timeLeftToMove]),Object(M.jsx)("div",{className:"clock ".concat(e.turnToMove&&r.connected?"turn-to-move":""),children:Object(M.jsx)("span",{children:(s<10?"0"+s:s)+":"+(c<10?"0"+c:c)})})}),ee=function(e,t,n){for(var a=e.board,s=e.handleMouseDown,c=0;c<10;c++)for(var r=0;r<9;r++)if(a[c][r]&&a[c][r].side===n){var i=Object(j.a)(a[c][r].position,2),o=i[0],l=i[1];t.push(Object(M.jsx)("image",{id:"p".concat(o).concat(l),href:"images/Pieces/".concat(a[c][r].name,".png"),width:a[c][r].width-3,height:a[c][r].width-3,style:{opacity:a[c][r].canBeCaptured?"0.6":"1"},transform:a[c][r].translate,onMouseDown:s},"piece".concat(c).concat(r)))}};var te=function(e){var t=[],n=e.side,a=e.turnToMove;return ee(e,t,a?n[0]:n[1]),ee(e,t,a?n[1]:n[0]),Object(M.jsx)(M.Fragment,{children:t})},ne=(n(157),function(e,t,n){var a=n.createSVGPoint();a.x=e,a.y=t;var s=a.matrixTransform(n.getScreenCTM().inverse());return[s.x,s.y]}),ae=n(37),se=n(18),ce=n(21),re=function(){function e(t,n,a,s,c){Object(se.a)(this,e),this.width=t,this.position=[n,a],this.name=s,this.side=s.split("-")[1],this.choosenSide=c,this.minCol=0,this.maxCol=8,this.minRow=0,this.maxRow=9,this.translate="translate(".concat(t*a,", ").concat(t*n,")")}return Object(ce.a)(e,[{key:"move",value:function(e,t){var n="translate(".concat(e-this.width/2,", ").concat(t-this.width/2,")");this.translate=n}},{key:"checkValidMove",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=e-s,i=t-c,o=t>=this.minCol&&t<=this.maxCol&&e>=this.minRow&&e<=this.maxRow,l=this.moves.some((function(e){return e[0]===r&&e[1]===i}));if(o&&l){if(!this.moveHint){var u=this.putGeneralInDanger(e,t,n);if(u)return u}return!0}return!1}},{key:"setPosition",value:function(e,t,n){var a=n*this.width,s=t*this.width,c="translate(".concat(a,", ").concat(s,")");return this.position=[t,n],this.translate=c,["capture"===e,t,n]}},{key:"canMoveToNewPosition",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=c*this.width,i=s*this.width;if(this.translate="translate(".concat(r,", ").concat(i,")"),this.side===this.choosenSide[1]){var o=this.checkValidMove(e,t,n);if(o&&!/translate/.test(o)){if(n[e][t].side){if(n[e][t].side!==n[s][c].side&&1===this.countPiecesBetween(e,t,n))return"capture"}else if(0===this.countPiecesBetween(e,t,n))return!0}else if(o)return o}return!1}},{key:"showMoveHints",value:function(e,t){if("off"!==e){var n,a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=Object(ae.a)(this.moves);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=s+i[0],l=c+i[1];this.moveHint=!0;var u=this.canMoveToNewPosition(o,l,t);this.moveHint=!1,u&&("capture"===u?t[o][l].canBeCaptured=!0:t[o][l]=!1)}}catch(m){r.e(m)}finally{r.f()}}else for(var d=0;d<10;d++)for(var h=0;h<9;h++)!1===t[d][h]?t[d][h]=0:t[d][h]&&(t[d][h].canBeCaptured=!1)}},{key:"countPiecesBetween",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=0;if(e===s)do{c+=c>t?-1:1,n[s][c]&&r++}while(c!==t);else do{n[s+=s>e?-1:1][c]&&r++}while(s!==e);return r}},{key:"putGeneralInDanger",value:function(t,n,a){var s=a.reduce((function(e,t){return e.push(Object(B.a)(t)),e}),[]);return this.updateTmpBoard(t,n,s),e.isGeneralInDanger(s,this.side)}},{key:"updateTmpBoard",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1];n[e][t]=n[s][c],n[s][c]=0}},{key:"canCaptureGeneral",value:function(e){var t,n=Object(j.a)(this.position,2),a=n[0],s=n[1],c=Object(ae.a)(this.moves);try{for(c.s();!(t=c.n()).done;){var r=t.value,i=a+r[0],o=s+r[1];if(o>=0&&o<9&&i>=0&&i<10&&e[i][o].side&&e[i][o].side!==e[a][s].side&&1===this.countPiecesBetween(i,o,e)&&"general"===e[i][o].name.split("-")[0])return e[i][o].translate}}catch(l){c.e(l)}finally{c.f()}return!1}},{key:"modifyBoard",value:function(e,t,n){var a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(j.a)(this.position,2),i=r[0],o=r[1];this.setPosition(null,s,c),e[s][c]&&n({type:"setCapturedPieces",value:e[s][c]}),e[s][c]=e[i][o],e[i][o]=0,n({type:"setBoard",value:Object(B.a)(e)})}},{key:"animateMove",value:function(e,t,n){var a=Object(j.a)(e,2),s=a[0],c=a[1],r=Object(j.a)(this.position,2),i=r[0],o=r[1];this.DOMNode=document.querySelector("#p".concat(i).concat(o)),o===c?this.moveVertical([s,c],t,n):this.moveDiagonal([s,c],t,n)}},{key:"setTransform",value:function(e,t,n,a){var s=Object(j.a)(e,2),c=s[0],r=s[1],i="translate(".concat(c*this.width,", ").concat(r*this.width,")");this.DOMNode.setAttribute("transform",i),a&&this.modifyBoard(t,[r,c],n)}},{key:"moveVertical",value:function(e,t,n){var a,s=this,c=Object(j.a)(e,2),r=c[0],i=c[1],o=Object(j.a)(this.position,2),l=o[0],u=o[1],d=0;window.requestAnimationFrame((function e(c){void 0===a&&(a=c),d=(r-l)/270*(c-a),Math.abs(d)<Math.abs(r-l)?(s.setTransform([u,l+d],t,n),window.requestAnimationFrame(e)):Math.abs(d)>=Math.abs(r-l)&&s.setTransform([i,r],t,n,!0)}))}},{key:"moveDiagonal",value:function(e,t,n){var a,s=this,c=Object(j.a)(e,2),r=c[0],i=c[1],o=Object(j.a)(this.position,2),l=o[0],u=o[1],d=0;window.requestAnimationFrame((function e(c){if(void 0===a&&(a=c),d=(i-u)/270*(c-a),Math.abs(d)<Math.abs(i-u)){var o=d/(i-u)*(r-l)+l;s.setTransform([u+d,o],t,n),window.requestAnimationFrame(e)}else Math.abs(d)>=Math.abs(i-u)&&s.setTransform([i,r],t,n,!0)}))}}],[{key:"isGeneralInDanger",value:function(e,t){for(var n=0;n<10;n++)for(var a=0;a<9;a++)if(e[n][a]&&e[n][a].side!==t){var s=e[n][a].canCaptureGeneral(e);if(/translate/.test(s))return s}return!1}},{key:"isLost",value:function(t,n){for(var a=0;a<10;a++)for(var s=0;s<9;s++)if(t[a][s]&&t[a][s].side===n){var c,r=Object(j.a)(t[a][s].position,2),i=r[0],o=r[1],l=Object(ae.a)(t[a][s].moves);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=i+u[0],h=o+u[1],m=t[a][s].canMoveToNewPosition(d,h,t);if(m&&!/translate/.test(m))return null}}catch(b){l.e(b)}finally{l.f()}}return e.isGeneralInDanger(t,n)?"Checkmate":"Stalemate"}}]),e}(),ie=function(e){for(var t=e.board,n=e.boardWidth,a=[],s=[],c=n/18,r=0;r<10;r++)for(var i=0;i<9;i++)!1===t[r][i]?a.push(Object(M.jsx)("circle",{cx:c+i*(n/9),cy:c+r*(n/9),r:c/2},"move-hint-".concat(a.length))):t[r][i]&&t[r][i].canBeCaptured&&s.push(Object(M.jsx)("image",{href:"images/Legal_Capture_Icon/legal_capture.png",transform:t[r][i].translate,width:t[r][i].width-3,height:t[r][i].width-3},"capture-hint-".concat(s.length)));return Object(M.jsxs)(M.Fragment,{children:[a,s]})};function oe(){var e=Object(E.b)(),t=Object(E.d)(),n=Object(E.c)((function(e){return e.appState.lang})),s=Object(E.c)((function(e){return e.boardState.board})),c=Object(E.c)((function(e){return e.boardState.targetDisplay})),r=Object(E.c)((function(e){return e.boardState.boardSize})),i=Object(E.c)((function(e){return e.boardState.currentPiece})),o=Object(E.c)((function(e){return e.boardState.getClicked})),l=Object(E.c)((function(e){return e.boardState.draggable})),u=Object(a.useState)("none"),d=Object(j.a)(u,2),h=d[0],m=d[1],f=Object(a.useState)("translate(0, 0)"),O=Object(j.a)(f,2),g=O[0],v=O[1],x=Object(E.c)((function(e){return e.boardState.side})),y=Object(a.useRef)(),w=Object(E.c)((function(e){return e.boardState.targetTranslate})),S=Object(E.c)((function(e){return e.boardState.turnToMove})),k=Object(a.useContext)(b),C=Object(a.useContext)(p),N=Object(E.c)((function(e){return e.gameState.opponentInfo})),T=function(t){t.preventDefault(),t.stopPropagation();var n=null,a=y.current,c=ne(+t.clientX,+t.clientY,a),r=Object(j.a)(c,2),l=r[0],u=r[1],d=Math.floor(l/i.width),h=Math.floor(u/i.width),b=Object(j.a)(i.position,2),p=b[0],f=b[1],O=i.canMoveToNewPosition(h,d,s);S&&O&&!/translate/.test(O)?n=i.setPosition(O,h,d):/translate/.test(O)&&(n=O),function(t,n){var a=Object(j.a)(n,2),c=a[0],r=a[1];if(t&&!/translate/.test(t)){var o=Object(j.a)(t,3),l=o[0],u=o[1],d=o[2];l&&e({type:"setCapturedPieces",value:s[u][d]}),s[c][r]=0,s[u][d]=i}else t&&(setTimeout((function(){m("none")}),400),m("inline"),v(t))}(n,[p,f]),e({type:"setDraggable",value:!1}),function(t){t&&!/translate/.test(t)||o?(i.showMoveHints("off",s),e({type:"setTargetDisplay",value:"none"}),e({type:"setCurrentPiece",value:null}),e({type:"setGetClicked",value:!1})):e({type:"setGetClicked",value:!0})}(n),e({type:"setBoard",value:Object(B.a)(s)}),n&&!/translate/.test(n)&&(e({type:"setTurnToMove",value:!S}),k.emit("opponentMove",n,[p,f]))},P=function(e){e.preventDefault();var n=t.getState().gameState.gameResult;i&&null===n&&T(e)},I=function(t){var n=y.current,a=ne(+t.clientX,+t.clientY,n),c=Object(j.a)(a,2),o=c[0],u=c[1];o>=0&&o<r[0]&&u>=0&&u<r[1]&&l&&(i.move(o,u),e({type:"setBoard",value:Object(B.a)(s)}))},L=function(e){return s.map((function(t){return t.map((function(t){if(t){var n=Object(j.a)(t.position,2),a=n[0],s=n[1];return t.width=e,t.translate="translate(".concat(e*s,", ").concat(e*a,")"),t}return 0}))}))},D=function(){var t=document.querySelector(".board-container").offsetWidth;e({type:"setBoardSize",value:[t,t/(521/577)]}),e({type:"setBoard",value:L(t/9)})};return Object(a.useEffect)((function(){var n=document.querySelector(".board-container").offsetWidth;return e({type:"setBoardSize",value:[n,n/(521/577)]}),e({type:"setBoard",value:L(n/9)}),window.ondragstart=function(){return!1},k.on("setTimer",(function(){var n=t.getState().boardState.turnToMove;null==t.getState().gameState.gameResult&&C(n,!1,e)})),function(){k.removeAllListeners("setTimer")}}),[]),Object(a.useEffect)((function(){return window.onmousemove=I,window.onmouseup=P,window.onresize=D,k.on("move",(function(n,a){var c=Object(j.a)(n,2),r=c[0],i=c[1],o=Object(j.a)(a,2),l=o[0],u=o[1];null===t.getState().gameState.gameResult&&function(t,n){var a=Object(j.a)(t,2),c=a[0],r=a[1],i=Object(j.a)(n,2),o=i[0],l=i[1];s[c][r]&&s[c][r].side===x[0]&&(s[c][r].animateMove([o,l],s,e),e({type:"setTurnToMove",value:!0}),k.emit("finishMove"))}([r,i],[l,u])})),function(){window.onmouseup=null,window.onmousemove=null,window.onresize=null,k.removeAllListeners("move")}})),Object(a.useEffect)((function(){if(S&&!l){var t=re.isLost(s,x[1]);if(t){var a=t;return"English"!==n&&(a="Checkmate"===t?"Chi\u1ebfu B\xed":"H\u1ebft C\u1edd"),e({type:"setGameResult",value:"Lose"}),e({type:"setMessage",value:{type:"game result message",winner:"".concat(N.playername," ").concat("English"===n?"Won":"Th\u1eafng"," - "),reason:a,className:"game-message"}}),C(null,!0,e),void k.emit("gameFinish",["Won",t])}}}),[S,s,l]),Object(M.jsxs)("svg",{width:r[0],height:r[1],onClick:function(e){if(i){var n=t.getState().gameState.gameResult;e.target.id||null!==n||T(e)}},style:{backgroundImage:'url("images/Board/board.jpg")'},ref:y,children:[Object(M.jsx)("image",{href:"images/Target_Icon/target.gif",width:r[0]/9-3,height:r[0]/9-3,style:{display:c},transform:w}),Object(M.jsx)(ie,{board:s,boardWidth:r[0]}),Object(M.jsx)(te,{board:s,handleMouseDown:function(t){var n=t.currentTarget.id,a=+n[1],c=+n[2],r=s[a][c].translate;if(!i||s[a][c].side===i.side){if(i){var o=Object(j.a)(i.position,2),l=o[0],u=o[1];a===l&&u===c||(i.showMoveHints("off",s),e({type:"setGetClicked",value:!1}))}s[a][c].showMoveHints("on",s),e({type:"setBoard",value:Object(B.a)(s)}),e({type:"setTargetDisplay",value:"inline"}),e({type:"setDraggable",value:!0}),e({type:"setTargetTranslate",value:r}),e({type:"setCurrentPiece",value:s[a][c]})}},side:x,turnToMove:S}),Object(M.jsx)("image",{href:"images/Legal_Capture_Icon/legal_capture.png",transform:g,style:{display:h,opacity:"0.6"},width:r[0]/9-3,height:r[0]/9-3})]})}var le=s.a.memo(oe),ue=(n(158),n(159),function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.gameState.gameResult})),n=Object(E.c)((function(e){return e.boardState.boardSize})),a=Object(j.a)(n,2),s=a[0],c=a[1],r=Object(E.c)((function(e){return e.gameState.gameResultDisplay})),i=Object(E.c)((function(e){return e.appState.lang})),o=Object(E.c)((function(e){return e.boardState.side})),l=Object(E.c)((function(e){return e.appState.playerInfo})),u=Object(E.c)((function(e){return e.gameState.opponentInfo})),d=o[1].charAt(0).toUpperCase()+o[1].slice(1),h=o[0].charAt(0).toUpperCase()+o[0].slice(1),m="English"==i?"Draw":"H\xf2a";"Won"===t?m="".concat("English"===i?d:"Red"===d?"\u0110\u1ecf":"\u0110en"," ").concat("English"===i?"Won":"Th\u1eafng"):"Lose"===t&&(m="".concat("English"===i?h:"Red"===h?"\u0110\u1ecf":"\u0110en"," ").concat("English"===i?"Won":"Th\u1eafng"));return t?Object(M.jsxs)("div",{className:"game-result",style:{width:"80%",height:"".concat(c-40,"px"),left:"".concat(.1*s,"px"),display:"".concat(r)},children:[Object(M.jsx)("i",{className:"fas fa-times hide-game-result",onClick:function(){e({type:"setGameResultDisplay",value:"none"})}}),Object(M.jsx)("div",{className:"won-side",children:Object(M.jsx)("p",{children:m})}),Object(M.jsxs)("div",{className:"players",children:[Object(M.jsxs)("div",{className:"player-info",children:[Object(M.jsx)("div",{className:"img-container ".concat("Won"===t||"Draw"===t?"":"winner"),children:Object(M.jsx)("img",{src:u.photo,alt:""})}),Object(M.jsx)("p",{children:u.playername})]}),Object(M.jsx)("span",{children:"VS"}),Object(M.jsxs)("div",{className:"player-info",children:[Object(M.jsx)("div",{className:"img-container ".concat("Won"===t?"winner":""),children:Object(M.jsx)("img",{src:l.photo,alt:""})}),Object(M.jsx)("p",{children:l.username})]})]})]}):null}),je=(n(160),function(e){var t=e.lang,n=e.pause,s=Object(E.b)(),c=Object(a.useContext)(b),r=Object(a.useContext)(p),i=Object(E.c)((function(e){return e.gameState.pauseTime})),o=Math.floor(i/60),l=i%60,u=Object(E.d)();return Object(a.useEffect)((function(){return 0===i&&(/Paused/.test(n)?(s({type:"setPauseTime",value:"timeout"}),s({type:"setPause",value:"Timeout"}),c.emit("startTimer",!0)):(c.emit("startTimer",!1),c.emit("startGame"))),c.on("receiveGameStartSignal",(function(){c.emit("receiveGameStartSignalAck")})),c.on("gameStarted",(function(){var e=u.getState().boardState.turnToMove;s({type:"setPauseTime",value:"restart"}),s({type:"setPause",value:null}),c.emit("startTimer",!1),s({type:"setPause",value:null}),s({type:"setPauseTime",value:"restart"}),r(e,!1,s)})),function(){c.removeAllListeners("receiveGameStartSignal"),c.removeAllListeners("gameStarted")}}),[i]),Object(M.jsxs)("p",{className:"pause-timer",children:[/Paused/.test(n)?"English"===t?"Resume In":"Ti\u1ebfp T\u1ee5c Trong":"English"===t?"Game Will Start In":"B\u1eaft \u0110\u1ea7u Tr\u1eadn Trong",":"," ",Object(M.jsx)("span",{children:(o<10?"0"+o:o)+":"+(l<10?"0"+l:l)})]})}),de=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appState.lang})),n=Object(E.c)((function(e){return e.gameState.pause})),s=Object(E.c)((function(e){return e.boardState.boardSize})),c=Object(j.a)(s,2),r=c[0],i=c[1],o=Object(E.d)(),l=Object(a.useContext)(b),u=n;if(Object(a.useEffect)((function(){var n=function(n){var a=o.getState().gameState.opponentInfo,s=n?"Paused":"Resumed",c=n?"D\u1eebng":"Ti\u1ebfp T\u1ee5c",r={from:"".concat(a.playername),message:"English"===t?"".concat(s," Game"):"".concat(c," Tr\u1eadn"),className:"game-message"};e({type:"setMessage",value:r}),e({type:"setPause",value:"".concat(a.playername," ").concat(n?"Paused":"Resumed"," Game")}),l.emit("receive".concat(n?"Pause":"Resume","SignalAck"))};return l.on("startPauseTimer",(function(t){l.emit("startTimer",!1),t&&e({type:"setPauseTime",value:"timeout"}),l.removeAllListeners("oneSecondPass"),l.on("oneSecondPass",(function(){e({type:"setPauseTime",value:null})})),l.emit("startTimer",!0)})),l.on("opponentPauseGame",(function(){n(!0)})),l.on("opponentResumeGame",(function(){l.removeAllListeners("oneSecondPass"),e({type:"setPauseTime",value:"timeout"}),n(!1)})),function(){l.removeAllListeners("opponentPauseGame"),l.removeAllListeners("opponentResumeGame"),l.removeAllListeners("startPauseTimer")}}),[n]),!n)return null;if("English"!==t){var d=n.split(" ")[0];u=/Paused/.test(n)?d+" D\u1eebng Tr\u1eadn":/Resumed/.test(n)?d+" Ti\u1ebfp T\u1ee5c Tr\u1eadn":"H\u1ebft Th\u1eddi Gian D\u1eebng"}return Object(M.jsx)("div",{className:"pause",style:{width:"".concat(r,"px"),height:"".concat(i,"px")},children:Object(M.jsxs)("div",{children:[Object(M.jsx)("p",{className:"pause-announce",children:u}),Object(M.jsx)(je,{pause:n,lang:t})]})})},he=s.a.memo(de),me=function(e){var t=e.lang,n=Object(E.c)((function(e){return e.gameState.opponentTimeLeftToMove})),a=Object(E.c)((function(e){return e.gameState.playerTimeLeftToMove})),s=Object(E.c)((function(e){return e.boardState.turnToMove})),c=Object(E.c)((function(e){return e.gameState.gameResult})),r=Object(E.c)((function(e){return e.gameState.foundMatch})),i=Object(E.c)((function(e){return e.boardState.capturedPieces})),o=Object(E.c)((function(e){return e.appState.playerInfo})),l=Object(E.c)((function(e){return e.gameState.opponentInfo}));return Object(M.jsxs)(S.a,{md:{span:4},sm:{span:11},xs:{span:11},className:"board-container pb-3",children:[Object(M.jsxs)("div",{className:"player-area",children:[Object(M.jsxs)("div",{className:"avatar-and-name",children:[Object(M.jsx)("img",{src:l.photo,alt:""}),Object(M.jsx)(F.a,{placement:"bottom",overlay:function(e){return Object(M.jsx)(W.a,Object(K.a)(Object(K.a)({id:"name-tooltip"},e),{},{children:l.playername}))},children:Object(M.jsx)("p",{className:"user-name",children:r?Object(M.jsx)(P.b,{to:"/home/".concat(l.playername),target:"_blank",children:l.playername}):"English"===t?l.playername:"\u0110\u1ed1i Th\u1ee7"})})]}),Object(M.jsx)("div",{className:"captured-pieces",children:i.map((function(e,t){return e.side===e.choosenSide[1]?Object(M.jsx)("img",{src:"images/Pieces/".concat(e.name,".png"),style:{width:"27px"}},"c".concat(t)):null}))}),Object(M.jsx)($,{timeLeftToMove:n,turnToMove:r&&null===c?!s:s})]}),Object(M.jsx)(le,{}),Object(M.jsxs)("div",{className:"player-area",children:[Object(M.jsx)("div",{className:"avatar-and-name",children:Object(M.jsxs)("div",{className:"avatar-and-name",children:[Object(M.jsx)("img",{src:o.photo,alt:""}),Object(M.jsx)(F.a,{placement:"top",overlay:function(e){return Object(M.jsx)(W.a,Object(K.a)(Object(K.a)({id:"name-tooltip"},e),{},{children:o.username}))},children:Object(M.jsx)("p",{className:"user-name",children:o.guest?o.username:Object(M.jsx)(P.b,{to:"/home",target:"_blank",children:o.username})})})]})}),Object(M.jsx)("div",{className:"captured-pieces",children:i.map((function(e,t){return e.side===e.choosenSide[0]?Object(M.jsx)("img",{src:"images/Pieces/".concat(e.name,".png"),style:{width:"27px"}},"c".concat(t)):null}))}),Object(M.jsx)($,{timeLeftToMove:a,turnToMove:s})]}),Object(M.jsx)(ue,{}),Object(M.jsx)(he,{})]})},be=(n(161),n(162),function(e,t){return e.map((function(e,n){return e.type?Object(M.jsxs)("li",{id:"m".concat(n),className:e.className,children:[Object(M.jsx)("p",{className:"game-over",children:"English"===t?"Game Over":"Tr\u1eadn \u0110\u1ea5u K\u1ebft Th\xfac"}),Object(M.jsx)("p",{children:"".concat(e.winner).concat(e.reason)})]},"m".concat(n)):Object(M.jsxs)("li",{id:"m".concat(n),className:e.className,children:[Object(M.jsx)("span",{children:e.from})," ",e.message]},"m".concat(n))}))}),pe=(n(163),function(e){var t=Object(E.b)(),n=Object(a.useContext)(b),s=Object(E.c)((function(e){return e.appState.lang})),c=Object(a.useContext)(p),r=Object(E.c)((function(e){return e.appState.playerInfo})),i=Object(E.c)((function(e){return e.gameState.opponentInfo})),o=Object(E.c)((function(e){return e.gameState.gameResult})),l=Object(E.c)((function(e){return e.gameState.receiveDrawOffer})),u=function(){t({type:"setGameResult",value:"Draw"}),t({type:"setMessage",value:{type:"game result message",winner:"",reason:"English"===s?"Game Draw By Agreement":"Ch\u1ea5p Nh\u1eadn H\xf2a",className:"game-message"}}),c(null,!0,t)};return Object(a.useEffect)((function(){return n.on("receiveDrawOffer",(function(){t({type:"setReceiveDrawOffer",value:!0})})),n.on("draw",(function(){u()})),function(){n.removeAllListeners("draw"),n.removeAllListeners("receiveDrawOffer")}})),l?Object(M.jsxs)("li",{className:"draw-offer",style:{display:e.display},children:[Object(M.jsxs)("p",{children:[Object(M.jsx)("span",{children:i.playername})," ","English"===s?"Offer A Draw":"\u0110\u1ec1 Ngh\u1ecb H\xf2a"]}),Object(M.jsxs)("div",{className:"answer",children:[Object(M.jsxs)(N.a,{className:"accept-offer",onClick:function(){t({type:"setReceiveDrawOffer",value:!1}),o||(u(),n.emit("gameFinish","Draw"))},children:["English"===s?"Accept":"\u0110\u1ed3ng \xdd"," ",Object(M.jsx)("i",{className:"fas fa-check"})]}),Object(M.jsxs)(N.a,{className:"decline-offer",onClick:function(){var e="English"===s?"Declined A Draw":"T\u1eeb Ch\u1ed1i H\xf2a";t({type:"setReceiveDrawOffer",value:!1}),t({type:"setMessage",value:{from:"".concat(r.username),message:e,className:"game-message"}}),n.emit("sendMessage",{from:"".concat(r.username),message:e,className:"game-message"})},children:["English"===s?"Decline":"T\u1eeb Ch\u1ed1i"," ",Object(M.jsx)("i",{className:"fas fa-times"})]})]})]}):null}),fe=function(){var e=Object(E.b)(),t=Object(a.useContext)(b),n=Object(a.useState)(""),s=Object(j.a)(n,2),c=s[0],r=s[1],i=Object(a.useRef)(),o=Object(E.c)((function(e){return e.appState.lang})),l=Object(E.c)((function(e){return e.gameState.messages})),u=Object(a.useState)(!1),d=Object(j.a)(u,2),h=d[0],m=d[1],p=be(l,o),f=Object(E.c)((function(e){return e.appState.playerInfo})),O=Object(E.c)((function(e){return e.gameState.opponentInfo}));return Object(a.useEffect)((function(){if(l.length>0){var n=i.current,a=document.querySelector("#m".concat(l.length-1));a&&(n.scrollTop=a.offsetTop)}return t.on("incomingMessage",(function(t){t.from&&"game-message"!==t.className&&(t.from="".concat(O.playername,": ")),e({type:"setMessage",value:t})})),function(){t.removeAllListeners("incomingMessage")}})),h?Object(M.jsxs)(N.a,{className:"show-chat",onClick:function(){m(!1)},children:["English"===o?"Show Chat":"Hi\u1ec7n Chat",Object(M.jsx)(pe,{display:"none"})]}):Object(M.jsxs)("div",{className:"chat-section",children:[Object(M.jsx)("i",{className:"fas fa-times hide-chat",onClick:function(){m(!0)}}),Object(M.jsxs)("ul",{className:"message-container",ref:i,children:[Object(M.jsx)("li",{className:"announce-new-game",children:Object(M.jsxs)("p",{className:"versus game-message",children:[Object(M.jsx)("span",{children:O.playername})," vs"," ",Object(M.jsx)("span",{children:f.username})]})}),p]}),Object(M.jsx)(pe,{display:"flex"}),Object(M.jsxs)("form",{className:"chat-input",onSubmit:function(n){if(n.preventDefault(),c){var a={from:"".concat(f.username,": "),message:c,className:""};e({type:"setMessage",value:a}),r(""),t.emit("sendMessage",a)}},children:[Object(M.jsx)("input",{type:"text",placeholder:"English"===o?"Message...":"Tin Nh\u1eafn...",onChange:function(e){r(e.currentTarget.value)},value:c}),Object(M.jsx)(N.a,{className:"send-btn",type:"submit",children:"English"===o?"Send":"G\u1eedi"})]})]})},Oe=function(e){var t=Object(E.b)(),n=Object(E.c)((function(e){return e.gameState.receiveDrawOffer})),s=Object(E.c)((function(e){return e.appState.lang})),c=Object(E.c)((function(e){return e.gameState.gameResult})),r=Object(a.useContext)(b),i=Object(E.c)((function(e){return e.gameState.pause})),o=Object(E.c)((function(e){return e.appState.playerInfo}));return Object(M.jsxs)(S.a,{md:{span:4},xs:{span:10},className:"game-controller mb-3 game-bar-controller",children:[Object(M.jsxs)("div",{className:"button-container game-bar",children:[Object(M.jsxs)("div",{className:"select-side-container",children:[Object(M.jsxs)(N.a,{className:"red-side draw-btn",value:"draw",onClick:function(){n||(t({type:"setMessage",value:{from:"".concat(o.username),message:"English"===s?"Offered A Draw":"\u0110\u1ec1 Ngh\u1ecb H\xf2a",className:"game-message"}}),r.emit("sendDrawOffer"))},disabled:null!==c||i,children:["\xbd ","English"===s?"Draw":"H\xf2a"]}),Object(M.jsxs)(N.a,{className:"black-side resign-btn",value:"resign",onClick:e.handleResign,disabled:null!==c||i,children:[Object(M.jsx)("i",{className:"fas fa-flag"})," ","English"===s?"Resign":"Thua"]})]}),Object(M.jsx)("div",{className:"time-select-container",children:Object(M.jsxs)(N.a,{className:"select-timer pause-btn",disabled:null!==c||i&&!/Paused/.test(i),id:i?"Resume":"Pause",onClick:function(e){var n=e.currentTarget.id,a="Pause"===n?"D\u1eebng":"Ti\u1ebfp T\u1ee5c",c={from:"".concat(o.username),message:"English"===s?"".concat(n,"d Game"):"".concat(a," Tr\u1eadn"),className:"game-message"};t({type:"setMessage",value:c}),t({type:"setPause",value:"".concat(o.username," ").concat(n,"d Game")}),r.emit("player".concat(n,"Game"))},children:[Object(M.jsx)("i",{className:"fas fa-".concat(i?"play":"pause")})," ",i?"English"===s?"Resume":"Ti\u1ebfp T\u1ee5c":"English"===s?"Pause":"D\u1eebng"]})})]}),Object(M.jsx)(fe,{}),Object(M.jsx)(N.a,{className:"exit-game",disabled:null===c,onClick:function(){r.removeAllListeners("oneSecondPass");var e=document.querySelector(".board-container").offsetWidth;r.emit("exitGame"),t({type:"resetBoardState",value:e}),t({type:"resetGameState"})},children:"English"===s?"Exit Game":"R\u1eddi Tr\u1eadn"}),Object(M.jsx)(N.a,{className:"center-board",onClick:e.handleCenterBoard,children:"English"===s?"Center Board: ".concat(e.centerBoard?"On":"Off"):"Canh Gi\u1eefa B\xe0n C\u1edd:  ".concat(e.centerBoard?"B\u1eadt":"T\u1eaft")})]})},ge=function(){var e=Object(E.b)(),t=Object(a.useState)("none"),n=Object(j.a)(t,2),s=n[0],c=n[1],r=Object(E.c)((function(e){return e.gameState.foundMatch})),i=Object(a.useState)(!1),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(a.useContext)(b),h=Object(E.c)((function(e){return e.appState.lang})),m=Object(E.d)(),f=Object(a.useContext)(p),O=function(){u(!l)},g=function(t,n){var a=m.getState().gameState.opponentInfo,s=m.getState().appState.playerInfo;e({type:"setGameResult",value:t}),e({type:"setReceiveDrawOffer",value:!1}),e({type:"setMessage",value:{type:"game result message",winner:"".concat("".concat("Won"===t?s.username:a.playername)," ").concat("English"===h?"Won":"Th\u1eafng"," - "),reason:"English"===h?n:"Game Abandoned"===n?"Tr\u1eadn \u0110\u1ea5u B\u1ecb H\u1ee7y":/Resigned/.test(n)?n.replace("Resigned","\u0110\u1ea7u H\xe0ng"):"Chi\u1ebfu B\xed",className:"game-message"}}),f(null,!0,e)};return Object(a.useEffect)((function(){d.on("gameOver",(function(e,t){var n=m.getState().gameState.foundMatch;null===m.getState().gameState.gameResult&&n&&g(e,t)})),d.on("opponentLeftGame",(function(){var t=m.getState().gameState.foundMatch,n=m.getState().gameState.opponentInfo;t&&e({type:"setMessage",value:{from:"".concat(n.playername),message:"English"===h?"Left The Game":"\u0110\xe3 R\u1eddi Tr\u1eadn",className:"game-message"}})}));var t=function(){"visible"!==document.visibilityState||d.connected||d.connect()};return document.addEventListener("visibilitychange",t),window.onfocus=function(){d.connected||d.connect()},function(){d.removeAllListeners("opponentLeftGame"),d.removeAllListeners("gameOver"),window.onfocus=null,document.removeAllListeners("visibilitychange",t)}}),[]),Object(M.jsxs)(w.a,{md:{cols:1},className:"mt-3 pb-3",children:[Object(M.jsx)(me,{lang:h}),Object(M.jsx)("div",{className:"w-100",style:{display:l?"block":"none"}}),r?Object(M.jsx)(Oe,{handleCenterBoard:O,centerBoard:l,handleResign:function(){var e=m.getState().appState.playerInfo;g("Lose","".concat(e.username," Resigned")),d.emit("gameFinish",["Won","".concat(e.username," Resigned")])}}):Object(M.jsx)(Q,{timeSelectorDisplay:s,handleToggle:function(){c("none"===s?"flex":"none")},handleCenterBoard:O,centerBoard:l})]})},ve=(n(164),function(e){var t=Object(a.useState)("flex"),n=Object(j.a)(t,2),s=n[0],c=n[1];return Object(M.jsxs)("div",{className:"warning",style:{display:s},children:[Object(M.jsx)("div",{className:"warning-icon",children:Object(M.jsx)("i",{className:"fas fa-exclamation-triangle fa-2x"})}),Object(M.jsx)("p",{children:e.connectionError}),Object(M.jsx)("i",{className:"fas fa-times",onClick:function(){c("none")}})]})}),xe=(n(165),function(e){var t=e.lang,n=Object(a.useState)(!1),s=Object(j.a)(n,2),c=s[0],r=s[1];return Object(M.jsxs)("div",{className:"verify-email-note",style:{display:c?"none":"block"},children:[Object(M.jsx)("p",{children:"English"===t?Object(M.jsxs)(M.Fragment,{children:["Look Like you haven't verified your email. Please click"," ",Object(M.jsx)(P.b,{to:"/verify-email",children:"here"})," to verify your email or"," ",Object(M.jsx)(P.b,{to:"/settings",children:"here"})," to change your email."]}):Object(M.jsxs)(M.Fragment,{children:["B\u1ea1n ch\u01b0a x\xe1c nh\u1eadn email. xin h\xe3y nh\u1ea5p v\xe0o"," ",Object(M.jsx)(P.b,{to:"/verify-email",children:"\u0111\xe2y"})," \u0111\u1ec3 x\xe1c nh\u1eadn email ho\u1eb7c v\xe0o"," ",Object(M.jsx)(P.b,{to:"/settings",children:"\u0111\xe2y"})," \u0111\u1ec3 thay \u0111\u1ed5i email."]})}),Object(M.jsx)("i",{className:"fas fa-times hide-note",onClick:function(){r(!0)}})]})}),ye=function(e){var t=Object(E.b)(),n=Object(a.useState)(null),s=Object(j.a)(n,2),c=s[0],r=s[1],o=Object(a.useContext)(b),l=Object(E.d)(),u=Object(E.c)((function(e){return e.appState.lang})),d=Object(E.c)((function(e){return e.appState.playerInfo})),h=Object(E.c)((function(e){return e.appState.loginError})),m=Object(E.c)((function(e){return e.appState.isAuthenticated})),p=q(),f=Object(j.a)(p,2),O=f[0],g=f[1];return Object(a.useEffect)((function(){c&&("Connection Was Closed"===c?r("K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng"):"Successfully reconnect"===c?r("K\u1ebft n\u1ed1i l\u1ea1i th\xe0nh c\xf4ng"):/logged in/.test(c)&&r("K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng v\xec t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c \u0111\u0103ng nh\u1eadp t\u1eeb n\u01a1i kh\xe1c"))}),[u]),Object(a.useEffect)((function(){return o.on("connect_error",(function(e){var t=e.message;/your account/.test(e)&&"English"!==u&&(t="K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng v\xec t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c \u0111\u0103ng nh\u1eadp t\u1eeb n\u01a1i kh\xe1c"),r(t),o.close()})),o.on("connect",(function(){c&&(r("English"===u?"Successfully reconnect":"K\u1ebft n\u1ed1i l\u1ea1i th\xe0nh c\xf4ng"),setTimeout((function(){r(null)}),1e3))})),function(){o.removeAllListeners("connect_error"),o.removeAllListeners("connect")}}),[c]),Object(a.useEffect)((function(){return o.on("disconnect",(function(e){var n=l.getState().gameState.foundMatch;n||(t({type:"setFindingMatch",value:"English"===u?"Connection Was Closed":"K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng"}),setTimeout((function(){t({type:"setFindingMatch",value:"English"===u?"Play":"Ch\u01a1i"})}),700)),"io client disconnect"!==e&&(o.removeAllListeners("oneSecondPass"),r("English"===u?"Connection Was Closed":"K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng"),n&&(t({type:"setGameResult",value:void 0}),t({type:"setMessage",value:{from:"",className:"game-message",message:"English"===u?"Connection Was Closed":"K\u1ebft n\u1ed1i \u0111\xe3 \u0111\xf3ng"}})))})),function(){o.removeAllListeners("disconnect")}}),[]),h?Object(M.jsx)(i.a,{to:"/signin"}):O?Object(M.jsx)(T.a,{animation:"border",variant:"secondary",className:"spinner"}):Object(M.jsxs)(y.a,{fluid:!0,children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(U,{setWaitForResponse:g}),m?Object(M.jsx)(ge,{}):Object(M.jsx)(D,{})]}),!d||d.guest||d.email.verified?null:Object(M.jsx)(xe,{lang:u}),c?Object(M.jsx)(ve,{connectionError:c}):null]})},we=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appState.isAuthenticated})),n=Object(E.c)((function(e){return e.appState.lang})),s=Object(a.useContext)(f),c=Object(a.useState)(!1),r=Object(j.a)(c,2),o=r[0],d=r[1],h=x(!1,!1,n),m=h.handleEmailChange,b=h.handleError,p=h.setError,O=h.handleFirstnameChange,g=h.handleLastnameChange,P=h.handleMissingField,I=h.handleUsernameChange,L=h.handlePasswordChange,D=h.username,G=h.password,R=h.lastname,A=h.firstname,B=h.email,F=h.invalidEmailMess,W=h.invalidPasswordMess,V=h.invalidUsernameMess,H=h.error,U=h.showPassword,q=h.setShowPassword,_=h.confirmPassword,X=h.handleConfirmPasswordChange,K=h.confirmPasswordMess,z=h.setConfirmPasswordMess,J=function(){var t=Object(u.a)(l.a.mark((function t(a){var c,r,i,u,j,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),!o){t.next=4;break}return t.abrupt("return");case 4:if(p(""),c=P(),_===G){t.next=9;break}return z("English"===n?"Password doesn't match":"M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"),t.abrupt("return");case 9:if(c||F||W||V||K){t.next=21;break}return d(!0),p(null),t.next=14,v("POST","api/signup",{email:B,firstname:A,username:D,password:G,lastname:R});case 14:r=t.sent,i=r.message,u=r.user,j=r.ok,h=r.opponentID,d(!1),u?s(e,u,h):b(j,i);case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),d(!1),b(!1,t.t0.toString());case 27:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e){return t.apply(this,arguments)}}();return t&&"guest"!==t?Object(M.jsx)(i.a,{to:"/"}):Object(M.jsxs)(y.a,{fluid:!0,children:[Object(M.jsx)("h1",{children:"English"===n?"Xiangqi":"C\u1edd T\u01b0\u1edbng"}),"(",Object(M.jsx)(w.a,{className:"justify-content-center",children:Object(M.jsxs)(S.a,{md:{span:7},sm:{span:7},xs:{span:10},className:"login-component d-flex flex-column  align-items-center",children:[H?Object(M.jsx)("p",{className:"error-message",children:H}):null,Object(M.jsxs)(k.a,{onSubmit:J,method:"POST",children:[Object(M.jsxs)(k.a.Group,{controlId:"username",children:[Object(M.jsx)(k.a.Label,{children:"English"===n?"Username":"T\xean t\xe0i kho\u1ea3n"}),Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"text",isInvalid:""!==V,onChange:I,value:D,disabled:o}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:V})]})]}),Object(M.jsxs)(k.a.Group,{controlId:"firstname",children:[Object(M.jsx)(k.a.Label,{children:"English"===n?"Firstname":"H\u1ecd"}),Object(M.jsx)(k.a.Control,{type:"text",onChange:O,value:A,disabled:o})]}),Object(M.jsxs)(k.a.Group,{controlId:"lastname",children:[Object(M.jsx)(k.a.Label,{children:"English"===n?"Lastname":"t\xean"}),Object(M.jsx)(k.a.Control,{type:"text",onChange:g,value:R,disabled:o})]}),Object(M.jsxs)(k.a.Group,{controlId:"email",children:[Object(M.jsx)(k.a.Label,{children:"Email"}),Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"email",isInvalid:""!==F,onChange:m,value:B,disabled:o}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:F})]})]}),Object(M.jsxs)(k.a.Group,{controlId:"password",children:[Object(M.jsx)(k.a.Label,{children:"English"===n?"Password":"M\u1eadt Kh\u1ea9u"}),Object(M.jsxs)(C.a,{hasValidation:!0,className:"password-group",children:[Object(M.jsx)(k.a.Control,{type:U?"text":"password",isInvalid:""!==W,onChange:L,value:G,disabled:o}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:W}),Object(M.jsx)("button",{className:"toggle-password",type:"button",style:{display:W?"none":"inline"},onClick:function(){q(!U)},children:U?"English"===n?"Hide":"\u1ea8n":"English"===n?"Show":"Hi\u1ec7n"})]})]}),Object(M.jsxs)(k.a.Group,{children:[Object(M.jsx)(k.a.Label,{children:"English"===n?"Confirm Password":"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u"}),Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"password",isInvalid:""!==K,disabled:o,value:_,onChange:X}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:K})]})]}),Object(M.jsx)(N.a,{type:"submit",className:"submit-form-button",children:o?Object(M.jsx)(T.a,{animation:"border",variant:"dark"}):"English"===n?"Submit":"\u0110\u0103ng K\xfd"})]}),Object(M.jsxs)("p",{className:"seperator",children:[Object(M.jsx)("span",{}),Object(M.jsx)("span",{className:"seperator-text",children:"English"===n?"or connect with":"ho\u1eb7c \u0111\u0103ng nh\u1eadp v\u1edbi"}),Object(M.jsx)("span",{})]}),Object(M.jsxs)("div",{className:"social-login",children:[Object(M.jsxs)("a",{className:"google",href:"".concat(jt,"/api/auth/google"),children:[Object(M.jsx)("i",{className:"fab fa-google"})," Google"]}),Object(M.jsxs)("a",{className:"facebook",href:"".concat(jt,"/api/auth/facebook"),children:[Object(M.jsx)("i",{className:"fab fa-facebook "})," Facebook"]}),Object(M.jsxs)("a",{className:"github",href:"".concat(jt,"/api/auth/github"),children:[Object(M.jsx)("i",{className:"fab fa-github "})," Github"]})]})]})})]})},Se=function(){var e=Object(E.b)(),t=Object(a.useState)(!1),n=Object(j.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),o=Object(j.a)(r,2),d=o[0],h=o[1],m=Object(a.useState)(!1),b=Object(j.a)(m,2),p=b[0],f=b[1],O=Object(a.useState)(""),g=Object(j.a)(O,2),x=g[0],P=g[1],I=Object(a.useState)(""),L=Object(j.a)(I,2),D=L[0],G=L[1],R=Object(a.useState)(""),A=Object(j.a)(R,2),B=A[0],F=A[1],W=Object(a.useState)(!1),V=Object(j.a)(W,2),H=V[0],U=V[1],q=Object(a.useRef)(),_=Object(E.c)((function(e){return e.appState.lang})),X=Object(E.c)((function(e){return e.appState.playerInfo})),K=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,s,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!d&&!H){t.next=3;break}return t.abrupt("return");case 3:if(x){t.next=7;break}G("English"===_?"Please fill in this field":"Xin h\xe3y \u0111i\u1ec1n th\xf4ng tin n\xe0y"),t.next=18;break;case 7:if(D){t.next=18;break}return F(null),h(!0),t.next=12,v("POST","api/verify-email/code",{username:X.username,correct:+q.current===+x});case 12:a=t.sent,s=a.message,r=a.ok,i=a.user,h(!1),r?i?(c(!0),e({type:"setPlayerInfo",value:i})):"Incorrect Code"===s?G("English"===_?"Incorrect Code":"M\xe3 x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c"):F(s):F(s);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d&&!H){e.next=2;break}return e.abrupt("return");case 2:return p||f(!0),U(!0),F(""),t=X.name.lastname,e.next=8,v("POST","api/verify-email",{email:X.email.value,lastname:t||X.username});case 8:n=e.sent,a=n.message,s=n.code,c=n.ok,U(!1),c?q.current=s:F(a);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!X||s?Object(M.jsx)(i.a,{to:"/"}):Object(M.jsxs)(y.a,{fluid:!0,children:[Object(M.jsx)("h1",{children:"English"===_?"Xiangqi":"C\u1edd T\u01b0\u1edbng"}),Object(M.jsx)(w.a,{className:"justify-content-center",children:Object(M.jsxs)(S.a,{lg:{span:3},md:{span:4},xs:{span:8},className:"login-component d-flex flex-column  align-items-center",children:[B?Object(M.jsx)("p",{className:"error-message",children:B}):null,Object(M.jsxs)(k.a,{onSubmit:K,method:"POST",children:[Object(M.jsxs)(k.a.Group,{controlId:"verificationCode",children:[Object(M.jsx)(k.a.Label,{style:{float:"left"},children:"English"===_?"Enter your verification code":"Nh\u1eadp m\xe3 x\xe1c nh\u1eadn"}),Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"text",name:"verificationCode",isInvalid:""!==D,onChange:function(e){var t=e.target.value;/[^0-9]/.test(t)?G("English"===_?"Invalid verification code":"M\xe3 x\xe1c nh\u1eadn kh\xf4ng h\u1ee3p l\u1ec7"):G(""),P(t)},value:x,disabled:d||H,placeholder:"English"===_?"Verification Code":"M\xe3 X\xe1c Nh\u1eadn"}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",style:{textAlign:"left"},children:D})]})]}),Object(M.jsx)(N.a,{type:"submit",className:"submit-form-button",children:d?Object(M.jsx)(T.a,{animation:"border",variant:"dark"}):"English"===_?"Submit":"X\xe1c Nh\u1eadn Email"}),Object(M.jsx)(N.a,{onClick:z,style:{marginTop:"10px"},className:"submit-form-button",children:H?Object(M.jsx)(T.a,{animation:"border",variant:"dark"}):p?"English"===_?"Resend Verification Code":"G\u1eedi l\u1ea1i M\xe3 X\xe1c Nh\u1eadn":"English"===_?"Send Verification Code":"G\u1eedi M\xe3 X\xe1c Nh\u1eadn"})]})]})})]})},ke=(n(166),function(e,t,n){var a={year:"numeric",month:"long",day:"numeric"};return e.map((function(e,s){if(e.guest||e.username===t)return null;var c=e.name,r=c.lastname,i=c.firstname,o=(i||"")+" "+(r||""),l=new Date(e.join).toLocaleDateString("English"===n?"us-US":"vi-VI",a);return Object(M.jsx)("li",{className:"member",children:Object(M.jsxs)(P.b,{className:"member-profile-link",to:"/home/".concat(e.username),target:"_blank",children:[Object(M.jsx)("div",{children:Object(M.jsx)("img",{src:e.photo})}),Object(M.jsxs)("div",{className:"member-info",children:[Object(M.jsxs)("div",{className:"name-and-state",children:[Object(M.jsx)("p",{className:"member-name",children:e.username}),Object(M.jsx)("p",{className:"member-state ".concat(e.socketID?"online":""),children:e.socketID?"Online":"Offline"})]}),Object(M.jsxs)("div",{className:"join-date-and-name",children:[Object(M.jsx)("p",{children:o}),Object(M.jsx)("p",{children:("English"===n?"Join: ":"Tham Gia: ")+l})]})]})]})},"member-".concat(s))}))}),Ce=(n(167),function(e){var t=e.playerInfo,n=Object(a.useState)(""),s=Object(j.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)([]),o=Object(j.a)(i,2),d=o[0],h=o[1],m=Object(a.useState)(null),b=Object(j.a)(m,2),p=b[0],f=b[1],O=Object(E.c)((function(e){return e.appState.lang})),g=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,s,c,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,a=n.currentTarget.value,r(a),!a){e.next=16;break}return e.next=7,v("POST","api/players",{playername:(l=a,l.replace(/[^0-9a-zA-Z-]+/g,""))});case 7:if(s=e.sent,c=s.players,i=document.querySelector("#member-name-input").value,c){e.next=12;break}return e.abrupt("return");case 12:o=t.username,i&&h(ke(c,o,O)),e.next=17;break;case 16:h([]);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),f(e.t0.message),setTimeout((function(){f(null)}),1e3);case 23:case"end":return e.stop()}var l}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{className:"find-players",children:[Object(M.jsx)("p",{className:"members-title",children:"English"===O?"Members":"Th\xe0nh Vi\xean"}),Object(M.jsxs)("div",{className:"search-area",children:[Object(M.jsx)(F.a,{placement:"top",overlay:function(e){return Object(M.jsx)(W.a,Object(K.a)(Object(K.a)({},e),{},{id:"tooltip",children:p}))},show:null!==p,children:Object(M.jsx)("input",{placeholder:"English"===O?"Search Members...":"T\xecm Th\xe0nh Vi\xean...",value:c,onChange:g,id:"member-name-input"})}),Object(M.jsx)("i",{className:"fas fa-search"}),Object(M.jsx)("ul",{className:"members-list",children:d})]})]})}),Ne=(n(168),function(e){var t=e.playerInfo,n=e.setError,s=e.viewOthersProfile,c=e.setting,r=Object(a.useState)(!1),i=Object(j.a)(r,2),o=i[0],d=i[1],h=Object(E.b)(),m=Object(E.c)((function(e){return e.appState.lang})),b=t.name.firstname+" "+t.name.lastname,p=function(){var e=Object(u.a)(l.a.mark((function e(a){var s,c,r,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=new FormData,c=a.currentTarget.files[0],r=a.currentTarget.name,s.append(r,c),d(!0),e.next=8,v("POST","uploads/".concat(t._id),s,!0);case 8:i=e.sent,o=i.user,u=i.message,d(!1),o?h({type:"setPlayerInfo",value:o}):u&&n("Only image files are allowed."===u&&"English"!==m?"T\u1eadp tin kh\xf4ng h\u1ee3p l\u1ec7.":"English"===m?u:"\u0110\xe3 x\u1ea3y ra l\u1ed7i. Xin h\xe3y th\u1eed l\u1ea1i."),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),n("English"===m?"Looks like there was an error. Please refresh.":"\u0110\xe3 x\u1ea3y ra l\u1ed7i. Vui l\xf2ng t\u1ea3i l\u1ea1i trang.");case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsxs)("div",{className:"profile-header",children:[Object(M.jsxs)("div",{className:"change-pic-area ".concat(c?"setting-img":""),children:[o||s?null:Object(M.jsxs)("button",{className:"change-pic",onClick:function(){document.querySelector("#pic-input").click()},children:[Object(M.jsx)("i",{className:"fas fa-camera"}),"English"===m?"Change":"Thay \u0110\u1ed5i"]}),Object(M.jsx)("input",{type:"file",accept:"image/*",id:"pic-input",onChange:p,name:t._id}),o?Object(M.jsx)(T.a,{animation:"border",variant:"secondary"}):Object(M.jsx)("img",{src:t.photo})]}),Object(M.jsxs)("div",{id:s?"other-profile":"",className:"user-profile-info ".concat(c?"setting-profile-info":""),children:[Object(M.jsxs)("div",{className:"user-name-lastname",children:[Object(M.jsx)(F.a,{placement:"top",overlay:function(e){return Object(M.jsx)(W.a,Object(K.a)(Object(K.a)({id:"profile-name-tooltip"},e),{},{children:t.username}))},children:Object(M.jsx)("p",{className:"user-name",children:t.username})}),Object(M.jsx)(F.a,{placement:"top",overlay:function(e){return Object(M.jsx)(W.a,Object(K.a)(Object(K.a)({id:"profile-name-tooltip"},e),{},{children:b}))},children:Object(M.jsx)("p",{className:"user-full-name",children:b})})]}),Object(M.jsx)("div",{className:"edit-profile-container",children:s||c?null:Object(M.jsxs)(P.b,{to:"/settings",children:[Object(M.jsx)("i",{className:"fas fa-edit"})," ","English"===m?"Edit":"Ch\u1ec9nh S\u1eeda"]})})]})]})}),Te=(n(169),function(e){var t=e.playerInfo,n={year:"numeric",month:"long",day:"numeric"},a=Object(E.c)((function(e){return e.appState.lang})),s=t.totalGames,c=s.won+s.draw+s.lost,r=new Date(t.join).toLocaleDateString("English"===a?"us-US":"vi-VI",n),i=new Date(t.lastOnline).toLocaleDateString("English"===a?"us-US":"vi-VI",n);return Object(M.jsxs)("div",{className:"profile-info",children:[Object(M.jsxs)("div",{className:"join profile-info-item",children:[Object(M.jsx)("i",{className:"fas fa-user-plus ",style:{marginLeft:"9px"}}),Object(M.jsx)("p",{className:"item-title",children:"English"===a?"Joined":"Tham Gia"}),Object(M.jsx)("p",{className:"item-value",children:r})]}),Object(M.jsxs)("div",{className:"last-online profile-info-item",children:[Object(M.jsx)("i",{className:"fas fa-signal "}),Object(M.jsx)("p",{className:"item-title",children:"English"===a?"Last Online":"L\u1ea7n Cu\u1ed1i Online"}),Object(M.jsx)("p",{className:"item-value",children:i})]}),Object(M.jsxs)("div",{className:"games profile-info-item",children:[Object(M.jsx)("i",{className:"fas fa-chess-board "}),Object(M.jsx)("p",{className:"item-title",children:"English"===a?"Games":"Tr\u1eadn"}),Object(M.jsx)("p",{className:"item-value",children:c>1e6?"1000000+":c})]})]})}),Ee=n(184),Pe=function(e,t){var n=[e.username,e.matches],a=n[0];return n[1].map((function(e,n){var s="H\xf2a",c="\u0110\u1ed3ng \xdd H\xf2a";"Draw"!==e.result&&(c="Game Abandoned"===e.reason?"Tr\u1eadn \u0110\u1ea5u B\u1ecb H\u1ee7y":/Resigned/.test(e.reason)?e.reason.replace("Resigned","\u0110\u1ea7u H\xe0ng"):"Chi\u1ebfu B\xed",s="Won"===e.result?"Th\u1eafng":"Thua");var r=new Date(e.date).toLocaleDateString("English"===t?"us-US":"vi-VI",{year:"numeric",month:"long",day:"numeric"});return Object(M.jsxs)("tr",{className:"game-table-row",children:[Object(M.jsx)("td",{className:"game-time",children:Object(M.jsxs)("div",{className:"match-history-value",children:[" ",Object(M.jsx)("i",{className:"fas fa-clock",style:{color:"#769656"}}),e.time+("English"===t?" min":" ph\xfat")]})}),Object(M.jsx)("td",{className:"players-name",children:Object(M.jsxs)("div",{className:"match-history-value",children:[Object(M.jsxs)("p",{children:["Draw"===e.result?Object(M.jsx)("i",{className:"fas fa-equals"}):Object(M.jsx)("i",{className:"fas fa-".concat("Won"===e.result?"plus":"minus","-square")}),a]}),Object(M.jsxs)("p",{children:["Draw"===e.result?Object(M.jsx)("i",{className:"fas fa-equals"}):Object(M.jsx)("i",{className:"fas fa-".concat("Won"!==e.result?"plus":"minus","-square")}),e.opponent]})]})}),Object(M.jsx)("td",{}),Object(M.jsx)("td",{}),Object(M.jsx)("td",{}),Object(M.jsx)("td",{className:"match-result",children:Object(M.jsx)("div",{className:"match-history-value",style:{color:"Won"===e.result?"#769656":"Draw"===e.result?"hsla(0, 0%, 100%, 0.4)":"#dc3545"},children:"English"===t?e.result:s})}),Object(M.jsx)("td",{className:"match-result",children:Object(M.jsxs)("div",{className:"match-history-value reason",children:[" ","English"===t?e.reason:c]})}),Object(M.jsx)("td",{className:"match-date",children:Object(M.jsx)("div",{children:r})})]},"match-".concat(n))}))},Me=(n(170),function(e){var t=e.playerInfo,n=e.viewOthersProfile,a=t.totalGames,s=a.won,c=a.lost,r=a.draw,i=Object(E.c)((function(e){return e.appState.lang}));return Object(M.jsxs)("div",{className:"match-history-container",children:[Object(M.jsxs)("div",{className:"match-history-title",children:[Object(M.jsx)("p",{children:"English"===i?"Match History(Last 20 Played)":"L\u1ecbch S\u1eed \u0110\u1ea5u(20 tr\u1eadn g\u1ea7n nh\u1ea5t)"}),Object(M.jsx)("p",{children:"".concat(s>1e4?"10000+":s,"W/").concat(c>1e4?"10000+":c,"L/").concat(r>1e4?"10000+":r,"D")})]}),t.email.verified?Object(M.jsxs)(Ee.a,{borderless:!0,responsive:!0,children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{}),Object(M.jsx)("th",{children:"English"===i?"Players":"Ng\u01b0\u1eddi Ch\u01a1i"}),Object(M.jsx)("th",{}),Object(M.jsx)("th",{}),Object(M.jsx)("th",{}),Object(M.jsx)("th",{children:"English"===i?"Result":"K\u1ebft Qu\u1ea3"}),Object(M.jsx)("th",{children:"English"===i?"Reason":"L\xfd Do"}),Object(M.jsx)("th",{className:"date-head",children:"English"===i?"Date":"Ng\xe0y"})]})}),Object(M.jsx)("tbody",{children:Pe(t,i)})]}):Object(M.jsx)("p",{id:"verify-email-note",children:n?"English"===i?"User's match history isn't available.":"L\u1ecbch s\u1eed \u0111\u1ea5u c\u1ee7a ng\u01b0\u1eddi ch\u01a1i hi\u1ec7n kh\xf4ng kh\u1ea3 d\u1ee5ng.":"English"===i?Object(M.jsxs)(M.Fragment,{children:["You need to verify your email to view your match history. Please click ",Object(M.jsx)(P.b,{to:"/verify-email",children:"here"})," to verify your email or"," ",Object(M.jsx)(P.b,{to:"/settings",children:"here"})," to change your email."]}):Object(M.jsxs)(M.Fragment,{children:["B\u1ea1n c\u1ea7n ph\u1ea3i x\xe1c nh\u1eadn email \u0111\u1ec3 xem l\u1ecbch s\u1eed \u0111\u1ea5u. Xin h\xe3y nh\u1ea5p v\xe0o"," ",Object(M.jsx)(P.b,{to:"/verify-email",children:"\u0111\xe2y"})," \u0111\u1ec3 x\xe1c nh\u1eadn email ho\u1eb7c v\xe0o"," ",Object(M.jsx)(P.b,{to:"/settings",children:"\u0111\xe2y"})," \u0111\u1ec3 thay \u0111\u1ed5i email."]})})]})}),Ie=function(e){var t=Object(E.b)(),n=Object(i.h)().name,s=Object(a.useState)(null),c=Object(j.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)(!1),h=Object(j.a)(d,2),m=h[0],b=h[1],p=Object(E.c)((function(e){return e.appState.loginError})),f=Object(E.c)((function(e){return e.appState.playerInfo})),O=Object(a.useState)(!1),g=Object(j.a)(O,2),x=g[0],k=g[1];return Object(a.useEffect)(Object(u.a)(l.a.mark((function e(){var a,s,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p){e.next=3;break}return e.abrupt("return");case 3:if(k(!0),n){e.next=10;break}return e.next=7,v("GET","api/user");case 7:a=e.sent,e.next=13;break;case 10:return e.next=12,v("POST","api/user",{username:n});case 12:a=e.sent;case 13:k(!1),c=(s=a).user,r=s.message,c?(t({type:"setPlayerInfo",value:c}),c.lang&&t({type:"setLang",value:c.lang})):r?t({type:"setLoginError",value:r}):c||f||b(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),t({type:"setLoginError",value:e.t0.message});case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[]),m?Object(M.jsx)(i.a,{to:"/"}):p?Object(M.jsx)(i.a,{to:"/signin"}):!f||x?Object(M.jsx)(T.a,{animation:"border",variant:"secondary",className:"spinner"}):Object(M.jsxs)(y.a,{fluid:!0,children:[Object(M.jsx)(U,{setWaitForResponse:k,setRedirect:b}),Object(M.jsxs)(w.a,{className:"home-row mt-3",children:[Object(M.jsxs)("p",{className:"upload-pic-err",style:{display:r?"block":" none"},children:[Object(M.jsx)("i",{className:"fas fa-times",onClick:function(){o(null)}}),r]}),Object(M.jsxs)(S.a,{lg:{span:8},md:{span:9},sm:{span:11},className:"profile-info-container",children:[Object(M.jsx)(Ne,{setError:o,playerInfo:f,viewOthersProfile:Boolean(n)}),Object(M.jsx)(Te,{playerInfo:f}),Object(M.jsx)(Me,{playerInfo:f,viewOthersProfile:Boolean(n)})]}),Object(M.jsx)(S.a,{lg:{span:4},md:{span:9},sm:{span:11},className:"find-players-container",children:Object(M.jsx)(Ce,{playerInfo:f})})]})]})},Le=(n(171),function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.appState.playerInfo})),n=Object(E.c)((function(e){return e.appState.lang})),s=Object(a.useState)("English"===n?"Save":"L\u01b0u"),c=Object(j.a)(s,2),r=c[0],o=c[1],d=Object(a.useState)(null),h=Object(j.a)(d,2),m=h[0],b=h[1],p=Object(a.useState)(!1),f=Object(j.a)(p,2),O=f[0],g=f[1],P=x(!1,!0,n),I=Object(a.useState)(!1),L=Object(j.a)(I,2),D=L[0],G=L[1],R=function(){var e={},n=P.username,a=P.email,s=P.lastname,c=P.firstname;return t.username!==n&&(e.username=n),t.email.value!==a&&(e.email={value:a,verified:!1}),e["name.lastname"]=s,e["name.firstname"]=c,P.password&&(e.password=P.password),e},A=function(){var a=Object(u.a)(l.a.mark((function a(s){var c,r,i,u,j,d,h,m;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,s.preventDefault(),!O){a.next=4;break}return a.abrupt("return");case 4:if(b(""),P.setError(null),c=P.password,r=P.confirmPassword,i=P.handleMissingField(!t.email.value),c===r){a.next=11;break}return P.setConfirmPasswordMess("English"===n?"Password doesn't match":"M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"),a.abrupt("return");case 11:if(i||P.invalidEmailMess||P.invalidPasswordMess||P.invalidUsernameMess||P.confirmPasswordMess){a.next=22;break}return u=R(),g(!0),a.next=16,v("POST","api/signup/settings",{changes:u,currentPassword:P.currentPassword,user:t.username});case 16:j=a.sent,d=j.user,h=j.message,m=j.ok,g(!1),d?(e({type:"setPlayerInfo",value:d}),o("English"===n?"Your settings have been saved.":"Thay \u0111\u1ed5i c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u"),setTimeout((function(){o("English"===n?"Save":"L\u01b0u")}),1e3)):h&&P.handleError(m,h);case 22:a.next=28;break;case 24:a.prev=24,a.t0=a.catch(0),g(!1),b(a.t0.message);case 28:case"end":return a.stop()}}),a,null,[[0,24]])})));return function(e){return a.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(t){var e=t.username,n=t.email,a=t.name;P.setUsername(e||""),P.setEmail(n.value?n.value:""),P.setLastname(a.lastname?a.lastname:""),P.setFirstname(a.firstname?a.firstname:"")}}),[]),t?D?Object(M.jsx)(T.a,{animation:"border",variant:"secondary",className:"spinner"}):Object(M.jsxs)(y.a,{fluid:!0,className:"settings-container",children:[Object(M.jsx)(U,{setWaitForResponse:G}),Object(M.jsxs)(w.a,{className:"home-row mt-3",children:[Object(M.jsxs)("p",{className:"upload-pic-err",style:{display:m||P.error?"block":" none"},children:[Object(M.jsx)("i",{className:"fas fa-times",onClick:function(){P.setError(null),b(null)}}),m||P.error]}),Object(M.jsxs)(S.a,{xs:11,md:7,children:[Object(M.jsx)(Ne,{setError:b,setting:!0,playerInfo:t}),Object(M.jsxs)(k.a,{className:"mt-3 mb-3 settings-form",method:"POST",onSubmit:A,children:[Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"English"===n?"Username":"T\xean t\xe0i kho\u1ea3n"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"text",value:P.username,onChange:P.handleUsernameChange,isInvalid:""!==P.invalidUsernameMess}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:P.invalidUsernameMess})]})})]}),Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"Email"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"email",value:P.email,onChange:P.handleEmailChange,isInvalid:""!==P.invalidEmailMess}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:P.invalidEmailMess})]})})]}),Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"English"===n?"Firstname":"H\u1ecd"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsx)(k.a.Control,{type:"text",value:P.firstname,onChange:P.handleFirstnameChange})})]}),Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"English"===n?"Lastname":"T\xean"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsx)(k.a.Control,{type:"text",value:P.lastname,onChange:P.handleLastnameChange})})]}),Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"English"===n?"Current Password":"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"password",value:P.currentPassword,onChange:P.handleCurrentPasswordChange,isInvalid:""!==P.invalidCurrentPassword}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:P.invalidCurrentPassword})]})})]}),Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"English"===n?"New Password":"M\u1eadt kh\u1ea9u m\u1edbi"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsxs)(C.a,{hasValidation:!0,className:"password-group",children:[Object(M.jsx)(k.a.Control,{type:P.showPassword?"text":"password",value:P.password,isInvalid:""!==P.invalidPasswordMess,onChange:P.handlePasswordChange}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:P.invalidPasswordMess}),Object(M.jsx)("button",{className:"toggle-password",type:"button",style:{display:P.invalidPasswordMess?"none":"inline"},onClick:function(){P.setShowPassword(!P.showPassword)},children:P.showPassword?"Hide":"Show"})]})})]}),Object(M.jsxs)(k.a.Group,{as:w.a,className:"mt-4 form-group-row",children:[Object(M.jsx)(k.a.Label,{column:!0,xs:12,lg:2,children:"English"===n?"Confirm New Password":"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi"}),Object(M.jsx)(S.a,{sm:12,lg:10,children:Object(M.jsxs)(C.a,{hasValidation:!0,children:[Object(M.jsx)(k.a.Control,{type:"password",value:P.confirmPassword,onChange:P.handleConfirmPasswordChange,isInvalid:""!==P.confirmPasswordMess}),Object(M.jsx)(k.a.Control.Feedback,{type:"invalid",children:P.confirmPasswordMess})]})})]}),Object(M.jsx)(S.a,{className:"mt-4",children:Object(M.jsx)(N.a,{type:"submit",className:"submit-form-button",children:O?Object(M.jsx)(T.a,{animation:"border",variant:"dark"}):r})})]})]})]})]}):Object(M.jsx)(i.a,{to:"/"})}),De=function(e,t){var n=Object(E.d)(),s=Object(i.g)(),c=Object(E.b)();Object(a.useEffect)((function(){var a=n.getState().gameState.foundMatch,r=n.getState().gameState.opponentInfo,i=n.getState().gameState.gameResult;void 0!==i&&a&&"/"!==s.pathname&&!i&&(c({type:"setGameResult",value:"Lose"}),c({type:"setMessage",value:{type:"game result message",winner:"".concat(r.playername," Won - "),reason:"Game Abandoned",className:"game-message"}}),t(null,!0,c),e.emit("gameFinish",["Won","Game Abandoned"]))}),[s])};function Ge(){return De(m,g),Object(M.jsx)(b.Provider,{value:m,children:Object(M.jsx)(p.Provider,{value:g,children:Object(M.jsx)(f.Provider,{value:O,children:Object(M.jsxs)(i.d,{children:[Object(M.jsx)(i.b,{path:"/signin",children:Object(M.jsx)(I,{})}),Object(M.jsx)(i.b,{path:"/signup",children:Object(M.jsx)(we,{})}),Object(M.jsx)(i.b,{path:"/verify-email",children:Object(M.jsx)(Se,{})}),Object(M.jsx)(i.b,{path:"/home/:name",children:Object(M.jsx)(Ie,{})}),Object(M.jsx)(i.b,{path:"/home",children:Object(M.jsx)(Ie,{})}),Object(M.jsx)(i.b,{path:"/settings",children:Object(M.jsx)(Le,{})}),Object(M.jsx)(i.b,{path:"/",children:Object(M.jsx)(ye,{})})]})})})})}var Re=n(46),Ae=n(101),Be=n(102),Fe=n(23),We=n(22),Ve=[[1,1],[1,-1],[-1,1],[-1,-1]],He=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=Ve,i.minCol=3,i.maxCol=5,i.minRow=i.side===i.choosenSide[0]?0:7,i.maxRow=i.side===i.choosenSide[0]?2:9,i}return Object(ce.a)(n,[{key:"countPiecesBetween",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=0;do{c+=c>t?-1:1,n[s+=s>e?-1:1][c]&&r++}while(c!==t||s!==e);return r}},{key:"canCaptureGeneral",value:function(){return!1}}]),n}(re),Ue=[[1,0],[0,1],[-1,0],[0,-1]],qe=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=Ue,i}return Object(ce.a)(n,[{key:"canCaptureGeneral",value:function(e){var t=Object(j.a)(this.position,2),n=t[0],a=t[1],s=n<3?1:-1;do{if(e[n+=s][a])return"general"===e[n][a].name.split("-")[0]&&e[n][a].translate}while(0!==n&&9!==n);return!1}},{key:"countPiecesBetween",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=0;if(e===s)do{c+=c>t?-1:1,n[s][c]&&r++}while(c!==t);else do{n[s+=s>e?-1:1][c]&&r++}while(s!==e);return r}}]),n}(He),_e=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0],[-9,0]],Xe=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=_e,i}return Object(ce.a)(n,[{key:"canMoveToNewPosition",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=c*this.width,i=s*this.width;if(this.translate="translate(".concat(r,", ").concat(i,")"),this.side===this.choosenSide[1]){var o=this.checkValidMove(e,t,n);if(o&&!/translate/.test(o)){if(n[e][t].side){if(n[e][t].side!==n[s][c].side&&2===this.countPiecesBetween(e,t,n))return"capture"}else if(0===this.countPiecesBetween(e,t,n))return!0}else if(o)return o}return!1}},{key:"canCaptureGeneral",value:function(e){var t,n=Object(j.a)(this.position,2),a=n[0],s=n[1],c=Object(ae.a)(this.moves);try{for(c.s();!(t=c.n()).done;){var r=t.value,i=a+r[0],o=s+r[1];if(o>=0&&o<9&&i>=0&&i<10&&e[i][o].side&&e[i][o].side!==e[a][s].side&&2===this.countPiecesBetween(i,o,e)&&"general"===e[i][o].name.split("-")[0])return e[i][o].translate}}catch(l){c.e(l)}finally{c.f()}return!1}}]),n}(re),Ke=[[-2,-2],[2,2],[-2,2],[2,-2]],ze=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=Ke,i.maxRow=i.side===i.choosenSide[0]?4:9,i.minRow=i.side===i.choosenSide[0]?0:5,i}return Object(ce.a)(n,[{key:"countPiecesBetween",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=0;do{c+=c>t?-1:1,n[s+=s>e?-1:1][c]&&r++}while(c!==t||s!==e);return r}},{key:"canCaptureGeneral",value:function(){return!1}}]),n}(re),Je=[[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,-1],[0,-2],[0,-3],[0,-4],[0,-5],[0,-6],[0,-7],[0,-8],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[-1,0],[-2,0],[-3,0],[-4,0],[-5,0],[-6,0],[-7,0],[-8,0],[-9,0]],Ye=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=Je,i}return n}(re),Ze=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[-1,2],[1,-2],[-1,-2]],Qe=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=Ze,i}return Object(ce.a)(n,[{key:"canMoveToNewPosition",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=c*this.width,i=s*this.width;if(this.translate="translate(".concat(r,", ").concat(i,")"),this.side===this.choosenSide[1]){var o=this.checkValidMove(e,t,n);if(o&&!/translate/.test(o)){if(!this.isBlocked(e,t,n)){if(!n[e][t].side)return!0;if(n[e][t].side!==n[s][c].side)return"capture"}}else if(o)return o}return!1}},{key:"isBlocked",value:function(e,t,n){var a=Object(j.a)(this.position,2),s=a[0],c=a[1],r=e-s,i=t-c;return 2===Math.abs(r)?n[s+r/2][c]:n[s][c+i/2]}},{key:"canCaptureGeneral",value:function(e){var t,n=Object(j.a)(this.position,2),a=n[0],s=n[1],c=Object(ae.a)(this.moves);try{for(c.s();!(t=c.n()).done;){var r=t.value,i=a+r[0],o=s+r[1];if(o>=0&&o<9&&i>=0&&i<10&&e[i][o].side&&e[i][o].side!==e[a][s].side&&!this.isBlocked(i,o,e)&&"general"===e[i][o].name.split("-")[0])return e[i][o].translate}}catch(l){c.e(l)}finally{c.f()}return!1}}]),n}(re),$e=[[[1,0]],[[-1,0]]],et=function(e){Object(Fe.a)(n,e);var t=Object(We.a)(n);function n(e,a,s,c,r){var i;return Object(se.a)(this,n),(i=t.call(this,e,a,s,c,r)).moves=r[0]===i.side?Object(B.a)($e[0]):Object(B.a)($e[1]),i}return Object(ce.a)(n,[{key:"setPosition",value:function(e,t,n){var a=n*this.width,s=t*this.width,c="translate(".concat(a,", ").concat(s,")");return this.position=[t,n],this.translate=c,this.side===this.choosenSide[0]?this.position[0]>4&&this.crossRiver():this.position[0]<5&&this.crossRiver(),["capture"===e,t,n]}},{key:"crossRiver",value:function(){this.moves.push([0,1]),this.moves.push([0,-1])}}]),n}(re),tt=function(e,t,n,a,s){switch(a.split("-")[0]){case"advisor":return new He(e,t,n,a,s);case"general":return new qe(e,t,n,a,s);case"cannon":return new Xe(e,t,n,a,s);case"soldier":return new et(e,t,n,a,s);case"chariot":return new Ye(e,t,n,a,s);case"horse":return new Qe(e,t,n,a,s);default:return new ze(e,t,n,a,s)}},nt=function(e,t){for(var n=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],a=function(e){return{"0,0":"chariot-".concat(e[0]),"0,1":"horse-".concat(e[0]),"0,2":"elephant-".concat(e[0]),"0,3":"advisor-".concat(e[0]),"0,4":"general-".concat(e[0]),"0,5":"advisor-".concat(e[0]),"0,6":"elephant-".concat(e[0]),"0,7":"horse-".concat(e[0]),"0,8":"chariot-".concat(e[0]),"2,1":"cannon-".concat(e[0]),"2,7":"cannon-".concat(e[0]),"3,0":"soldier-".concat(e[0]),"3,2":"soldier-".concat(e[0]),"3,4":"soldier-".concat(e[0]),"3,6":"soldier-".concat(e[0]),"3,8":"soldier-".concat(e[0]),"6,0":"soldier-".concat(e[1]),"6,2":"soldier-".concat(e[1]),"6,4":"soldier-".concat(e[1]),"6,6":"soldier-".concat(e[1]),"6,8":"soldier-".concat(e[1]),"7,1":"cannon-".concat(e[1]),"7,7":"cannon-".concat(e[1]),"9,0":"chariot-".concat(e[1]),"9,1":"horse-".concat(e[1]),"9,2":"elephant-".concat(e[1]),"9,3":"advisor-".concat(e[1]),"9,4":"general-".concat(e[1]),"9,5":"advisor-".concat(e[1]),"9,6":"elephant-".concat(e[1]),"9,7":"horse-".concat(e[1]),"9,8":"chariot-".concat(e[1])}}(t),s=0;s<10;s++)for(var c=0;c<9;c++){var r=a[[s,c].toString()];r&&(n[s][c]=tt(e,s,c,r,t))}return n},at={board:nt(520/9,["red","black"]),targetDisplay:"none",targetTranslate:"translate(0, 0)",boardSize:[520,520/(521/577)],currentPiece:null,getClicked:!1,draggable:!1,capturedPieces:[],turnToMove:!1,side:["red","black"]},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e),a=t.type,s=t.value;switch(a){case"setBoard":return n.board=s,n;case"setTargetDisplay":return n.targetDisplay=s,n;case"setTargetTranslate":return n.targetTranslate=s,n;case"setBoardSize":return n.boardSize=s,n;case"setCurrentPiece":return n.currentPiece=s,n;case"setGetClicked":return n.getClicked=s,n;case"setDraggable":return n.draggable=s,n;case"setCapturedPieces":var c=Object(B.a)(n.capturedPieces);return c.push(s),n.capturedPieces=c,n;case"setTurnToMove":return n.turnToMove=s,n;case"switchSide":var r=+document.querySelector(".board-container").offsetWidth;return n.board=nt(r/9,s),n.side=s,n;case"resetBoardState":return at.board=nt(s/9,["red","black"]),at.boardSize=[s,s/(521/577)],at;default:return e}},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lang:"English",isAuthenticated:!1,playerInfo:null,loginError:null},t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e),a=t.type,s=t.value;switch(a){case"setLoginError":return n.loginError=s,n;case"setPlayerInfo":return n.playerInfo=s,n;case"setLang":return n.lang=s,n;case"setIsAuthenticated":return n.isAuthenticated=s,n;default:return e}},rt={findingMatch:"Play",foundMatch:!1,time:10,opponentTimeLeftToMove:600,playerTimeLeftToMove:600,pause:!1,pauseTime:1500,receiveDrawOffer:!1,messages:[],opponentInfo:{playername:"Opponent",photo:"https://betacssjs.chesscomfiles.com/bundles/web/images/black_400.918cdaa6.png"},gameResult:null,gameResultDisplay:"flex"},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e),a=t.type,s=t.value;switch(a){case"setOpponentInfo":return n.opponentInfo=s,n;case"setPauseTime":return"restart"===s?n.pauseTime=1500:"timeout"===s?n.pauseTime=5:n.pauseTime-=1,n;case"setGameResult":return n.gameResult=s,n;case"setFindingMatch":return n.findingMatch=s,n;case"setFoundMatch":return n.foundMatch=s,n;case"setTime":return n.time=s,n.playerTimeLeftToMove=60*s,n.opponentTimeLeftToMove=60*s,n;case"setPlayerTimeLeftToMove":return"restart"===s?n.playerTimeLeftToMove=60*n.time:n.playerTimeLeftToMove-=1,n;case"setOpponentTimeLeftToMove":return"restart"===s?n.opponentTimeLeftToMove=60*n.time:n.opponentTimeLeftToMove-=1,n;case"setPause":return n.pause=s,n;case"setReceiveDrawOffer":return n.receiveDrawOffer=s,n;case"setMessage":var c=Object(B.a)(n.messages);return c.push(s),n.messages=c,n;case"setGameResultDisplay":return n.gameResultDisplay=s,n;case"resetGameState":return rt;default:return e}},ot=Object(Re.b)({boardState:st,appState:ct,gameState:it}),lt=Object(Be.debounce)((function(e){return e()})),ut=Object(Re.c)(ot,Object(Ae.batchedSubscribe)(lt));r.a.render(Object(M.jsx)(E.a,{store:ut,children:Object(M.jsx)(P.a,{children:Object(M.jsx)(Ge,{})})}),document.getElementById("root"));var jt="https://co-tuong-online.herokuapp.com"}},[[173,1,2]]]);
//# sourceMappingURL=main.aa44fcb4.chunk.js.map